SourceFile
  TypeAliasDeclaration
    Identifier: ' ADT'
    UnionType
      TypeLiteral
        PropertySignature
          Identifier: '
    tag'
          LiteralType
            StringLiteral
        PropertySignature
          Identifier: '
    a1'
          StringKeyword
      TypeLiteral
        PropertySignature
          Identifier: '
    tag'
          LiteralType
            StringLiteral
        PropertySignature
          Identifier: '
    d20'
          UnionType
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
            LiteralType
              NumericLiteral
      TypeLiteral
        PropertySignature
          Identifier: '
    tag'
          LiteralType
            StringLiteral
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' wrong'
        TypeReference
          Identifier: ' ADT'
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: ' tag'
            StringLiteral
          PropertyAssignment
            Identifier: ' a1'
            StringLiteral
  ExpressionStatement
    BinaryExpression
      Identifier: '
wrong'
      EqualsToken
      ObjectLiteralExpression
        PropertyAssignment
          Identifier: ' tag'
          StringLiteral
        PropertyAssignment
          Identifier: ' d20'
          NumericLiteral
  ExpressionStatement
    BinaryExpression
      Identifier: '
wrong'
      EqualsToken
      ObjectLiteralExpression
        PropertyAssignment
          Identifier: ' tag'
          StringLiteral
  TypeAliasDeclaration
    Identifier: ' Ambiguous'
    UnionType
      TypeLiteral
        PropertySignature
          Identifier: '
    tag'
          LiteralType
            StringLiteral
        PropertySignature
          Identifier: '
    x'
          StringKeyword
      TypeLiteral
        PropertySignature
          Identifier: '
    tag'
          LiteralType
            StringLiteral
        PropertySignature
          Identifier: '
    y'
          NumberKeyword
      TypeLiteral
        PropertySignature
          Identifier: '
    tag'
          LiteralType
            StringLiteral
        PropertySignature
          Identifier: '
    z'
          BooleanKeyword
      TypeLiteral
        PropertySignature
          Identifier: '
    tag'
          LiteralType
            StringLiteral
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' amb'
        TypeReference
          Identifier: ' Ambiguous'
  ExpressionStatement
    BinaryExpression
      Identifier: '
// no error for ambiguous tag, even when it could satisfy both constituents at once
amb'
      EqualsToken
      ObjectLiteralExpression
        PropertyAssignment
          Identifier: ' tag'
          StringLiteral
        PropertyAssignment
          Identifier: ' x'
          StringLiteral
  ExpressionStatement
    BinaryExpression
      Identifier: '
amb'
      EqualsToken
      ObjectLiteralExpression
        PropertyAssignment
          Identifier: ' tag'
          StringLiteral
        PropertyAssignment
          Identifier: ' y'
          NumericLiteral
  ExpressionStatement
    BinaryExpression
      Identifier: '
amb'
      EqualsToken
      ObjectLiteralExpression
        PropertyAssignment
          Identifier: ' tag'
          StringLiteral
        PropertyAssignment
          Identifier: ' x'
          StringLiteral
        PropertyAssignment
          Identifier: ' y'
          NumericLiteral
  ExpressionStatement
    BinaryExpression
      Identifier: '

// correctly error on excess property 'extra', even when ambiguous
amb'
      EqualsToken
      ObjectLiteralExpression
        PropertyAssignment
          Identifier: ' tag'
          StringLiteral
        PropertyAssignment
          Identifier: ' x'
          StringLiteral
        PropertyAssignment
          Identifier: ' extra'
          NumericLiteral
  ExpressionStatement
    BinaryExpression
      Identifier: '
amb'
      EqualsToken
      ObjectLiteralExpression
        PropertyAssignment
          Identifier: ' tag'
          StringLiteral
        PropertyAssignment
          Identifier: ' y'
          NumericLiteral
        PropertyAssignment
          Identifier: ' extra'
          NumericLiteral
  ExpressionStatement
    BinaryExpression
      Identifier: '

// assignability errors still work
amb'
      EqualsToken
      ObjectLiteralExpression
        PropertyAssignment
          Identifier: ' tag'
          StringLiteral
  ExpressionStatement
    BinaryExpression
      Identifier: '
amb'
      EqualsToken
      ObjectLiteralExpression
        PropertyAssignment
          Identifier: ' tag'
          StringLiteral
        PropertyAssignment
          Identifier: ' z'
          TrueKeyword
  TypeAliasDeclaration
    Identifier: ' Overlapping'
    UnionType
      TypeLiteral
        PropertySignature
          Identifier: ' a'
          LiteralType
            NumericLiteral
        PropertySignature
          Identifier: ' b'
          LiteralType
            NumericLiteral
        PropertySignature
          Identifier: ' first'
          StringKeyword
      TypeLiteral
        PropertySignature
          Identifier: ' a'
          LiteralType
            NumericLiteral
        PropertySignature
          Identifier: ' second'
          StringKeyword
      TypeLiteral
        PropertySignature
          Identifier: ' b'
          LiteralType
            NumericLiteral
        PropertySignature
          Identifier: ' third'
          StringKeyword
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' over'
        TypeReference
          Identifier: ' Overlapping'
  ExpressionStatement
    BinaryExpression
      Identifier: '

// these two are still errors despite their doubled up discriminants
over'
      EqualsToken
      ObjectLiteralExpression
        PropertyAssignment
          Identifier: ' a'
          NumericLiteral
        PropertyAssignment
          Identifier: ' b'
          NumericLiteral
        PropertyAssignment
          Identifier: ' first'
          StringLiteral
        PropertyAssignment
          Identifier: ' second'
          StringLiteral
  ExpressionStatement
    BinaryExpression
      Identifier: '
over'
      EqualsToken
      ObjectLiteralExpression
        PropertyAssignment
          Identifier: ' a'
          NumericLiteral
        PropertyAssignment
          Identifier: ' b'
          NumericLiteral
        PropertyAssignment
          Identifier: ' first'
          StringLiteral
        PropertyAssignment
          Identifier: ' third'
          StringLiteral
  VariableStatement
    DeclareKeyword
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' t0'
        UnionType
          TypeLiteral
            PropertySignature
              Identifier: ' a'
              AnyKeyword
            PropertySignature
              Identifier: ' b'
              AnyKeyword
          TypeLiteral
            PropertySignature
              Identifier: ' d'
              AnyKeyword
            PropertySignature
              Identifier: ' e'
              AnyKeyword
  VariableStatement
    DeclareKeyword
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' t1'
        UnionType
          TypeLiteral
            PropertySignature
              Identifier: ' a'
              AnyKeyword
            PropertySignature
              Identifier: ' b'
              AnyKeyword
            PropertySignature
              Identifier: ' c'
              AnyKeyword
          TypeLiteral
            PropertySignature
              Identifier: ' c'
              AnyKeyword
            PropertySignature
              Identifier: ' d'
              AnyKeyword
            PropertySignature
              Identifier: ' e'
              AnyKeyword
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' t2'
        ObjectLiteralExpression
          SpreadAssignment
            Identifier: 't1'
  ExpressionStatement
    BinaryExpression
      Identifier: '
t0'
      EqualsToken
      Identifier: ' t2'
  TypeAliasDeclaration
    Identifier: ' AN'
    UnionType
      TypeLiteral
        PropertySignature
          Identifier: ' a'
          StringKeyword
      TypeLiteral
        PropertySignature
          Identifier: ' c'
          StringKeyword
  TypeAliasDeclaration
    Identifier: ' BN'
    TypeLiteral
      PropertySignature
        Identifier: ' b'
        StringKeyword
  TypeAliasDeclaration
    Identifier: ' AB'
    UnionType
      TypeLiteral
        PropertySignature
          Identifier: ' kind'
          LiteralType
            StringLiteral
        PropertySignature
          Identifier: ' n'
          TypeReference
            Identifier: ' AN'
      TypeLiteral
        PropertySignature
          Identifier: ' kind'
          LiteralType
            StringLiteral
        PropertySignature
          Identifier: ' n'
          TypeReference
            Identifier: ' BN'
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' abab'
        TypeReference
          Identifier: ' AB'
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: '
    kind'
            StringLiteral
          PropertyAssignment
            Identifier: '
    n'
            ObjectLiteralExpression
              PropertyAssignment
                Identifier: '
        a'
                StringLiteral
              PropertyAssignment
                Identifier: '
        b'
                StringLiteral
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' abac'
        TypeReference
          Identifier: ' AB'
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: '
    kind'
            StringLiteral
          PropertyAssignment
            Identifier: '
    n'
            ObjectLiteralExpression
              PropertyAssignment
                Identifier: '
        a'
                StringLiteral
              PropertyAssignment
                Identifier: '
        c'
                StringLiteral
  TypeAliasDeclaration
    Identifier: ' Button'
    TypeLiteral
      PropertySignature
        Identifier: ' tag'
        LiteralType
          StringLiteral
      PropertySignature
        Identifier: ' type'
        QuestionToken
        LiteralType
          StringLiteral
  TypeAliasDeclaration
    Identifier: ' Anchor'
    TypeLiteral
      PropertySignature
        Identifier: ' tag'
        LiteralType
          StringLiteral
      PropertySignature
        Identifier: ' type'
        QuestionToken
        StringKeyword
      PropertySignature
        Identifier: ' href'
        StringKeyword
  TypeAliasDeclaration
    Identifier: ' Union'
    UnionType
      TypeReference
        Identifier: ' Button'
      TypeReference
        Identifier: ' Anchor'
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' obj'
        TypeReference
          Identifier: ' Union'
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: '
    tag'
            StringLiteral
          PropertyAssignment
            Identifier: '
    type'
            StringLiteral
          PropertyAssignment
            Identifier: '

    // should have error here
    href'
            StringLiteral
  InterfaceDeclaration
    Identifier: ' IValue'
    PropertySignature
      Identifier: '
  value'
      StringKeyword
  InterfaceDeclaration
    Identifier: ' StringKeys'
    IndexSignature
      Parameter
        Identifier: 'propertyName'
        StringKeyword
      TypeReference
        Identifier: ' IValue'
  EmptyStatement
  InterfaceDeclaration
    Identifier: ' NumberKeys'
    IndexSignature
      Parameter
        Identifier: 'propertyName'
        NumberKeyword
      TypeReference
        Identifier: ' IValue'
  TypeAliasDeclaration
    Identifier: ' ObjectDataSpecification'
    UnionType
      TypeReference
        Identifier: ' StringKeys'
      TypeReference
        Identifier: ' NumberKeys'
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' dataSpecification'
        TypeReference
          Identifier: ' ObjectDataSpecification'
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: '  // Error
    foo'
            StringLiteral
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' obj1'
        UnionType
          TypeLiteral
            IndexSignature
              Parameter
                Identifier: 'x'
                StringKeyword
              NumberKeyword
          TypeLiteral
            IndexSignature
              Parameter
                Identifier: 'x'
                NumberKeyword
              NumberKeyword
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: ' a'
            StringLiteral
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' obj2'
        UnionType
          TypeLiteral
            IndexSignature
              Parameter
                Identifier: 'x'
                StringKeyword
              NumberKeyword
          TypeLiteral
            PropertySignature
              Identifier: ' a'
              NumberKeyword
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: ' a'
            NumericLiteral
          PropertyAssignment
            Identifier: ' c'
            StringLiteral
  InterfaceDeclaration
    Identifier: ' I1'
    PropertySignature
      Identifier: '
    prop1'
      StringKeyword
  InterfaceDeclaration
    Identifier: ' I2'
    PropertySignature
      Identifier: '
    prop2'
      StringKeyword
  InterfaceDeclaration
    Identifier: ' I3'
    HeritageClause
      ExpressionWithTypeArguments
        Identifier: ' Record'
        StringKeyword
        StringKeyword
  TypeAliasDeclaration
    Identifier: ' Properties'
    UnionType
      TypeLiteral
        IndexSignature
          Parameter
            Identifier: 'key'
            StringKeyword
          NeverKeyword
      TypeReference
        Identifier: ' I1'
      TypeReference
        Identifier: ' I2'
      TypeReference
        Identifier: ' I3'
  VariableStatement
    DeclareKeyword
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' prop1'
        StringKeyword
  VariableStatement
    DeclareKeyword
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' prop2'
        UnionType
          StringKeyword
          UndefinedKeyword
  FunctionDeclaration
    Identifier: ' F1'
    Parameter
      Identifier: '_arg'
      TypeLiteral
        PropertySignature
          Identifier: ' props'
          TypeReference
            Identifier: ' Properties'
    Block
  ExpressionStatement
    CallExpression
      Identifier: '
F1'
      ObjectLiteralExpression
        PropertyAssignment
          Identifier: '
    props'
          ObjectLiteralExpression
            ShorthandPropertyAssignment
              Identifier: '
        prop1'
            ShorthandPropertyAssignment
              Identifier: '
        prop2'
  FunctionDeclaration
    Identifier: ' F2'
    Parameter
      Identifier: '_props'
      TypeReference
        Identifier: ' Properties'
    Block
  ExpressionStatement
    CallExpression
      Identifier: '
F2'
      ObjectLiteralExpression
        ShorthandPropertyAssignment
          Identifier: '
    prop1'
        ShorthandPropertyAssignment
          Identifier: '
    prop2'
