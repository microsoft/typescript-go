SourceFile
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: '
    LoggerWithInMemoryLogs'
        ImportSpecifier
          Identifier: '
    nowString'
    StringLiteral
  ImportDeclaration
    ImportClause
      NamespaceImport
        Identifier: ' ts'
    StringLiteral
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: ' stringifyIndented'
    StringLiteral
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: ' jsonToReadableText'
    StringLiteral
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: ' getPathForTypeScriptTestLocation'
    StringLiteral
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: ' TestSession'
    StringLiteral
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: '
    File'
        ImportSpecifier
          Identifier: '
    TestServerHost'
    StringLiteral
  VariableStatement
    ExportKeyword
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' customTypesMap'
        TypeReference
          Identifier: ' File'
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: '
    path'
            CallExpression
              Identifier: ' getPathForTypeScriptTestLocation'
              StringLiteral
          PropertyAssignment
            Identifier: '
    content'
            CallExpression
              Identifier: ' jsonToReadableText'
              ObjectLiteralExpression
                PropertyAssignment
                  Identifier: '
        typesMap'
                  ObjectLiteralExpression
                    PropertyAssignment
                      Identifier: '
            jquery'
                      ObjectLiteralExpression
                        PropertyAssignment
                          Identifier: '
                match'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
                types'
                          ArrayLiteralExpression
                            StringLiteral
                    PropertyAssignment
                      Identifier: '
            quack'
                      ObjectLiteralExpression
                        PropertyAssignment
                          Identifier: '
                match'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
                types'
                          ArrayLiteralExpression
                            StringLiteral
                PropertyAssignment
                  Identifier: '
        simpleMap'
                  ObjectLiteralExpression
                    PropertyAssignment
                      Identifier: '
            Bacon'
                      StringLiteral
                    PropertyAssignment
                      Identifier: '
            bliss'
                      StringLiteral
                    PropertyAssignment
                      Identifier: '
            commander'
                      StringLiteral
                    PropertyAssignment
                      Identifier: '
            cordova'
                      StringLiteral
                    PropertyAssignment
                      Identifier: '
            react'
                      StringLiteral
                    PropertyAssignment
                      Identifier: '
            lodash'
                      StringLiteral
  FunctionDeclaration
    ExportKeyword
    Identifier: ' loggerToTypingsInstallerLog'
    Parameter
      Identifier: 'logger'
      TypeReference
        Identifier: ' LoggerWithInMemoryLogs'
    TypeReference
      QualifiedName
        QualifiedName
          QualifiedName
            Identifier: ' ts'
            Identifier: 'server'
          Identifier: 'typingsInstaller'
        Identifier: 'Log'
    Block
      ExpressionStatement
        CallExpression
          PropertyAccessExpression
            PropertyAccessExpression
              Identifier: '
    ts'
              Identifier: 'Debug'
            Identifier: 'assert'
          CallExpression
            PropertyAccessExpression
              Identifier: 'logger'
              Identifier: 'loggingEnabled'
      ReturnStatement
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: '
        isEnabled'
            PropertyAccessExpression
              Identifier: ' ts'
              Identifier: 'returnTrue'
          PropertyAssignment
            Identifier: '
        writeLine'
            ArrowFunction
              Parameter
                Identifier: ' s'
              EqualsGreaterThanToken
              CallExpression
                PropertyAccessExpression
                  Identifier: ' logger'
                  Identifier: 'log'
                TemplateExpression
                  TemplateHead
                  TemplateSpan
                    CallExpression
                      Identifier: 'nowString'
                      Identifier: 'logger'
                    TemplateMiddle
                  TemplateSpan
                    Identifier: 's'
                    TemplateTail
  InterfaceDeclaration
    Identifier: ' TypesRegistryFile'
    PropertySignature
      Identifier: '
    entries'
      TypeReference
        QualifiedName
          Identifier: ' ts'
          Identifier: 'MapLike'
        TypeReference
          QualifiedName
            Identifier: 'ts'
            Identifier: 'MapLike'
          StringKeyword
  FunctionDeclaration
    Identifier: ' loadTypesRegistryFile'
    Parameter
      Identifier: 'typesRegistryFilePath'
      StringKeyword
    Parameter
      Identifier: ' host'
      TypeReference
        Identifier: ' TestServerHost'
    Parameter
      Identifier: ' log'
      TypeReference
        QualifiedName
          QualifiedName
            QualifiedName
              Identifier: ' ts'
              Identifier: 'server'
            Identifier: 'typingsInstaller'
          Identifier: 'Log'
    TypeReference
      Identifier: ' Map'
      StringKeyword
      TypeReference
        QualifiedName
          Identifier: ' ts'
          Identifier: 'MapLike'
        StringKeyword
    Block
      IfStatement
        PrefixUnaryExpression
          CallExpression
            PropertyAccessExpression
              Identifier: 'host'
              Identifier: 'fileExists'
            Identifier: 'typesRegistryFilePath'
        Block
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '
        log'
                Identifier: 'writeLine'
              TemplateExpression
                TemplateHead
                TemplateSpan
                  Identifier: 'typesRegistryFilePath'
                  TemplateTail
          ReturnStatement
            NewExpression
              Identifier: ' Map'
              StringKeyword
              TypeReference
                QualifiedName
                  Identifier: ' ts'
                  Identifier: 'MapLike'
                StringKeyword
      TryStatement
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' content'
                AsExpression
                  CallExpression
                    PropertyAccessExpression
                      Identifier: ' JSON'
                      Identifier: 'parse'
                    NonNullExpression
                      CallExpression
                        PropertyAccessExpression
                          Identifier: 'host'
                          Identifier: 'readFile'
                        Identifier: 'typesRegistryFilePath'
                  TypeReference
                    Identifier: ' TypesRegistryFile'
          ReturnStatement
            NewExpression
              Identifier: ' Map'
              CallExpression
                PropertyAccessExpression
                  Identifier: 'Object'
                  Identifier: 'entries'
                PropertyAccessExpression
                  Identifier: 'content'
                  Identifier: 'entries'
        CatchClause
          VariableDeclaration
            Identifier: 'e'
          Block
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  Identifier: '
        log'
                  Identifier: 'writeLine'
                TemplateExpression
                  TemplateHead
                  TemplateSpan
                    Identifier: 'typesRegistryFilePath'
                    TemplateMiddle
                  TemplateSpan
                    PropertyAccessExpression
                      ParenthesizedExpression
                        AsExpression
                          Identifier: 'e'
                          TypeReference
                            Identifier: ' Error'
                      Identifier: 'message'
                    TemplateMiddle
                  TemplateSpan
                    PropertyAccessExpression
                      ParenthesizedExpression
                        AsExpression
                          Identifier: 'e'
                          TypeReference
                            Identifier: ' Error'
                      Identifier: 'stack'
                    TemplateTail
            ReturnStatement
              NewExpression
                Identifier: ' Map'
                StringKeyword
                TypeReference
                  QualifiedName
                    Identifier: ' ts'
                    Identifier: 'MapLike'
                  StringKeyword
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' typesRegistryPackageName'
        StringLiteral
  FunctionDeclaration
    ExportKeyword
    Identifier: ' getTypesRegistryFileLocation'
    Parameter
      Identifier: 'globalTypingsCacheLocation'
      StringKeyword
    StringKeyword
    Block
      ReturnStatement
        CallExpression
          PropertyAccessExpression
            Identifier: ' ts'
            Identifier: 'combinePaths'
          CallExpression
            PropertyAccessExpression
              Identifier: 'ts'
              Identifier: 'normalizeSlashes'
            Identifier: 'globalTypingsCacheLocation'
          TemplateExpression
            TemplateHead
            TemplateSpan
              Identifier: 'typesRegistryPackageName'
              TemplateTail
  InterfaceDeclaration
    ExportKeyword
    Identifier: ' FileWithPackageName'
    HeritageClause
      ExpressionWithTypeArguments
        Identifier: ' File'
    PropertySignature
      Identifier: '
    package'
      QuestionToken
      StringKeyword
  TypeAliasDeclaration
    ExportKeyword
    Identifier: ' InstallActionThrowingError'
    StringKeyword
  TypeAliasDeclaration
    ExportKeyword
    Identifier: ' InstallActionWithSuccess'
    BooleanKeyword
  TypeAliasDeclaration
    ExportKeyword
    Identifier: ' InstallActionWithTypingFiles'
    TypeOperator
      ArrayType
        TypeReference
          Identifier: ' FileWithPackageName'
  TypeAliasDeclaration
    ExportKeyword
    Identifier: ' InstallAction'
    UnionType
      TypeReference
        Identifier: ' InstallActionThrowingError'
      TypeReference
        Identifier: ' InstallActionWithSuccess'
      TypeReference
        Identifier: ' InstallActionWithTypingFiles'
  TypeAliasDeclaration
    ExportKeyword
    Identifier: ' PendingInstallCallback'
    FunctionType
      Parameter
        Identifier: '
    pendingInstallInfo'
        StringKeyword
      Parameter
        Identifier: '
    installedTypingsOrSuccess'
        UnionType
          ArrayType
            StringKeyword
          StringKeyword
          BooleanKeyword
      Parameter
        Identifier: '
    typingFiles'
        TypeOperator
          ArrayType
            TypeReference
              Identifier: ' File'
      Parameter
        Identifier: '
    onRequestCompleted'
        TypeReference
          QualifiedName
            QualifiedName
              QualifiedName
                Identifier: ' ts'
                Identifier: 'server'
              Identifier: 'typingsInstaller'
            Identifier: 'RequestCompletedAction'
      VoidKeyword
  ClassDeclaration
    ExportKeyword
    Identifier: ' TestTypingsInstallerWorker'
    HeritageClause
      ExpressionWithTypeArguments
        PropertyAccessExpression
          PropertyAccessExpression
            PropertyAccessExpression
              Identifier: ' ts'
              Identifier: 'server'
            Identifier: 'typingsInstaller'
          Identifier: 'TypingsInstaller'
    PropertyDeclaration
      ReadonlyKeyword
      Identifier: ' typesRegistry'
      TypeReference
        Identifier: ' Map'
        StringKeyword
        TypeReference
          QualifiedName
            Identifier: ' ts'
            Identifier: 'MapLike'
          StringKeyword
    Constructor
      Parameter
        ReadonlyKeyword
        Identifier: ' testTypingInstaller'
        TypeReference
          Identifier: ' TestTypingsInstallerAdapter'
      Block
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' log'
              CallExpression
                Identifier: ' loggerToTypingsInstallerLog'
                PropertyAccessExpression
                  PropertyAccessExpression
                    Identifier: 'testTypingInstaller'
                    Identifier: 'session'
                  Identifier: 'logger'
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              PropertyAccessExpression
                Identifier: '
        ts'
                Identifier: 'Debug'
              Identifier: 'assert'
            PropertyAccessExpression
              PropertyAccessExpression
                PropertyAccessExpression
                  Identifier: 'testTypingInstaller'
                  Identifier: 'session'
                Identifier: 'host'
              Identifier: 'patched'
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              PropertyAccessExpression
                PropertyAccessExpression
                  Identifier: '
        testTypingInstaller'
                  Identifier: 'session'
                Identifier: 'host'
              Identifier: 'baselineHost'
            StringLiteral
        ExpressionStatement
          CallExpression
            SuperKeyword
            PropertyAccessExpression
              PropertyAccessExpression
                Identifier: '
            testTypingInstaller'
                Identifier: 'session'
              Identifier: 'host'
            PropertyAccessExpression
              Identifier: '
            testTypingInstaller'
              Identifier: 'globalTypingsCacheLocation'
            AsExpression
              CallExpression
                Identifier: '
            getPathForTypeScriptTestLocation'
                StringLiteral
              TypeReference
                QualifiedName
                  Identifier: ' ts'
                  Identifier: 'Path'
            AsExpression
              PropertyAccessExpression
                Identifier: '
            customTypesMap'
                Identifier: 'path'
              TypeReference
                QualifiedName
                  Identifier: ' ts'
                  Identifier: 'Path'
            PropertyAccessExpression
              Identifier: '
            testTypingInstaller'
              Identifier: 'throttleLimit'
            Identifier: '
            log'
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              ThisKeyword
              Identifier: 'ensurePackageDirectoryExists'
            PropertyAccessExpression
              Identifier: 'testTypingInstaller'
              Identifier: 'globalTypingsCacheLocation'
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              PropertyAccessExpression
                ThisKeyword
                Identifier: 'log'
              Identifier: 'writeLine'
            TemplateExpression
              TemplateHead
              TemplateSpan
                Identifier: 'typesRegistryPackageName'
                TemplateTail
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              PropertyAccessExpression
                ThisKeyword
                Identifier: 'log'
              Identifier: 'writeLine'
            TemplateExpression
              TemplateHead
              TemplateSpan
                Identifier: 'typesRegistryPackageName'
                TemplateMiddle
              TemplateSpan
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'latestDistTag'
                TemplateTail
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              PropertyAccessExpression
                PropertyAccessExpression
                  Identifier: '
        testTypingInstaller'
                  Identifier: 'session'
                Identifier: 'host'
              Identifier: 'ensureTypingRegistryFile'
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              PropertyAccessExpression
                ThisKeyword
                Identifier: 'log'
              Identifier: 'writeLine'
            TemplateExpression
              TemplateHead
              TemplateSpan
                Identifier: 'typesRegistryPackageName'
                TemplateTail
        ExpressionStatement
          BinaryExpression
            PropertyAccessExpression
              ThisKeyword
              Identifier: 'typesRegistry'
            EqualsToken
            CallExpression
              Identifier: ' loadTypesRegistryFile'
              CallExpression
                Identifier: '
            getTypesRegistryFileLocation'
                PropertyAccessExpression
                  Identifier: 'testTypingInstaller'
                  Identifier: 'globalTypingsCacheLocation'
              PropertyAccessExpression
                PropertyAccessExpression
                  Identifier: '
            testTypingInstaller'
                  Identifier: 'session'
                Identifier: 'host'
              PropertyAccessExpression
                ThisKeyword
                Identifier: 'log'
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              PropertyAccessExpression
                PropertyAccessExpression
                  Identifier: '
        testTypingInstaller'
                  Identifier: 'session'
                Identifier: 'host'
              Identifier: 'baselineHost'
            StringLiteral
    MethodDeclaration
      Identifier: '

    installWorker'
      Parameter
        Identifier: 'requestId'
        NumberKeyword
      Parameter
        Identifier: ' packageNames'
        ArrayType
          StringKeyword
      Parameter
        Identifier: ' cwd'
        StringKeyword
      Parameter
        Identifier: ' onRequestCompleted'
        TypeReference
          QualifiedName
            QualifiedName
              QualifiedName
                Identifier: ' ts'
                Identifier: 'server'
              Identifier: 'typingsInstaller'
            Identifier: 'RequestCompletedAction'
      VoidKeyword
      Block
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              PropertyAccessExpression
                ThisKeyword
                Identifier: 'log'
              Identifier: 'writeLine'
            TemplateExpression
              TemplateHead
              TemplateSpan
                Identifier: 'requestId'
                TemplateMiddle
              TemplateSpan
                Identifier: 'cwd'
                TemplateMiddle
              TemplateSpan
                CallExpression
                  Identifier: 'jsonToReadableText'
                  Identifier: 'packageNames'
                TemplateTail
        IfStatement
          BinaryExpression
            TypeOfExpression
              PropertyAccessExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'testTypingInstaller'
                Identifier: 'installAction'
            EqualsEqualsEqualsToken
            StringLiteral
          Block
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'scheduleInstall'
                Identifier: '
                requestId'
                Identifier: '
                packageNames'
                PropertyAccessExpression
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'testTypingInstaller'
                  Identifier: 'installAction'
                PropertyAccessExpression
                  Identifier: '
                ts'
                  Identifier: 'emptyArray'
                Identifier: '
                onRequestCompleted'
          IfStatement
            CallExpression
              PropertyAccessExpression
                Identifier: 'ts'
                Identifier: 'isString'
              PropertyAccessExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'testTypingInstaller'
                Identifier: 'installAction'
            Block
              ExpressionStatement
                CallExpression
                  Identifier: '
            assert'
                  FalseKeyword
                  PropertyAccessExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'testTypingInstaller'
                    Identifier: 'installAction'
            Block
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' typingFiles'
                    CallExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'testTypingInstaller'
                          Identifier: 'installAction'
                        Identifier: 'filter'
                      ArrowFunction
                        Parameter
                          Identifier: 'f'
                        EqualsGreaterThanToken
                        BinaryExpression
                          PrefixUnaryExpression
                            PropertyAccessExpression
                              Identifier: 'f'
                              Identifier: 'package'
                          BarBarToken
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' packageNames'
                              Identifier: 'includes'
                            CallExpression
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    Identifier: 'ts'
                                    Identifier: 'server'
                                  Identifier: 'typingsInstaller'
                                Identifier: 'typingsName'
                              PropertyAccessExpression
                                Identifier: 'f'
                                Identifier: 'package'
              ExpressionStatement
                CallExpression
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'scheduleInstall'
                  Identifier: '
                requestId'
                  Identifier: '
                packageNames'
                  TrueKeyword
                  Identifier: '
                typingFiles'
                  Identifier: '
                onRequestCompleted'
    MethodDeclaration
      PrivateKeyword
      Identifier: ' scheduleInstall'
      Parameter
        Identifier: '
        requestId'
        NumberKeyword
      Parameter
        Identifier: '
        packageNames'
        ArrayType
          StringKeyword
      Parameter
        Identifier: '
        success'
        BooleanKeyword
      Parameter
        Identifier: '
        typingFiles'
        TypeOperator
          ArrayType
            TypeReference
              Identifier: ' File'
      Parameter
        Identifier: '
        onRequestCompleted'
        TypeReference
          QualifiedName
            QualifiedName
              QualifiedName
                Identifier: ' ts'
                Identifier: 'server'
              Identifier: 'typingsInstaller'
            Identifier: 'RequestCompletedAction'
      VoidKeyword
      Block
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              PropertyAccessExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'testTypingInstaller'
                  Identifier: 'session'
                Identifier: 'host'
              Identifier: 'scheduleInstall'
            ArrowFunction
              Parameter
                Identifier: '
            pendingInstallInfo'
              EqualsGreaterThanToken
              Block
                ForOfStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' file'
                  Identifier: ' typingFiles'
                  Block
                    ExpressionStatement
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                ThisKeyword
                                Identifier: 'testTypingInstaller'
                              Identifier: 'session'
                            Identifier: 'host'
                          Identifier: 'ensureFileOrFolder'
                        Identifier: 'file'
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'testTypingInstaller'
                          Identifier: 'session'
                        Identifier: 'host'
                      Identifier: 'baselineHost'
                    TemplateExpression
                      TemplateHead
                      TemplateSpan
                        Identifier: 'pendingInstallInfo'
                        TemplateMiddle
                      TemplateSpan
                        PrefixUnaryExpression
                          PrefixUnaryExpression
                            Identifier: 'success'
                        TemplateTail
                ExpressionStatement
                  CallExpression
                    Identifier: '
                onRequestCompleted'
                    PrefixUnaryExpression
                      PrefixUnaryExpression
                        Identifier: 'success'
            TemplateExpression
              TemplateHead
              TemplateSpan
                Identifier: 'requestId'
                TemplateMiddle
              TemplateSpan
                CallExpression
                  Identifier: 'jsonToReadableText'
                  Identifier: 'packageNames'
                TemplateTail
    MethodDeclaration
      Identifier: '

    sendResponse'
      Parameter
        Identifier: 'response'
        UnionType
          TypeReference
            QualifiedName
              QualifiedName
                Identifier: ' ts'
                Identifier: 'server'
              Identifier: 'SetTypings'
          TypeReference
            QualifiedName
              QualifiedName
                Identifier: ' ts'
                Identifier: 'server'
              Identifier: 'InvalidateCachedTypings'
          TypeReference
            QualifiedName
              QualifiedName
                Identifier: ' ts'
                Identifier: 'server'
              Identifier: 'BeginInstallTypes'
          TypeReference
            QualifiedName
              QualifiedName
                Identifier: ' ts'
                Identifier: 'server'
              Identifier: 'EndInstallTypes'
          TypeReference
            QualifiedName
              QualifiedName
                Identifier: ' ts'
                Identifier: 'server'
              Identifier: 'WatchTypingLocations'
          TypeReference
            QualifiedName
              QualifiedName
                Identifier: ' ts'
                Identifier: 'server'
              Identifier: 'PackageInstalledResponse'
      VoidKeyword
      Block
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              PropertyAccessExpression
                ThisKeyword
                Identifier: 'log'
              Identifier: 'writeLine'
            TemplateExpression
              TemplateHead
              TemplateSpan
                CallExpression
                  Identifier: 'stringifyIndented'
                  Identifier: 'response'
                TemplateTail
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              PropertyAccessExpression
                ThisKeyword
                Identifier: 'testTypingInstaller'
              Identifier: 'handleMessage'
            Identifier: 'response'
  InterfaceDeclaration
    ExportKeyword
    Identifier: ' TestTypingsInstallerOptions'
    PropertySignature
      Identifier: '
    host'
      TypeReference
        Identifier: ' TestServerHost'
    PropertySignature
      Identifier: '
    logger'
      QuestionToken
      TypeReference
        Identifier: ' LoggerWithInMemoryLogs'
    PropertySignature
      Identifier: '
    throttleLimit'
      QuestionToken
      NumberKeyword
    PropertySignature
      Identifier: '
    installAction'
      QuestionToken
      TypeReference
        Identifier: ' InstallAction'
    PropertySignature
      Identifier: '
    throttledRequests'
      QuestionToken
      NumberKeyword
  ClassDeclaration
    ExportKeyword
    Identifier: ' TestTypingsInstallerAdapter'
    HeritageClause
      ExpressionWithTypeArguments
        PropertyAccessExpression
          PropertyAccessExpression
            Identifier: ' ts'
            Identifier: 'server'
          Identifier: 'TypingsInstallerAdapter'
    PropertyDeclaration
      Identifier: '
    worker'
      UnionType
        TypeReference
          Identifier: ' TestTypingsInstallerWorker'
        UndefinedKeyword
    PropertyDeclaration
      Identifier: '
    session'
      ExclamationToken
      TypeReference
        Identifier: ' TestSession'
    PropertyDeclaration
      ReadonlyKeyword
      Identifier: ' throttleLimit'
      NumberKeyword
    PropertyDeclaration
      ReadonlyKeyword
      Identifier: ' installAction'
      TypeReference
        Identifier: ' InstallAction'
    PropertyDeclaration
      ReadonlyKeyword
      Identifier: ' throttledRequests'
      UnionType
        NumberKeyword
        UndefinedKeyword
    Constructor
      Parameter
        Identifier: 'options'
        TypeReference
          Identifier: ' TestTypingsInstallerOptions'
      Block
        ExpressionStatement
          CallExpression
            SuperKeyword
            FalseKeyword
            ConditionalExpression
              BinaryExpression
                PropertyAccessExpression
                  Identifier: '
            options'
                  Identifier: 'throttledRequests'
                EqualsEqualsEqualsToken
                Identifier: ' undefined'
              QuestionToken
              ObjectLiteralExpression
                SpreadAssignment
                  NonNullExpression
                    PropertyAccessExpression
                      Identifier: 'options'
                      Identifier: 'logger'
                PropertyAssignment
                  Identifier: ' hasLevel'
                  PropertyAccessExpression
                    Identifier: ' ts'
                    Identifier: 'returnFalse'
              ColonToken
              NonNullExpression
                PropertyAccessExpression
                  Identifier: '
                options'
                  Identifier: 'logger'
            PropertyAccessExpression
              Identifier: '
            options'
              Identifier: 'host'
            PropertyAccessExpression
              PropertyAccessExpression
                Identifier: '
            options'
                Identifier: 'host'
              Identifier: 'globalTypingsCacheLocation'
            ArrowFunction
              Parameter
                DotDotDotToken
                Identifier: 'args'
              EqualsGreaterThanToken
              CallExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'session'
                  Identifier: 'event'
                SpreadElement
                  Identifier: 'args'
            ConditionalExpression
              BinaryExpression
                PropertyAccessExpression
                  Identifier: '
            // Some large number so requests arent throttled
            options'
                  Identifier: 'throttledRequests'
                EqualsEqualsEqualsToken
                Identifier: ' undefined'
              QuestionToken
              NumericLiteral
              ColonToken
              PropertyAccessExpression
                Identifier: ' options'
                Identifier: 'throttledRequests'
        ExpressionStatement
          BinaryExpression
            PropertyAccessExpression
              ThisKeyword
              Identifier: 'throttleLimit'
            EqualsToken
            BinaryExpression
              PropertyAccessExpression
                Identifier: ' options'
                Identifier: 'throttleLimit'
              BarBarToken
              NumericLiteral
        ExpressionStatement
          BinaryExpression
            PropertyAccessExpression
              ThisKeyword
              Identifier: 'installAction'
            EqualsToken
            ConditionalExpression
              BinaryExpression
                PropertyAccessExpression
                  Identifier: ' options'
                  Identifier: 'installAction'
                ExclamationEqualsEqualsToken
                Identifier: ' undefined'
              QuestionToken
              PropertyAccessExpression
                Identifier: ' options'
                Identifier: 'installAction'
              ColonToken
              TrueKeyword
        ExpressionStatement
          BinaryExpression
            PropertyAccessExpression
              ThisKeyword
              Identifier: 'throttledRequests'
            EqualsToken
            PropertyAccessExpression
              Identifier: ' options'
              Identifier: 'throttledRequests'
    MethodDeclaration
      ProtectedKeyword
      OverrideKeyword
      Identifier: ' createInstallerProcess'
      TypeReference
        QualifiedName
          QualifiedName
            Identifier: ' ts'
            Identifier: 'server'
          Identifier: 'TypingsInstallerWorkerProcess'
      Block
        ReturnStatement
          ObjectLiteralExpression
            PropertyAssignment
              Identifier: '
            send'
              ArrowFunction
                Parameter
                  Identifier: ' req'
                EqualsGreaterThanToken
                CallExpression
                  PropertyAccessExpression
                    ParenthesizedExpression
                      BinaryExpression
                        PropertyAccessExpression
                          ThisKeyword
                          Identifier: 'worker'
                        QuestionQuestionEqualsToken
                        NewExpression
                          Identifier: ' TestTypingsInstallerWorker'
                          ThisKeyword
                    Identifier: 'handleRequest'
                  Identifier: 'req'
    MethodDeclaration
      OverrideKeyword
      Identifier: ' scheduleRequest'
      Parameter
        Identifier: 'request'
        TypeReference
          QualifiedName
            QualifiedName
              Identifier: ' ts'
              Identifier: 'server'
            Identifier: 'DiscoverTypings'
      VoidKeyword
      Block
        IfStatement
          BinaryExpression
            PropertyAccessExpression
              ThisKeyword
              Identifier: 'throttledRequests'
            EqualsEqualsEqualsToken
            Identifier: ' undefined'
          Block
            ExpressionStatement
              PostfixUnaryExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'activeRequestCount'
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'installer'
                  Identifier: 'send'
                Identifier: 'request'
          Block
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  SuperKeyword
                  Identifier: 'scheduleRequest'
                Identifier: 'request'
  FunctionDeclaration
    ExportKeyword
    Identifier: ' createTypesRegistryFileContent'
    Parameter
      Identifier: 'list'
      TypeOperator
        ArrayType
          StringKeyword
    TypeReference
      Identifier: ' TypesRegistryFile'
    Block
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' versionMap'
            ObjectLiteralExpression
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' entries'
            TypeReference
              QualifiedName
                Identifier: ' ts'
                Identifier: 'MapLike'
              TypeReference
                QualifiedName
                  Identifier: 'ts'
                  Identifier: 'MapLike'
                StringKeyword
            ObjectLiteralExpression
      ForOfStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' l'
        Identifier: ' list'
        Block
          ExpressionStatement
            BinaryExpression
              ElementAccessExpression
                Identifier: '
        entries'
                Identifier: 'l'
              EqualsToken
              Identifier: ' versionMap'
      ReturnStatement
        ObjectLiteralExpression
          ShorthandPropertyAssignment
            Identifier: ' entries'
  FunctionDeclaration
    ExportKeyword
    Identifier: ' createTypesRegistry'
    Parameter
      DotDotDotToken
      Identifier: 'list'
      ArrayType
        StringKeyword
    TypeReference
      Identifier: ' Map'
      StringKeyword
      TypeReference
        QualifiedName
          Identifier: ' ts'
          Identifier: 'MapLike'
        StringKeyword
    Block
      ReturnStatement
        NewExpression
          Identifier: ' Map'
          CallExpression
            PropertyAccessExpression
              Identifier: 'Object'
              Identifier: 'entries'
            PropertyAccessExpression
              CallExpression
                Identifier: 'createTypesRegistryFileContent'
                Identifier: 'list'
              Identifier: 'entries'
