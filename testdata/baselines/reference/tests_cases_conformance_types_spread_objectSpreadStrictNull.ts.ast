SourceFile
  FunctionDeclaration
    Identifier: ' f'
    Parameter
      Identifier: '
    definiteBoolean'
      TypeLiteral
        PropertySignature
          Identifier: ' sn'
          BooleanKeyword
    Parameter
      Identifier: '
    definiteString'
      TypeLiteral
        PropertySignature
          Identifier: ' sn'
          StringKeyword
    Parameter
      Identifier: '
    optionalString'
      TypeLiteral
        PropertySignature
          Identifier: ' sn'
          QuestionToken
          StringKeyword
    Parameter
      Identifier: '
    optionalNumber'
      TypeLiteral
        PropertySignature
          Identifier: ' sn'
          QuestionToken
          NumberKeyword
    Parameter
      Identifier: '
    undefinedString'
      TypeLiteral
        PropertySignature
          Identifier: ' sn'
          UnionType
            StringKeyword
            UndefinedKeyword
    Parameter
      Identifier: '
    undefinedNumber'
      TypeLiteral
        PropertySignature
          Identifier: ' sn'
          UnionType
            NumberKeyword
            UndefinedKeyword
    Block
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' optionalUnionStops'
            TypeLiteral
              PropertySignature
                Identifier: ' sn'
                UnionType
                  StringKeyword
                  NumberKeyword
            ObjectLiteralExpression
              SpreadAssignment
                Identifier: 'definiteBoolean'
              SpreadAssignment
                Identifier: 'definiteString'
              SpreadAssignment
                Identifier: 'optionalNumber'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' optionalUnionDuplicates'
            TypeLiteral
              PropertySignature
                Identifier: ' sn'
                UnionType
                  StringKeyword
                  NumberKeyword
            ObjectLiteralExpression
              SpreadAssignment
                Identifier: 'definiteBoolean'
              SpreadAssignment
                Identifier: 'definiteString'
              SpreadAssignment
                Identifier: 'optionalString'
              SpreadAssignment
                Identifier: 'optionalNumber'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' allOptional'
            TypeLiteral
              PropertySignature
                Identifier: ' sn'
                QuestionToken
                UnionType
                  StringKeyword
                  NumberKeyword
            ObjectLiteralExpression
              SpreadAssignment
                Identifier: 'optionalString'
              SpreadAssignment
                Identifier: 'optionalNumber'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' undefinedUnionStops'
            TypeLiteral
              PropertySignature
                Identifier: ' sn'
                UnionType
                  StringKeyword
                  NumberKeyword
            ObjectLiteralExpression
              SpreadAssignment
                Identifier: 'definiteBoolean'
              SpreadAssignment
                Identifier: 'definiteString'
              SpreadAssignment
                Identifier: 'undefinedNumber'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' undefinedUnionDuplicates'
            TypeLiteral
              PropertySignature
                Identifier: ' sn'
                UnionType
                  StringKeyword
                  NumberKeyword
            ObjectLiteralExpression
              SpreadAssignment
                Identifier: 'definiteBoolean'
              SpreadAssignment
                Identifier: 'definiteString'
              SpreadAssignment
                Identifier: 'undefinedString'
              SpreadAssignment
                Identifier: 'undefinedNumber'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' allUndefined'
            TypeLiteral
              PropertySignature
                Identifier: ' sn'
                UnionType
                  StringKeyword
                  NumberKeyword
                  UndefinedKeyword
            ObjectLiteralExpression
              SpreadAssignment
                Identifier: 'undefinedString'
              SpreadAssignment
                Identifier: 'undefinedNumber'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' undefinedWithOptionalContinues'
            TypeLiteral
              PropertySignature
                Identifier: ' sn'
                UnionType
                  StringKeyword
                  NumberKeyword
                  BooleanKeyword
            ObjectLiteralExpression
              SpreadAssignment
                Identifier: 'definiteBoolean'
              SpreadAssignment
                Identifier: 'undefinedString'
              SpreadAssignment
                Identifier: 'optionalNumber'
  TypeAliasDeclaration
    Identifier: ' Movie'
    TypeLiteral
      PropertySignature
        Identifier: '
    title'
        StringKeyword
      PropertySignature
        Identifier: '
    yearReleased'
        NumberKeyword
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' m'
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: ' title'
            StringLiteral
          PropertyAssignment
            Identifier: ' yearReleased'
            NumericLiteral
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' x'
        TypeReference
          Identifier: ' Movie'
        ObjectLiteralExpression
          SpreadAssignment
            Identifier: 'm'
          PropertyAssignment
            Identifier: ' title'
            Identifier: ' undefined'
  InterfaceDeclaration
    Identifier: ' Fields'
    PropertySignature
      Identifier: '
    foo'
      NumberKeyword
    PropertySignature
      Identifier: '
    bar'
      StringKeyword
  InterfaceDeclaration
    Identifier: ' NearlyPartialFields'
    PropertySignature
      Identifier: '
    foo'
      UnionType
        NumberKeyword
        UndefinedKeyword
    PropertySignature
      Identifier: '
    bar'
      UnionType
        StringKeyword
        UndefinedKeyword
  FunctionDeclaration
    Identifier: ' g'
    Parameter
      Identifier: 'fields'
      TypeReference
        Identifier: ' Fields'
    Parameter
      Identifier: ' partialFields'
      TypeReference
        Identifier: ' Partial'
        TypeReference
          Identifier: 'Fields'
    Parameter
      Identifier: ' nearlyPartialFields'
      TypeReference
        Identifier: ' NearlyPartialFields'
    Block
      ExpressionStatement
        BinaryExpression
          Identifier: '
    // ok, undefined is stripped from optional properties when spread
    fields'
          EqualsToken
          ObjectLiteralExpression
            SpreadAssignment
              Identifier: 'fields'
            SpreadAssignment
              Identifier: 'partialFields'
      ExpressionStatement
        BinaryExpression
          Identifier: '
    // error: not optional, undefined remains
    fields'
          EqualsToken
          ObjectLiteralExpression
            SpreadAssignment
              Identifier: 'fields'
            SpreadAssignment
              Identifier: 'nearlyPartialFields'
