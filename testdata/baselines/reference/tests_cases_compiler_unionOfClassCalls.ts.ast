SourceFile
  ClassDeclaration
    DeclareKeyword
    Identifier: ' Test'
    TypeParameter
      Identifier: 'T'
    PropertyDeclaration
      Identifier: '
    obj'
      TypeReference
        Identifier: ' T'
    MethodDeclaration
      Identifier: '
    get'
      TypeParameter
        Identifier: 'K'
        TypeOperator
          TypeReference
            Identifier: ' T'
      Parameter
        Identifier: 'k'
        TypeReference
          Identifier: ' K'
      IndexedAccessType
        TypeReference
          Identifier: ' T'
        TypeReference
          Identifier: 'K'
  InterfaceDeclaration
    Identifier: ' A'
    PropertySignature
      Identifier: ' t'
      LiteralType
        StringLiteral
  InterfaceDeclaration
    Identifier: ' B'
    PropertySignature
      Identifier: ' t'
      LiteralType
        StringLiteral
  VariableStatement
    DeclareKeyword
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' tmp'
        UnionType
          TypeReference
            Identifier: ' Test'
            TypeReference
              Identifier: 'A'
          TypeReference
            Identifier: ' Test'
            TypeReference
              Identifier: 'B'
  SwitchStatement
    CallExpression
      PropertyAccessExpression
        Identifier: 'tmp'
        Identifier: 'get'
      StringLiteral
    CaseBlock
      CaseClause
        StringLiteral
        BreakStatement
      CaseClause
        StringLiteral
        BreakStatement
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' arr'
        UnionType
          ArrayType
            NumberKeyword
          ArrayType
            StringKeyword
        ArrayLiteralExpression
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' arr1'
        ArrayType
          NumberKeyword
        ArrayLiteralExpression
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' arr2'
        ArrayType
          StringKeyword
        ArrayLiteralExpression
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

arr'
        Identifier: 'map'
      ArrowFunction
        Parameter
          Identifier: 'a'
          UnionType
            NumberKeyword
            StringKeyword
        Parameter
          Identifier: ' index'
          NumberKeyword
        EqualsGreaterThanToken
        Block
          ReturnStatement
            Identifier: ' index'
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

// This case still doesn't work because `reduce` has multiple overloads :(
arr'
        Identifier: 'reduce'
      ArrowFunction
        Parameter
          Identifier: 'acc'
          TypeReference
            Identifier: ' Array'
            StringKeyword
        Parameter
          Identifier: ' a'
          UnionType
            NumberKeyword
            StringKeyword
        Parameter
          Identifier: ' index'
          NumberKeyword
        EqualsGreaterThanToken
        Block
          ReturnStatement
            ArrayLiteralExpression
      ArrayLiteralExpression
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

arr'
        Identifier: 'forEach'
      ArrowFunction
        Parameter
          Identifier: 'a'
          UnionType
            NumberKeyword
            StringKeyword
        Parameter
          Identifier: ' index'
          NumberKeyword
        EqualsGreaterThanToken
        Block
          ReturnStatement
            Identifier: ' index'
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

arr1'
        Identifier: 'map'
      ArrowFunction
        Parameter
          Identifier: 'a'
          NumberKeyword
        Parameter
          Identifier: ' index'
          NumberKeyword
        EqualsGreaterThanToken
        Block
          ReturnStatement
            Identifier: ' index'
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

arr1'
        Identifier: 'reduce'
      ArrowFunction
        Parameter
          Identifier: 'acc'
          ArrayType
            NumberKeyword
        Parameter
          Identifier: ' a'
          NumberKeyword
        Parameter
          Identifier: ' index'
          NumberKeyword
        EqualsGreaterThanToken
        Block
          ReturnStatement
            ArrayLiteralExpression
              Identifier: 'a'
      ArrayLiteralExpression
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

arr1'
        Identifier: 'forEach'
      ArrowFunction
        Parameter
          Identifier: 'a'
          NumberKeyword
        Parameter
          Identifier: ' index'
          NumberKeyword
        EqualsGreaterThanToken
        Block
          ReturnStatement
            Identifier: ' index'
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '
arr2'
        Identifier: 'map'
      ArrowFunction
        Parameter
          Identifier: 'a'
          StringKeyword
        Parameter
          Identifier: ' index'
          NumberKeyword
        EqualsGreaterThanToken
        Block
          ReturnStatement
            Identifier: ' index'
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

arr2'
        Identifier: 'reduce'
      ArrowFunction
        Parameter
          Identifier: 'acc'
          ArrayType
            StringKeyword
        Parameter
          Identifier: ' a'
          StringKeyword
        Parameter
          Identifier: ' index'
          NumberKeyword
        EqualsGreaterThanToken
        Block
          ReturnStatement
            ArrayLiteralExpression
      ArrayLiteralExpression
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

arr2'
        Identifier: 'forEach'
      ArrowFunction
        Parameter
          Identifier: 'a'
          StringKeyword
        Parameter
          Identifier: ' index'
          NumberKeyword
        EqualsGreaterThanToken
        Block
          ReturnStatement
            Identifier: ' index'
  ClassDeclaration
    DeclareKeyword
    Identifier: ' Foo'
    MethodDeclaration
      Identifier: '
    doThing'
      TypeReference
        Identifier: ' Promise'
        ThisType
  ClassDeclaration
    DeclareKeyword
    Identifier: ' Bar'
    HeritageClause
      ExpressionWithTypeArguments
        Identifier: ' Foo'
    PropertyDeclaration
      Identifier: '
    bar'
      NumberKeyword
  ClassDeclaration
    DeclareKeyword
    Identifier: ' Baz'
    HeritageClause
      ExpressionWithTypeArguments
        Identifier: ' Foo'
    PropertyDeclaration
      Identifier: '
    baz'
      NumberKeyword
  VariableStatement
    DeclareKeyword
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' a'
        UnionType
          TypeReference
            Identifier: ' Bar'
          TypeReference
            Identifier: ' Baz'
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        CallExpression
          PropertyAccessExpression
            Identifier: '
// note, you must annotate `result` for now
a'
            Identifier: 'doThing'
        Identifier: 'then'
      ArrowFunction
        Parameter
          Identifier: 'result'
          UnionType
            TypeReference
              Identifier: ' Bar'
            TypeReference
              Identifier: ' Baz'
        EqualsGreaterThanToken
        Block
