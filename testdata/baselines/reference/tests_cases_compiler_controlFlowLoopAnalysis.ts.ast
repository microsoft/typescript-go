SourceFile
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' cond'
        BooleanKeyword
  FunctionDeclaration
    Identifier: ' foo'
    Parameter
      Identifier: 'x'
      NumberKeyword
    NumberKeyword
    Block
      ReturnStatement
        NumericLiteral
  FunctionDeclaration
    Identifier: ' test1'
    Block
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' x'
            UnionType
              NumberKeyword
              UndefinedKeyword
      WhileStatement
        Identifier: 'cond'
        Block
          WhileStatement
            Identifier: 'cond'
            Block
              WhileStatement
                Identifier: 'cond'
                Block
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
                x'
                      EqualsToken
                      CallExpression
                        Identifier: ' foo'
                        Identifier: 'x'
          ExpressionStatement
            BinaryExpression
              Identifier: '
        x'
              EqualsToken
              NumericLiteral
  FunctionDeclaration
    Identifier: ' test2'
    Block
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' x'
            UnionType
              NumberKeyword
              UndefinedKeyword
      ExpressionStatement
        BinaryExpression
          Identifier: '
    x'
          EqualsToken
          NumericLiteral
      WhileStatement
        Identifier: 'cond'
        Block
          WhileStatement
            Identifier: 'cond'
            Block
              ExpressionStatement
                BinaryExpression
                  Identifier: '
            x'
                  EqualsToken
                  CallExpression
                    Identifier: ' foo'
                    Identifier: 'x'
  FunctionDeclaration
    Identifier: ' mapUntilCant'
    TypeParameter
      Identifier: 'a'
    TypeParameter
      Identifier: ' b'
    Parameter
      Identifier: '
    values'
      ArrayType
        TypeReference
          Identifier: ' a'
    Parameter
      Identifier: '
    canTake'
      FunctionType
        Parameter
          Identifier: 'value'
          TypeReference
            Identifier: ' a'
        Parameter
          Identifier: ' index'
          NumberKeyword
        BooleanKeyword
    Parameter
      Identifier: '
    mapping'
      FunctionType
        Parameter
          Identifier: 'value'
          TypeReference
            Identifier: ' a'
        Parameter
          Identifier: ' index'
          NumberKeyword
        TypeReference
          Identifier: ' b'
    ArrayType
      TypeReference
        Identifier: ' b'
    Block
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' result'
            ArrayType
              TypeReference
                Identifier: ' b'
            ArrayLiteralExpression
      ForStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' index'
            NumericLiteral
          VariableDeclaration
            Identifier: ' length'
            PropertyAccessExpression
              Identifier: ' values'
              Identifier: 'length'
        BinaryExpression
          Identifier: ' index'
          LessThanToken
          Identifier: ' length'
        PostfixUnaryExpression
          Identifier: ' index'
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' value'
                ElementAccessExpression
                  Identifier: ' values'
                  Identifier: 'index'
          IfStatement
            CallExpression
              Identifier: 'canTake'
              Identifier: 'value'
              Identifier: ' index'
            Block
              ExpressionStatement
                CallExpression
                  PropertyAccessExpression
                    Identifier: '
            result'
                    Identifier: 'push'
                  CallExpression
                    Identifier: 'mapping'
                    Identifier: 'value'
                    Identifier: ' index'
            Block
              ReturnStatement
                Identifier: ' result'
      ReturnStatement
        Identifier: ' result'
