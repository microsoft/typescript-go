SourceFile
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: '
    arrayFrom'
        ImportSpecifier
          Identifier: '
    CompilerOptions'
        ImportSpecifier
          Identifier: '
    createGetCanonicalFileName'
        ImportSpecifier
          Identifier: '
    createLanguageServiceSourceFile'
        ImportSpecifier
          Identifier: '
    CreateSourceFileOptions'
        ImportSpecifier
          Identifier: '
    Debug'
        ImportSpecifier
          Identifier: '
    ensureScriptKind'
        ImportSpecifier
          Identifier: '
    firstDefinedIterator'
        ImportSpecifier
          Identifier: '
    forEachEntry'
        ImportSpecifier
          Identifier: '
    getEmitScriptTarget'
        ImportSpecifier
          Identifier: '
    getImpliedNodeFormatForFile'
        ImportSpecifier
          Identifier: '
    getKeyForCompilerOptions'
        ImportSpecifier
          Identifier: '
    getOrUpdate'
        ImportSpecifier
          Identifier: '
    getSetExternalModuleIndicator'
        ImportSpecifier
          Identifier: '
    getSnapshotText'
        ImportSpecifier
          Identifier: '
    identity'
        ImportSpecifier
          Identifier: '
    IScriptSnapshot'
        ImportSpecifier
          Identifier: '
    isDeclarationFileName'
        ImportSpecifier
          Identifier: '
    JSDocParsingMode'
        ImportSpecifier
          Identifier: '
    MinimalResolutionCacheHost'
        ImportSpecifier
          Identifier: '
    Path'
        ImportSpecifier
          Identifier: '
    ResolutionMode'
        ImportSpecifier
          Identifier: '
    ScriptKind'
        ImportSpecifier
          Identifier: '
    ScriptTarget'
        ImportSpecifier
          Identifier: '
    SourceFile'
        ImportSpecifier
          Identifier: '
    sourceFileAffectingCompilerOptions'
        ImportSpecifier
          Identifier: '
    toPath'
        ImportSpecifier
          Identifier: '
    tracing'
        ImportSpecifier
          Identifier: '
    updateLanguageServiceSourceFile'
    StringLiteral
  InterfaceDeclaration
    ExportKeyword
    Identifier: ' DocumentRegistry'
    MethodSignature
      Identifier: '
    /**
     * Request a stored SourceFile with a given fileName and compilationSettings.
     * The first call to acquire will call createLanguageServiceSourceFile to generate
     * the SourceFile if was not found in the registry.
     *
     * @param fileName The name of the file requested
     * @param compilationSettingsOrHost Some compilation settings like target affects the
     * shape of a the resulting SourceFile. This allows the DocumentRegistry to store
     * multiple copies of the same file for different compilation settings. A minimal
     * resolution cache is needed to fully define a source file's shape when
     * the compilation settings include `module: node16`+, so providing a cache host
     * object should be preferred. A common host is a language service `ConfiguredProject`.
     * @param scriptSnapshot Text of the file. Only used if the file was not found
     * in the registry and a new one was created.
     * @param version Current version of the file. Only used if the file was not found
     * in the registry and a new one was created.
     */
    acquireDocument'
      Parameter
        Identifier: '
        fileName'
        StringKeyword
      Parameter
        Identifier: '
        compilationSettingsOrHost'
        UnionType
          TypeReference
            Identifier: ' CompilerOptions'
          TypeReference
            Identifier: ' MinimalResolutionCacheHost'
      Parameter
        Identifier: '
        scriptSnapshot'
        TypeReference
          Identifier: ' IScriptSnapshot'
      Parameter
        Identifier: '
        version'
        StringKeyword
      Parameter
        Identifier: '
        scriptKind'
        QuestionToken
        TypeReference
          Identifier: ' ScriptKind'
      Parameter
        Identifier: '
        sourceFileOptions'
        QuestionToken
        UnionType
          TypeReference
            Identifier: ' CreateSourceFileOptions'
          TypeReference
            Identifier: ' ScriptTarget'
      TypeReference
        Identifier: ' SourceFile'
    MethodSignature
      Identifier: '

    acquireDocumentWithKey'
      Parameter
        Identifier: '
        fileName'
        StringKeyword
      Parameter
        Identifier: '
        path'
        TypeReference
          Identifier: ' Path'
      Parameter
        Identifier: '
        compilationSettingsOrHost'
        UnionType
          TypeReference
            Identifier: ' CompilerOptions'
          TypeReference
            Identifier: ' MinimalResolutionCacheHost'
      Parameter
        Identifier: '
        key'
        TypeReference
          Identifier: ' DocumentRegistryBucketKey'
      Parameter
        Identifier: '
        scriptSnapshot'
        TypeReference
          Identifier: ' IScriptSnapshot'
      Parameter
        Identifier: '
        version'
        StringKeyword
      Parameter
        Identifier: '
        scriptKind'
        QuestionToken
        TypeReference
          Identifier: ' ScriptKind'
      Parameter
        Identifier: '
        sourceFileOptions'
        QuestionToken
        UnionType
          TypeReference
            Identifier: ' CreateSourceFileOptions'
          TypeReference
            Identifier: ' ScriptTarget'
      TypeReference
        Identifier: ' SourceFile'
    MethodSignature
      Identifier: '

    /**
     * Request an updated version of an already existing SourceFile with a given fileName
     * and compilationSettings. The update will in-turn call updateLanguageServiceSourceFile
     * to get an updated SourceFile.
     *
     * @param fileName The name of the file requested
     * @param compilationSettingsOrHost Some compilation settings like target affects the
     * shape of a the resulting SourceFile. This allows the DocumentRegistry to store
     * multiple copies of the same file for different compilation settings. A minimal
     * resolution cache is needed to fully define a source file's shape when
     * the compilation settings include `module: node16`+, so providing a cache host
     * object should be preferred. A common host is a language service `ConfiguredProject`.
     * @param scriptSnapshot Text of the file.
     * @param version Current version of the file.
     */
    updateDocument'
      Parameter
        Identifier: '
        fileName'
        StringKeyword
      Parameter
        Identifier: '
        compilationSettingsOrHost'
        UnionType
          TypeReference
            Identifier: ' CompilerOptions'
          TypeReference
            Identifier: ' MinimalResolutionCacheHost'
      Parameter
        Identifier: '
        scriptSnapshot'
        TypeReference
          Identifier: ' IScriptSnapshot'
      Parameter
        Identifier: '
        version'
        StringKeyword
      Parameter
        Identifier: '
        scriptKind'
        QuestionToken
        TypeReference
          Identifier: ' ScriptKind'
      Parameter
        Identifier: '
        sourceFileOptions'
        QuestionToken
        UnionType
          TypeReference
            Identifier: ' CreateSourceFileOptions'
          TypeReference
            Identifier: ' ScriptTarget'
      TypeReference
        Identifier: ' SourceFile'
    MethodSignature
      Identifier: '

    updateDocumentWithKey'
      Parameter
        Identifier: '
        fileName'
        StringKeyword
      Parameter
        Identifier: '
        path'
        TypeReference
          Identifier: ' Path'
      Parameter
        Identifier: '
        compilationSettingsOrHost'
        UnionType
          TypeReference
            Identifier: ' CompilerOptions'
          TypeReference
            Identifier: ' MinimalResolutionCacheHost'
      Parameter
        Identifier: '
        key'
        TypeReference
          Identifier: ' DocumentRegistryBucketKey'
      Parameter
        Identifier: '
        scriptSnapshot'
        TypeReference
          Identifier: ' IScriptSnapshot'
      Parameter
        Identifier: '
        version'
        StringKeyword
      Parameter
        Identifier: '
        scriptKind'
        QuestionToken
        TypeReference
          Identifier: ' ScriptKind'
      Parameter
        Identifier: '
        sourceFileOptions'
        QuestionToken
        UnionType
          TypeReference
            Identifier: ' CreateSourceFileOptions'
          TypeReference
            Identifier: ' ScriptTarget'
      TypeReference
        Identifier: ' SourceFile'
    MethodSignature
      Identifier: '

    getKeyForCompilationSettings'
      Parameter
        Identifier: 'settings'
        TypeReference
          Identifier: ' CompilerOptions'
      TypeReference
        Identifier: ' DocumentRegistryBucketKey'
    MethodSignature
      Identifier: '
    /** @internal */
    getDocumentRegistryBucketKeyWithMode'
      Parameter
        Identifier: 'key'
        TypeReference
          Identifier: ' DocumentRegistryBucketKey'
      Parameter
        Identifier: ' mode'
        TypeReference
          Identifier: ' ResolutionMode'
      TypeReference
        Identifier: ' DocumentRegistryBucketKeyWithMode'
    MethodSignature
      Identifier: '
    /**
     * Informs the DocumentRegistry that a file is not needed any longer.
     *
     * Note: It is not allowed to call release on a SourceFile that was not acquired from
     * this registry originally.
     *
     * @param fileName The name of the file to be released
     * @param compilationSettings The compilation settings used to acquire the file
     * @param scriptKind The script kind of the file to be released
     *
     * @deprecated pass scriptKind and impliedNodeFormat for correctness
     */
    releaseDocument'
      Parameter
        Identifier: 'fileName'
        StringKeyword
      Parameter
        Identifier: ' compilationSettings'
        TypeReference
          Identifier: ' CompilerOptions'
      Parameter
        Identifier: ' scriptKind'
        QuestionToken
        TypeReference
          Identifier: ' ScriptKind'
      VoidKeyword
    MethodSignature
      Identifier: '
    /**
     * Informs the DocumentRegistry that a file is not needed any longer.
     *
     * Note: It is not allowed to call release on a SourceFile that was not acquired from
     * this registry originally.
     *
     * @param fileName The name of the file to be released
     * @param compilationSettings The compilation settings used to acquire the file
     * @param scriptKind The script kind of the file to be released
     * @param impliedNodeFormat The implied source file format of the file to be released
     */
    releaseDocument'
      Parameter
        Identifier: 'fileName'
        StringKeyword
      Parameter
        Identifier: ' compilationSettings'
        TypeReference
          Identifier: ' CompilerOptions'
      Parameter
        Identifier: ' scriptKind'
        TypeReference
          Identifier: ' ScriptKind'
      Parameter
        Identifier: ' impliedNodeFormat'
        TypeReference
          Identifier: ' ResolutionMode'
      VoidKeyword
    MethodSignature
      Identifier: ' // eslint-disable-line @typescript-eslint/unified-signatures
    /**
     * @deprecated pass scriptKind for and impliedNodeFormat correctness */
    releaseDocumentWithKey'
      Parameter
        Identifier: 'path'
        TypeReference
          Identifier: ' Path'
      Parameter
        Identifier: ' key'
        TypeReference
          Identifier: ' DocumentRegistryBucketKey'
      Parameter
        Identifier: ' scriptKind'
        QuestionToken
        TypeReference
          Identifier: ' ScriptKind'
      VoidKeyword
    MethodSignature
      Identifier: '
    releaseDocumentWithKey'
      Parameter
        Identifier: 'path'
        TypeReference
          Identifier: ' Path'
      Parameter
        Identifier: ' key'
        TypeReference
          Identifier: ' DocumentRegistryBucketKey'
      Parameter
        Identifier: ' scriptKind'
        TypeReference
          Identifier: ' ScriptKind'
      Parameter
        Identifier: ' impliedNodeFormat'
        TypeReference
          Identifier: ' ResolutionMode'
      VoidKeyword
    MethodSignature
      Identifier: ' // eslint-disable-line @typescript-eslint/unified-signatures

    reportStats'
      StringKeyword
    MethodSignature
      Identifier: '
    /** @internal */ getBuckets'
      TypeReference
        Identifier: ' Map'
        TypeReference
          Identifier: 'DocumentRegistryBucketKeyWithMode'
        TypeReference
          Identifier: ' Map'
          TypeReference
            Identifier: 'Path'
          TypeReference
            Identifier: ' BucketEntry'
  InterfaceDeclaration
    ExportKeyword
    Identifier: ' ExternalDocumentCache'
    MethodSignature
      Identifier: '
    setDocument'
      Parameter
        Identifier: 'key'
        TypeReference
          Identifier: ' DocumentRegistryBucketKeyWithMode'
      Parameter
        Identifier: ' path'
        TypeReference
          Identifier: ' Path'
      Parameter
        Identifier: ' sourceFile'
        TypeReference
          Identifier: ' SourceFile'
      VoidKeyword
    MethodSignature
      Identifier: '
    getDocument'
      Parameter
        Identifier: 'key'
        TypeReference
          Identifier: ' DocumentRegistryBucketKeyWithMode'
      Parameter
        Identifier: ' path'
        TypeReference
          Identifier: ' Path'
      UnionType
        TypeReference
          Identifier: ' SourceFile'
        UndefinedKeyword
  TypeAliasDeclaration
    ExportKeyword
    Identifier: ' DocumentRegistryBucketKey'
    IntersectionType
      StringKeyword
      TypeLiteral
        PropertySignature
          Identifier: ' __bucketKey'
          AnyKeyword
  InterfaceDeclaration
    ExportKeyword
    Identifier: ' DocumentRegistryEntry'
    PropertySignature
      Identifier: '
    sourceFile'
      TypeReference
        Identifier: ' SourceFile'
    PropertySignature
      Identifier: '

    // The number of language services that this source file is referenced in.   When no more
    // language services are referencing the file, then the file can be removed from the
    // registry.
    languageServiceRefCount'
      NumberKeyword
  TypeAliasDeclaration
    ExportKeyword
    Identifier: ' BucketEntry'
    UnionType
      TypeReference
        Identifier: ' DocumentRegistryEntry'
      TypeReference
        Identifier: ' Map'
        TypeReference
          Identifier: 'ScriptKind'
        TypeReference
          Identifier: ' DocumentRegistryEntry'
  FunctionDeclaration
    ExportKeyword
    Identifier: ' isDocumentRegistryEntry'
    Parameter
      Identifier: 'entry'
      TypeReference
        Identifier: ' BucketEntry'
    TypePredicate
      Identifier: ' entry'
      TypeReference
        Identifier: ' DocumentRegistryEntry'
    Block
      ReturnStatement
        PrefixUnaryExpression
          PrefixUnaryExpression
            PropertyAccessExpression
              ParenthesizedExpression
                AsExpression
                  Identifier: 'entry'
                  TypeReference
                    Identifier: ' DocumentRegistryEntry'
              Identifier: 'sourceFile'
  FunctionDeclaration
    ExportKeyword
    Identifier: ' createDocumentRegistry'
    Parameter
      Identifier: 'useCaseSensitiveFileNames'
      QuestionToken
      BooleanKeyword
    Parameter
      Identifier: ' currentDirectory'
      QuestionToken
      StringKeyword
    Parameter
      Identifier: ' jsDocParsingMode'
      QuestionToken
      TypeReference
        Identifier: ' JSDocParsingMode'
    TypeReference
      Identifier: ' DocumentRegistry'
    Block
      ReturnStatement
        CallExpression
          Identifier: ' createDocumentRegistryInternal'
          Identifier: 'useCaseSensitiveFileNames'
          Identifier: ' currentDirectory'
          Identifier: ' jsDocParsingMode'
  TypeAliasDeclaration
    ExportKeyword
    Identifier: ' DocumentRegistryBucketKeyWithMode'
    IntersectionType
      StringKeyword
      TypeLiteral
        PropertySignature
          Identifier: ' __documentRegistryBucketKeyWithMode'
          AnyKeyword
  FunctionDeclaration
    ExportKeyword
    Identifier: ' createDocumentRegistryInternal'
    Parameter
      Identifier: 'useCaseSensitiveFileNames'
      QuestionToken
      BooleanKeyword
    Parameter
      Identifier: ' currentDirectory'
      StringLiteral
    Parameter
      Identifier: ' jsDocParsingMode'
      QuestionToken
      TypeReference
        Identifier: ' JSDocParsingMode'
    Parameter
      Identifier: ' externalCache'
      QuestionToken
      TypeReference
        Identifier: ' ExternalDocumentCache'
    TypeReference
      Identifier: ' DocumentRegistry'
    Block
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' buckets'
            NewExpression
              Identifier: ' Map'
              TypeReference
                Identifier: 'DocumentRegistryBucketKeyWithMode'
              TypeReference
                Identifier: ' Map'
                TypeReference
                  Identifier: 'Path'
                TypeReference
                  Identifier: ' BucketEntry'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' getCanonicalFileName'
            CallExpression
              Identifier: ' createGetCanonicalFileName'
              PrefixUnaryExpression
                PrefixUnaryExpression
                  Identifier: 'useCaseSensitiveFileNames'
      FunctionDeclaration
        Identifier: ' reportStats'
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' bucketInfoArray'
                CallExpression
                  PropertyAccessExpression
                    CallExpression
                      PropertyAccessExpression
                        CallExpression
                          Identifier: ' arrayFrom'
                          CallExpression
                            PropertyAccessExpression
                              Identifier: 'buckets'
                              Identifier: 'keys'
                        Identifier: 'filter'
                      ArrowFunction
                        Parameter
                          Identifier: 'name'
                        EqualsGreaterThanToken
                        BinaryExpression
                          Identifier: ' name'
                          AmpersandAmpersandToken
                          BinaryExpression
                            CallExpression
                              PropertyAccessExpression
                                Identifier: ' name'
                                Identifier: 'charAt'
                              NumericLiteral
                            EqualsEqualsEqualsToken
                            StringLiteral
                    Identifier: 'map'
                  ArrowFunction
                    Parameter
                      Identifier: 'name'
                    EqualsGreaterThanToken
                    Block
                      VariableStatement
                        VariableDeclarationList
                          VariableDeclaration
                            Identifier: ' entries'
                            NonNullExpression
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: ' buckets'
                                  Identifier: 'get'
                                Identifier: 'name'
                      VariableStatement
                        VariableDeclarationList
                          VariableDeclaration
                            Identifier: ' sourceFiles'
                            ArrayType
                              TypeLiteral
                                PropertySignature
                                  Identifier: ' name'
                                  StringKeyword
                                PropertySignature
                                  Identifier: ' scriptKind'
                                  TypeReference
                                    Identifier: ' ScriptKind'
                                PropertySignature
                                  Identifier: ' refCount'
                                  NumberKeyword
                            ArrayLiteralExpression
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
            entries'
                            Identifier: 'forEach'
                          ArrowFunction
                            Parameter
                              Identifier: 'entry'
                            Parameter
                              Identifier: ' name'
                            EqualsGreaterThanToken
                            Block
                              IfStatement
                                CallExpression
                                  Identifier: 'isDocumentRegistryEntry'
                                  Identifier: 'entry'
                                Block
                                  ExpressionStatement
                                    CallExpression
                                      PropertyAccessExpression
                                        Identifier: '
                    sourceFiles'
                                        Identifier: 'push'
                                      ObjectLiteralExpression
                                        ShorthandPropertyAssignment
                                          Identifier: '
                        name'
                                        PropertyAssignment
                                          Identifier: '
                        scriptKind'
                                          PropertyAccessExpression
                                            PropertyAccessExpression
                                              Identifier: ' entry'
                                              Identifier: 'sourceFile'
                                            Identifier: 'scriptKind'
                                        PropertyAssignment
                                          Identifier: '
                        refCount'
                                          PropertyAccessExpression
                                            Identifier: ' entry'
                                            Identifier: 'languageServiceRefCount'
                                Block
                                  ExpressionStatement
                                    CallExpression
                                      PropertyAccessExpression
                                        Identifier: '
                    entry'
                                        Identifier: 'forEach'
                                      ArrowFunction
                                        Parameter
                                          Identifier: 'value'
                                        Parameter
                                          Identifier: ' scriptKind'
                                        EqualsGreaterThanToken
                                        CallExpression
                                          PropertyAccessExpression
                                            Identifier: ' sourceFiles'
                                            Identifier: 'push'
                                          ObjectLiteralExpression
                                            ShorthandPropertyAssignment
                                              Identifier: ' name'
                                            ShorthandPropertyAssignment
                                              Identifier: ' scriptKind'
                                            PropertyAssignment
                                              Identifier: ' refCount'
                                              PropertyAccessExpression
                                                Identifier: ' value'
                                                Identifier: 'languageServiceRefCount'
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
            sourceFiles'
                            Identifier: 'sort'
                          ArrowFunction
                            Parameter
                              Identifier: 'x'
                            Parameter
                              Identifier: ' y'
                            EqualsGreaterThanToken
                            BinaryExpression
                              PropertyAccessExpression
                                Identifier: ' y'
                                Identifier: 'refCount'
                              MinusToken
                              PropertyAccessExpression
                                Identifier: ' x'
                                Identifier: 'refCount'
                      ReturnStatement
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: '
                bucket'
                            Identifier: ' name'
                          ShorthandPropertyAssignment
                            Identifier: '
                sourceFiles'
          ReturnStatement
            CallExpression
              PropertyAccessExpression
                Identifier: ' JSON'
                Identifier: 'stringify'
              Identifier: 'bucketInfoArray'
              Identifier: ' undefined'
              NumericLiteral
      FunctionDeclaration
        Identifier: ' getCompilationSettings'
        Parameter
          Identifier: 'settingsOrHost'
          UnionType
            TypeReference
              Identifier: ' CompilerOptions'
            TypeReference
              Identifier: ' MinimalResolutionCacheHost'
        Block
          IfStatement
            BinaryExpression
              TypeOfExpression
                PropertyAccessExpression
                  Identifier: ' settingsOrHost'
                  Identifier: 'getCompilationSettings'
              EqualsEqualsEqualsToken
              StringLiteral
            Block
              ReturnStatement
                CallExpression
                  PropertyAccessExpression
                    ParenthesizedExpression
                      AsExpression
                        Identifier: 'settingsOrHost'
                        TypeReference
                          Identifier: ' MinimalResolutionCacheHost'
                    Identifier: 'getCompilationSettings'
          ReturnStatement
            AsExpression
              Identifier: ' settingsOrHost'
              TypeReference
                Identifier: ' CompilerOptions'
      FunctionDeclaration
        Identifier: ' acquireDocument'
        Parameter
          Identifier: 'fileName'
          StringKeyword
        Parameter
          Identifier: ' compilationSettings'
          UnionType
            TypeReference
              Identifier: ' CompilerOptions'
            TypeReference
              Identifier: ' MinimalResolutionCacheHost'
        Parameter
          Identifier: ' scriptSnapshot'
          TypeReference
            Identifier: ' IScriptSnapshot'
        Parameter
          Identifier: ' version'
          StringKeyword
        Parameter
          Identifier: ' scriptKind'
          QuestionToken
          TypeReference
            Identifier: ' ScriptKind'
        Parameter
          Identifier: ' languageVersionOrOptions'
          QuestionToken
          UnionType
            TypeReference
              Identifier: ' CreateSourceFileOptions'
            TypeReference
              Identifier: ' ScriptTarget'
        TypeReference
          Identifier: ' SourceFile'
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' path'
                CallExpression
                  Identifier: ' toPath'
                  Identifier: 'fileName'
                  Identifier: ' currentDirectory'
                  Identifier: ' getCanonicalFileName'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' key'
                CallExpression
                  Identifier: ' getKeyForCompilationSettings'
                  CallExpression
                    Identifier: 'getCompilationSettings'
                    Identifier: 'compilationSettings'
          ReturnStatement
            CallExpression
              Identifier: ' acquireDocumentWithKey'
              Identifier: 'fileName'
              Identifier: ' path'
              Identifier: ' compilationSettings'
              Identifier: ' key'
              Identifier: ' scriptSnapshot'
              Identifier: ' version'
              Identifier: ' scriptKind'
              Identifier: ' languageVersionOrOptions'
      FunctionDeclaration
        Identifier: ' acquireDocumentWithKey'
        Parameter
          Identifier: 'fileName'
          StringKeyword
        Parameter
          Identifier: ' path'
          TypeReference
            Identifier: ' Path'
        Parameter
          Identifier: ' compilationSettings'
          UnionType
            TypeReference
              Identifier: ' CompilerOptions'
            TypeReference
              Identifier: ' MinimalResolutionCacheHost'
        Parameter
          Identifier: ' key'
          TypeReference
            Identifier: ' DocumentRegistryBucketKey'
        Parameter
          Identifier: ' scriptSnapshot'
          TypeReference
            Identifier: ' IScriptSnapshot'
        Parameter
          Identifier: ' version'
          StringKeyword
        Parameter
          Identifier: ' scriptKind'
          QuestionToken
          TypeReference
            Identifier: ' ScriptKind'
        Parameter
          Identifier: ' languageVersionOrOptions'
          QuestionToken
          UnionType
            TypeReference
              Identifier: ' CreateSourceFileOptions'
            TypeReference
              Identifier: ' ScriptTarget'
        TypeReference
          Identifier: ' SourceFile'
        Block
          ReturnStatement
            CallExpression
              Identifier: ' acquireOrUpdateDocument'
              Identifier: 'fileName'
              Identifier: ' path'
              Identifier: ' compilationSettings'
              Identifier: ' key'
              Identifier: ' scriptSnapshot'
              Identifier: ' version'
              TrueKeyword
              Identifier: ' scriptKind'
              Identifier: ' languageVersionOrOptions'
      FunctionDeclaration
        Identifier: ' updateDocument'
        Parameter
          Identifier: 'fileName'
          StringKeyword
        Parameter
          Identifier: ' compilationSettings'
          UnionType
            TypeReference
              Identifier: ' CompilerOptions'
            TypeReference
              Identifier: ' MinimalResolutionCacheHost'
        Parameter
          Identifier: ' scriptSnapshot'
          TypeReference
            Identifier: ' IScriptSnapshot'
        Parameter
          Identifier: ' version'
          StringKeyword
        Parameter
          Identifier: ' scriptKind'
          QuestionToken
          TypeReference
            Identifier: ' ScriptKind'
        Parameter
          Identifier: ' languageVersionOrOptions'
          QuestionToken
          UnionType
            TypeReference
              Identifier: ' CreateSourceFileOptions'
            TypeReference
              Identifier: ' ScriptTarget'
        TypeReference
          Identifier: ' SourceFile'
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' path'
                CallExpression
                  Identifier: ' toPath'
                  Identifier: 'fileName'
                  Identifier: ' currentDirectory'
                  Identifier: ' getCanonicalFileName'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' key'
                CallExpression
                  Identifier: ' getKeyForCompilationSettings'
                  CallExpression
                    Identifier: 'getCompilationSettings'
                    Identifier: 'compilationSettings'
          ReturnStatement
            CallExpression
              Identifier: ' updateDocumentWithKey'
              Identifier: 'fileName'
              Identifier: ' path'
              Identifier: ' compilationSettings'
              Identifier: ' key'
              Identifier: ' scriptSnapshot'
              Identifier: ' version'
              Identifier: ' scriptKind'
              Identifier: ' languageVersionOrOptions'
      FunctionDeclaration
        Identifier: ' updateDocumentWithKey'
        Parameter
          Identifier: 'fileName'
          StringKeyword
        Parameter
          Identifier: ' path'
          TypeReference
            Identifier: ' Path'
        Parameter
          Identifier: ' compilationSettings'
          UnionType
            TypeReference
              Identifier: ' CompilerOptions'
            TypeReference
              Identifier: ' MinimalResolutionCacheHost'
        Parameter
          Identifier: ' key'
          TypeReference
            Identifier: ' DocumentRegistryBucketKey'
        Parameter
          Identifier: ' scriptSnapshot'
          TypeReference
            Identifier: ' IScriptSnapshot'
        Parameter
          Identifier: ' version'
          StringKeyword
        Parameter
          Identifier: ' scriptKind'
          QuestionToken
          TypeReference
            Identifier: ' ScriptKind'
        Parameter
          Identifier: ' languageVersionOrOptions'
          QuestionToken
          UnionType
            TypeReference
              Identifier: ' CreateSourceFileOptions'
            TypeReference
              Identifier: ' ScriptTarget'
        TypeReference
          Identifier: ' SourceFile'
        Block
          ReturnStatement
            CallExpression
              Identifier: ' acquireOrUpdateDocument'
              Identifier: 'fileName'
              Identifier: ' path'
              CallExpression
                Identifier: ' getCompilationSettings'
                Identifier: 'compilationSettings'
              Identifier: ' key'
              Identifier: ' scriptSnapshot'
              Identifier: ' version'
              FalseKeyword
              Identifier: ' scriptKind'
              Identifier: ' languageVersionOrOptions'
      FunctionDeclaration
        Identifier: ' getDocumentRegistryEntry'
        Parameter
          Identifier: 'bucketEntry'
          TypeReference
            Identifier: ' BucketEntry'
        Parameter
          Identifier: ' scriptKind'
          UnionType
            TypeReference
              Identifier: ' ScriptKind'
            UndefinedKeyword
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' entry'
                ConditionalExpression
                  CallExpression
                    Identifier: ' isDocumentRegistryEntry'
                    Identifier: 'bucketEntry'
                  QuestionToken
                  Identifier: ' bucketEntry'
                  ColonToken
                  CallExpression
                    PropertyAccessExpression
                      Identifier: ' bucketEntry'
                      Identifier: 'get'
                    CallExpression
                      PropertyAccessExpression
                        Identifier: 'Debug'
                        Identifier: 'checkDefined'
                      Identifier: 'scriptKind'
                      StringLiteral
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '
        Debug'
                Identifier: 'assert'
              BinaryExpression
                BinaryExpression
                  BinaryExpression
                    Identifier: 'scriptKind'
                    EqualsEqualsEqualsToken
                    Identifier: ' undefined'
                  BarBarToken
                  PrefixUnaryExpression
                    Identifier: 'entry'
                BarBarToken
                BinaryExpression
                  PropertyAccessExpression
                    PropertyAccessExpression
                      Identifier: ' entry'
                      Identifier: 'sourceFile'
                    Identifier: 'scriptKind'
                  EqualsEqualsEqualsToken
                  Identifier: ' scriptKind'
              TemplateExpression
                TemplateHead
                TemplateSpan
                  Identifier: 'scriptKind'
                  TemplateMiddle
                TemplateSpan
                  PropertyAccessExpression
                    PropertyAccessExpression
                      Identifier: 'entry'
                      QuestionDotToken
                      Identifier: 'sourceFile'
                    Identifier: 'scriptKind'
                  TemplateMiddle
                TemplateSpan
                  PrefixUnaryExpression
                    Identifier: 'entry'
                  TemplateTail
          ReturnStatement
            Identifier: ' entry'
      FunctionDeclaration
        Identifier: ' acquireOrUpdateDocument'
        Parameter
          Identifier: '
        fileName'
          StringKeyword
        Parameter
          Identifier: '
        path'
          TypeReference
            Identifier: ' Path'
        Parameter
          Identifier: '
        compilationSettingsOrHost'
          UnionType
            TypeReference
              Identifier: ' CompilerOptions'
            TypeReference
              Identifier: ' MinimalResolutionCacheHost'
        Parameter
          Identifier: '
        key'
          TypeReference
            Identifier: ' DocumentRegistryBucketKey'
        Parameter
          Identifier: '
        scriptSnapshot'
          TypeReference
            Identifier: ' IScriptSnapshot'
        Parameter
          Identifier: '
        version'
          StringKeyword
        Parameter
          Identifier: '
        acquiring'
          BooleanKeyword
        Parameter
          Identifier: '
        scriptKind'
          UnionType
            TypeReference
              Identifier: ' ScriptKind'
            UndefinedKeyword
        Parameter
          Identifier: '
        languageVersionOrOptions'
          UnionType
            TypeReference
              Identifier: ' CreateSourceFileOptions'
            TypeReference
              Identifier: ' ScriptTarget'
            UndefinedKeyword
        TypeReference
          Identifier: ' SourceFile'
        Block
          ExpressionStatement
            BinaryExpression
              Identifier: '
        scriptKind'
              EqualsToken
              CallExpression
                Identifier: ' ensureScriptKind'
                Identifier: 'fileName'
                Identifier: ' scriptKind'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' compilationSettings'
                CallExpression
                  Identifier: ' getCompilationSettings'
                  Identifier: 'compilationSettingsOrHost'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' host'
                UnionType
                  TypeReference
                    Identifier: ' MinimalResolutionCacheHost'
                  UndefinedKeyword
                ConditionalExpression
                  BinaryExpression
                    Identifier: ' compilationSettingsOrHost'
                    EqualsEqualsEqualsToken
                    Identifier: ' compilationSettings'
                  QuestionToken
                  Identifier: ' undefined'
                  ColonToken
                  AsExpression
                    Identifier: ' compilationSettingsOrHost'
                    TypeReference
                      Identifier: ' MinimalResolutionCacheHost'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' scriptTarget'
                ConditionalExpression
                  BinaryExpression
                    Identifier: ' scriptKind'
                    EqualsEqualsEqualsToken
                    PropertyAccessExpression
                      Identifier: ' ScriptKind'
                      Identifier: 'JSON'
                  QuestionToken
                  PropertyAccessExpression
                    Identifier: ' ScriptTarget'
                    Identifier: 'JSON'
                  ColonToken
                  CallExpression
                    Identifier: ' getEmitScriptTarget'
                    Identifier: 'compilationSettings'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' sourceFileOptions'
                TypeReference
                  Identifier: ' CreateSourceFileOptions'
                ConditionalExpression
                  BinaryExpression
                    TypeOfExpression
                      Identifier: ' languageVersionOrOptions'
                    EqualsEqualsEqualsToken
                    StringLiteral
                  QuestionToken
                  Identifier: '
            languageVersionOrOptions'
                  ColonToken
                  ObjectLiteralExpression
                    PropertyAssignment
                      Identifier: '
                languageVersion'
                      Identifier: ' scriptTarget'
                    PropertyAssignment
                      Identifier: '
                impliedNodeFormat'
                      BinaryExpression
                        Identifier: ' host'
                        AmpersandAmpersandToken
                        CallExpression
                          Identifier: ' getImpliedNodeFormatForFile'
                          Identifier: 'path'
                          CallExpression
                            PropertyAccessExpression
                              CallExpression
                                PropertyAccessExpression
                                  CallExpression
                                    PropertyAccessExpression
                                      Identifier: ' host'
                                      Identifier: 'getCompilerHost'
                                    QuestionDotToken
                                  QuestionDotToken
                                  Identifier: 'getModuleResolutionCache'
                                QuestionDotToken
                              QuestionDotToken
                              Identifier: 'getPackageJsonInfoCache'
                          Identifier: ' host'
                          Identifier: ' compilationSettings'
                    PropertyAssignment
                      Identifier: '
                setExternalModuleIndicator'
                      CallExpression
                        Identifier: ' getSetExternalModuleIndicator'
                        Identifier: 'compilationSettings'
                    ShorthandPropertyAssignment
                      Identifier: '
                jsDocParsingMode'
          ExpressionStatement
            BinaryExpression
              PropertyAccessExpression
                Identifier: '
        sourceFileOptions'
                Identifier: 'languageVersion'
              EqualsToken
              Identifier: ' scriptTarget'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '
        Debug'
                Identifier: 'assertEqual'
              Identifier: 'jsDocParsingMode'
              PropertyAccessExpression
                Identifier: ' sourceFileOptions'
                Identifier: 'jsDocParsingMode'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' oldBucketCount'
                PropertyAccessExpression
                  Identifier: ' buckets'
                  Identifier: 'size'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' keyWithMode'
                CallExpression
                  Identifier: ' getDocumentRegistryBucketKeyWithMode'
                  Identifier: 'key'
                  PropertyAccessExpression
                    Identifier: ' sourceFileOptions'
                    Identifier: 'impliedNodeFormat'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' bucket'
                CallExpression
                  Identifier: ' getOrUpdate'
                  Identifier: 'buckets'
                  Identifier: ' keyWithMode'
                  ArrowFunction
                    EqualsGreaterThanToken
                    NewExpression
                      Identifier: ' Map'
          IfStatement
            Identifier: 'tracing'
            Block
              IfStatement
                BinaryExpression
                  PropertyAccessExpression
                    Identifier: 'buckets'
                    Identifier: 'size'
                  GreaterThanToken
                  Identifier: ' oldBucketCount'
                Block
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                // It is interesting, but not definitively problematic if a build requires multiple document registry buckets -
                // perhaps they are for two projects that don't have any overlap.
                // Bonus: these events can help us interpret the more interesting event below.
                tracing'
                        Identifier: 'instant'
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: 'tracing'
                          Identifier: 'Phase'
                        Identifier: 'Session'
                      StringLiteral
                      ObjectLiteralExpression
                        PropertyAssignment
                          Identifier: ' configFilePath'
                          PropertyAccessExpression
                            Identifier: ' compilationSettings'
                            Identifier: 'configFilePath'
                        PropertyAssignment
                          Identifier: ' key'
                          Identifier: ' keyWithMode'
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' otherBucketKey'
                    BinaryExpression
                      PrefixUnaryExpression
                        CallExpression
                          Identifier: 'isDeclarationFileName'
                          Identifier: 'path'
                      AmpersandAmpersandToken
                      CallExpression
                        Identifier: '
                forEachEntry'
                        Identifier: 'buckets'
                        ArrowFunction
                          Parameter
                            Identifier: 'bucket'
                          Parameter
                            Identifier: ' bucketKey'
                          EqualsGreaterThanToken
                          BinaryExpression
                            BinaryExpression
                              BinaryExpression
                                Identifier: ' bucketKey'
                                ExclamationEqualsEqualsToken
                                Identifier: ' keyWithMode'
                              AmpersandAmpersandToken
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: ' bucket'
                                  Identifier: 'has'
                                Identifier: 'path'
                            AmpersandAmpersandToken
                            Identifier: ' bucketKey'
              IfStatement
                Identifier: 'otherBucketKey'
                Block
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                tracing'
                        Identifier: 'instant'
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: 'tracing'
                          Identifier: 'Phase'
                        Identifier: 'Session'
                      StringLiteral
                      ObjectLiteralExpression
                        ShorthandPropertyAssignment
                          Identifier: ' path'
                        PropertyAssignment
                          Identifier: ' key1'
                          Identifier: ' otherBucketKey'
                        PropertyAssignment
                          Identifier: ' key2'
                          Identifier: ' keyWithMode'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' bucketEntry'
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' bucket'
                    Identifier: 'get'
                  Identifier: 'path'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' entry'
                BinaryExpression
                  Identifier: ' bucketEntry'
                  AmpersandAmpersandToken
                  CallExpression
                    Identifier: ' getDocumentRegistryEntry'
                    Identifier: 'bucketEntry'
                    Identifier: ' scriptKind'
          IfStatement
            BinaryExpression
              PrefixUnaryExpression
                Identifier: 'entry'
              AmpersandAmpersandToken
              Identifier: ' externalCache'
            Block
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' sourceFile'
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' externalCache'
                        Identifier: 'getDocument'
                      Identifier: 'keyWithMode'
                      Identifier: ' path'
              IfStatement
                BinaryExpression
                  BinaryExpression
                    Identifier: 'sourceFile'
                    AmpersandAmpersandToken
                    BinaryExpression
                      PropertyAccessExpression
                        Identifier: ' sourceFile'
                        Identifier: 'scriptKind'
                      EqualsEqualsEqualsToken
                      Identifier: ' scriptKind'
                  AmpersandAmpersandToken
                  BinaryExpression
                    PropertyAccessExpression
                      Identifier: ' sourceFile'
                      Identifier: 'text'
                    EqualsEqualsEqualsToken
                    CallExpression
                      Identifier: ' getSnapshotText'
                      Identifier: 'scriptSnapshot'
                Block
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                Debug'
                        Identifier: 'assert'
                      Identifier: 'acquiring'
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
                entry'
                      EqualsToken
                      ObjectLiteralExpression
                        ShorthandPropertyAssignment
                          Identifier: '
                    sourceFile'
                        PropertyAssignment
                          Identifier: '
                    languageServiceRefCount'
                          NumericLiteral
                  ExpressionStatement
                    CallExpression
                      Identifier: '
                setBucketEntry'
          IfStatement
            PrefixUnaryExpression
              Identifier: 'entry'
            Block
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' sourceFile'
                    CallExpression
                      Identifier: ' createLanguageServiceSourceFile'
                      Identifier: 'fileName'
                      Identifier: ' scriptSnapshot'
                      Identifier: ' sourceFileOptions'
                      Identifier: ' version'
                      FalseKeyword
                      Identifier: ' scriptKind'
              IfStatement
                Identifier: 'externalCache'
                Block
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                externalCache'
                        Identifier: 'setDocument'
                      Identifier: 'keyWithMode'
                      Identifier: ' path'
                      Identifier: ' sourceFile'
              ExpressionStatement
                BinaryExpression
                  Identifier: '
            entry'
                  EqualsToken
                  ObjectLiteralExpression
                    ShorthandPropertyAssignment
                      Identifier: '
                sourceFile'
                    PropertyAssignment
                      Identifier: '
                languageServiceRefCount'
                      NumericLiteral
              ExpressionStatement
                CallExpression
                  Identifier: '
            setBucketEntry'
            Block
              IfStatement
                BinaryExpression
                  PropertyAccessExpression
                    PropertyAccessExpression
                      Identifier: 'entry'
                      Identifier: 'sourceFile'
                    Identifier: 'version'
                  ExclamationEqualsEqualsToken
                  Identifier: ' version'
                Block
                  ExpressionStatement
                    BinaryExpression
                      PropertyAccessExpression
                        Identifier: '
                entry'
                        Identifier: 'sourceFile'
                      EqualsToken
                      CallExpression
                        Identifier: ' updateLanguageServiceSourceFile'
                        PropertyAccessExpression
                          Identifier: 'entry'
                          Identifier: 'sourceFile'
                        Identifier: ' scriptSnapshot'
                        Identifier: ' version'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' scriptSnapshot'
                            Identifier: 'getChangeRange'
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: 'entry'
                              Identifier: 'sourceFile'
                            Identifier: 'scriptSnapshot'
                  IfStatement
                    Identifier: 'externalCache'
                    Block
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
                    externalCache'
                            Identifier: 'setDocument'
                          Identifier: 'keyWithMode'
                          Identifier: ' path'
                          PropertyAccessExpression
                            Identifier: ' entry'
                            Identifier: 'sourceFile'
              IfStatement
                Identifier: 'acquiring'
                Block
                  ExpressionStatement
                    PostfixUnaryExpression
                      PropertyAccessExpression
                        Identifier: '
                entry'
                        Identifier: 'languageServiceRefCount'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '
        Debug'
                Identifier: 'assert'
              BinaryExpression
                PropertyAccessExpression
                  Identifier: 'entry'
                  Identifier: 'languageServiceRefCount'
                ExclamationEqualsEqualsToken
                NumericLiteral
          ReturnStatement
            PropertyAccessExpression
              Identifier: ' entry'
              Identifier: 'sourceFile'
          FunctionDeclaration
            Identifier: ' setBucketEntry'
            Block
              IfStatement
                PrefixUnaryExpression
                  Identifier: 'bucketEntry'
                Block
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                bucket'
                        Identifier: 'set'
                      Identifier: 'path'
                      Identifier: ' entry'
                IfStatement
                  CallExpression
                    Identifier: 'isDocumentRegistryEntry'
                    Identifier: 'bucketEntry'
                  Block
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' scriptKindMap'
                          NewExpression
                            Identifier: ' Map'
                            TypeReference
                              Identifier: 'ScriptKind'
                            TypeReference
                              Identifier: ' DocumentRegistryEntry'
                    ExpressionStatement
                      CallExpression
                        PropertyAccessExpression
                          Identifier: '
                scriptKindMap'
                          Identifier: 'set'
                        PropertyAccessExpression
                          PropertyAccessExpression
                            Identifier: 'bucketEntry'
                            Identifier: 'sourceFile'
                          Identifier: 'scriptKind'
                        Identifier: ' bucketEntry'
                    ExpressionStatement
                      CallExpression
                        PropertyAccessExpression
                          Identifier: '
                scriptKindMap'
                          Identifier: 'set'
                        NonNullExpression
                          Identifier: 'scriptKind'
                        Identifier: ' entry'
                    ExpressionStatement
                      CallExpression
                        PropertyAccessExpression
                          Identifier: '
                bucket'
                          Identifier: 'set'
                        Identifier: 'path'
                        Identifier: ' scriptKindMap'
                  Block
                    ExpressionStatement
                      CallExpression
                        PropertyAccessExpression
                          Identifier: '
                bucketEntry'
                          Identifier: 'set'
                        NonNullExpression
                          Identifier: 'scriptKind'
                        Identifier: ' entry'
      FunctionDeclaration
        Identifier: ' releaseDocument'
        Parameter
          Identifier: 'fileName'
          StringKeyword
        Parameter
          Identifier: ' compilationSettings'
          TypeReference
            Identifier: ' CompilerOptions'
        Parameter
          Identifier: ' scriptKind'
          QuestionToken
          TypeReference
            Identifier: ' ScriptKind'
        Parameter
          Identifier: ' impliedNodeFormat'
          QuestionToken
          TypeReference
            Identifier: ' ResolutionMode'
        VoidKeyword
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' path'
                CallExpression
                  Identifier: ' toPath'
                  Identifier: 'fileName'
                  Identifier: ' currentDirectory'
                  Identifier: ' getCanonicalFileName'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' key'
                CallExpression
                  Identifier: ' getKeyForCompilationSettings'
                  Identifier: 'compilationSettings'
          ReturnStatement
            CallExpression
              Identifier: ' releaseDocumentWithKey'
              Identifier: 'path'
              Identifier: ' key'
              Identifier: ' scriptKind'
              Identifier: ' impliedNodeFormat'
      FunctionDeclaration
        Identifier: ' releaseDocumentWithKey'
        Parameter
          Identifier: 'path'
          TypeReference
            Identifier: ' Path'
        Parameter
          Identifier: ' key'
          TypeReference
            Identifier: ' DocumentRegistryBucketKey'
        Parameter
          Identifier: ' scriptKind'
          QuestionToken
          TypeReference
            Identifier: ' ScriptKind'
        Parameter
          Identifier: ' impliedNodeFormat'
          QuestionToken
          TypeReference
            Identifier: ' ResolutionMode'
        VoidKeyword
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' bucket'
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' Debug'
                    Identifier: 'checkDefined'
                  CallExpression
                    PropertyAccessExpression
                      Identifier: 'buckets'
                      Identifier: 'get'
                    CallExpression
                      Identifier: 'getDocumentRegistryBucketKeyWithMode'
                      Identifier: 'key'
                      Identifier: ' impliedNodeFormat'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' bucketEntry'
                NonNullExpression
                  CallExpression
                    PropertyAccessExpression
                      Identifier: ' bucket'
                      Identifier: 'get'
                    Identifier: 'path'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' entry'
                NonNullExpression
                  CallExpression
                    Identifier: ' getDocumentRegistryEntry'
                    Identifier: 'bucketEntry'
                    Identifier: ' scriptKind'
          ExpressionStatement
            PostfixUnaryExpression
              PropertyAccessExpression
                Identifier: '
        entry'
                Identifier: 'languageServiceRefCount'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '

        Debug'
                Identifier: 'assert'
              BinaryExpression
                PropertyAccessExpression
                  Identifier: 'entry'
                  Identifier: 'languageServiceRefCount'
                GreaterThanEqualsToken
                NumericLiteral
          IfStatement
            BinaryExpression
              PropertyAccessExpression
                Identifier: 'entry'
                Identifier: 'languageServiceRefCount'
              EqualsEqualsEqualsToken
              NumericLiteral
            Block
              IfStatement
                CallExpression
                  Identifier: 'isDocumentRegistryEntry'
                  Identifier: 'bucketEntry'
                Block
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                bucket'
                        Identifier: 'delete'
                      Identifier: 'path'
                Block
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                bucketEntry'
                        Identifier: 'delete'
                      NonNullExpression
                        Identifier: 'scriptKind'
                  IfStatement
                    BinaryExpression
                      PropertyAccessExpression
                        Identifier: 'bucketEntry'
                        Identifier: 'size'
                      EqualsEqualsEqualsToken
                      NumericLiteral
                    Block
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
                    bucket'
                            Identifier: 'set'
                          Identifier: 'path'
                          NonNullExpression
                            CallExpression
                              Identifier: ' firstDefinedIterator'
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: 'bucketEntry'
                                  Identifier: 'values'
                              Identifier: ' identity'
      ReturnStatement
        ObjectLiteralExpression
          ShorthandPropertyAssignment
            Identifier: '
        acquireDocument'
          ShorthandPropertyAssignment
            Identifier: '
        acquireDocumentWithKey'
          ShorthandPropertyAssignment
            Identifier: '
        updateDocument'
          ShorthandPropertyAssignment
            Identifier: '
        updateDocumentWithKey'
          ShorthandPropertyAssignment
            Identifier: '
        releaseDocument'
          ShorthandPropertyAssignment
            Identifier: '
        releaseDocumentWithKey'
          ShorthandPropertyAssignment
            Identifier: '
        getKeyForCompilationSettings'
          ShorthandPropertyAssignment
            Identifier: '
        getDocumentRegistryBucketKeyWithMode'
          ShorthandPropertyAssignment
            Identifier: '
        reportStats'
          PropertyAssignment
            Identifier: '
        getBuckets'
            ArrowFunction
              EqualsGreaterThanToken
              Identifier: ' buckets'
  FunctionDeclaration
    Identifier: ' getKeyForCompilationSettings'
    Parameter
      Identifier: 'settings'
      TypeReference
        Identifier: ' CompilerOptions'
    TypeReference
      Identifier: ' DocumentRegistryBucketKey'
    Block
      ReturnStatement
        AsExpression
          CallExpression
            Identifier: ' getKeyForCompilerOptions'
            Identifier: 'settings'
            Identifier: ' sourceFileAffectingCompilerOptions'
          TypeReference
            Identifier: ' DocumentRegistryBucketKey'
  FunctionDeclaration
    Identifier: ' getDocumentRegistryBucketKeyWithMode'
    Parameter
      Identifier: 'key'
      TypeReference
        Identifier: ' DocumentRegistryBucketKey'
    Parameter
      Identifier: ' mode'
      TypeReference
        Identifier: ' ResolutionMode'
    Block
      ReturnStatement
        AsExpression
          ParenthesizedExpression
            ConditionalExpression
              Identifier: 'mode'
              QuestionToken
              TemplateExpression
                TemplateHead
                TemplateSpan
                  Identifier: 'key'
                  TemplateMiddle
                TemplateSpan
                  Identifier: 'mode'
                  TemplateTail
              ColonToken
              Identifier: ' key'
          TypeReference
            Identifier: ' DocumentRegistryBucketKeyWithMode'
