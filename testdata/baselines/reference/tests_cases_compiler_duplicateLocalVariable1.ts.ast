SourceFile
  VariableStatement
    DeclareKeyword
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' FileManager'
        AnyKeyword
  VariableStatement
    DeclareKeyword
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' App'
        AnyKeyword
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' TestFileDir'
        StringLiteral
  ClassDeclaration
    ExportKeyword
    Identifier: ' TestCase'
    Constructor
      Parameter
        PublicKeyword
        Identifier: ' name'
        StringKeyword
      Parameter
        PublicKeyword
        Identifier: ' test'
        FunctionType
          BooleanKeyword
      Parameter
        PublicKeyword
        Identifier: ' errorMessageRegEx'
        QuestionToken
        StringKeyword
      Block
  ClassDeclaration
    ExportKeyword
    Identifier: ' TestRunner'
    PropertyDeclaration
      PrivateKeyword
      Identifier: ' tests'
      ArrayType
        TypeReference
          Identifier: ' TestCase'
      ArrayLiteralExpression
    MethodDeclaration
      StaticKeyword
      Identifier: ' arrayCompare'
      Parameter
        Identifier: 'arg1'
        ArrayType
          AnyKeyword
      Parameter
        Identifier: ' arg2'
        ArrayType
          AnyKeyword
      BooleanKeyword
      Block
        ReturnStatement
          ParenthesizedExpression
            CallExpression
              PropertyAccessExpression
                Identifier: 'arg1'
                Identifier: 'every'
              FunctionExpression
                Parameter
                  Identifier: 'val'
                Parameter
                  Identifier: ' index'
                Block
                  ReturnStatement
                    BinaryExpression
                      Identifier: ' val'
                      EqualsEqualsEqualsToken
                      ElementAccessExpression
                        Identifier: ' arg2'
                        Identifier: 'index'
    MethodDeclaration
      PublicKeyword
      Identifier: ' addTest'
      Parameter
        Identifier: 'test'
        TypeReference
          Identifier: ' TestCase'
      Block
        ExpressionStatement
          CallExpression
            PropertyAccessExpression
              PropertyAccessExpression
                ThisKeyword
                Identifier: 'tests'
              Identifier: 'push'
            Identifier: 'test'
    MethodDeclaration
      PublicKeyword
      Identifier: ' run'
      Block
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' success'
              TrueKeyword
        ForInStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' test'
          PropertyAccessExpression
            ThisKeyword
            Identifier: 'tests'
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' exception'
                  FalseKeyword
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' testcase'
                  TypeAssertionExpression
                    TypeReference
                      Identifier: 'TestCase'
                    ElementAccessExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'tests'
                      Identifier: 'test'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' testResult'
                  BooleanKeyword
                  FalseKeyword
            TryStatement
              Block
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
                testResult'
                    EqualsToken
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' testcase'
                        Identifier: 'test'
              CatchClause
                VariableDeclaration
                  Identifier: 'e'
                Block
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
                exception'
                      EqualsToken
                      TrueKeyword
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
                testResult'
                      EqualsToken
                      FalseKeyword
                  IfStatement
                    BinaryExpression
                      TypeOfExpression
                        PropertyAccessExpression
                          Identifier: ' testcase'
                          Identifier: 'errorMessageRegEx'
                      EqualsEqualsEqualsToken
                      StringLiteral
                    Block
                      IfStatement
                        BinaryExpression
                          PropertyAccessExpression
                            Identifier: 'testcase'
                            Identifier: 'errorMessageRegEx'
                          EqualsEqualsEqualsToken
                          StringLiteral
                        Block
                          ExpressionStatement
                            BinaryExpression
                              Identifier: ' // Any error is fine
                        testResult'
                              EqualsToken
                              TrueKeyword
                        IfStatement
                          PropertyAccessExpression
                            Identifier: 'e'
                            Identifier: 'message'
                          Block
                            VariableStatement
                              VariableDeclarationList
                                VariableDeclaration
                                  Identifier: ' regex'
                                  NewExpression
                                    Identifier: ' RegExp'
                                    PropertyAccessExpression
                                      Identifier: 'testcase'
                                      Identifier: 'errorMessageRegEx'
                            ExpressionStatement
                              BinaryExpression
                                Identifier: '
                        testResult'
                                EqualsToken
                                CallExpression
                                  PropertyAccessExpression
                                    Identifier: ' regex'
                                    Identifier: 'test'
                                  PropertyAccessExpression
                                    Identifier: 'e'
                                    Identifier: 'message'
                  IfStatement
                    BinaryExpression
                      Identifier: 'testResult'
                      EqualsEqualsEqualsToken
                      FalseKeyword
                    Block
            IfStatement
              BinaryExpression
                ParenthesizedExpression
                  BinaryExpression
                    PropertyAccessExpression
                      Identifier: 'testcase'
                      Identifier: 'errorMessageRegEx'
                    ExclamationEqualsEqualsToken
                    Identifier: ' undefined'
                AmpersandAmpersandToken
                PrefixUnaryExpression
                  Identifier: 'exception'
              Block
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
                success'
                    EqualsToken
                    FalseKeyword
              IfStatement
                PrefixUnaryExpression
                  Identifier: 'testResult'
                Block
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
                success'
                      EqualsToken
                      FalseKeyword
        IfStatement
          Identifier: 'success'
          Block
          Block
  VariableStatement
    ExportKeyword
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' tests'
        TypeReference
          Identifier: ' TestRunner'
        CallExpression
          ParenthesizedExpression
            FunctionExpression
              Block
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' testRunner'
                      NewExpression
                        Identifier: ' TestRunner'
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    // First 3 are for simple harness validation
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          ReturnStatement
                            TrueKeyword
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          ThrowStatement
                            NewExpression
                              Identifier: ' Error'
                          ReturnStatement
                            FalseKeyword
                      StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          ThrowStatement
                            NewExpression
                              Identifier: ' Error'
                              StringLiteral
                          ReturnStatement
                            FalseKeyword
                      StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          ReturnStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: ' TestRunner'
                                Identifier: 'arrayCompare'
                              ArrayLiteralExpression
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                              ArrayLiteralExpression
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          ReturnStatement
                            PrefixUnaryExpression
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: 'TestRunner'
                                  Identifier: 'arrayCompare'
                                ArrayLiteralExpression
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                ArrayLiteralExpression
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    // File detection tests
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          ReturnStatement
                            CallExpression
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  Identifier: ' FileManager'
                                  Identifier: 'DirectoryManager'
                                Identifier: 'fileExists'
                              BinaryExpression
                                Identifier: 'TestFileDir'
                                PlusToken
                                StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          ReturnStatement
                            PrefixUnaryExpression
                              CallExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    Identifier: 'FileManager'
                                    Identifier: 'DirectoryManager'
                                  Identifier: 'fileExists'
                                BinaryExpression
                                  Identifier: 'TestFileDir'
                                  PlusToken
                                  StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    // File pattern matching tests
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          ReturnStatement
                            ParenthesizedExpression
                              BinaryExpression
                                BinaryExpression
                                  CallExpression
                                    PropertyAccessExpression
                                      PropertyAccessExpression
                                        Identifier: 'FileManager'
                                        Identifier: 'FileBuffer'
                                      Identifier: 'isTextFile'
                                    StringLiteral
                                  AmpersandAmpersandToken
                                  CallExpression
                                    PropertyAccessExpression
                                      PropertyAccessExpression
                                        Identifier: '
                FileManager'
                                        Identifier: 'FileBuffer'
                                      Identifier: 'isTextFile'
                                    StringLiteral
                                AmpersandAmpersandToken
                                CallExpression
                                  PropertyAccessExpression
                                    PropertyAccessExpression
                                      Identifier: '
                FileManager'
                                      Identifier: 'FileBuffer'
                                    Identifier: 'isTextFile'
                                  StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          ReturnStatement
                            CallExpression
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  Identifier: ' FileManager'
                                  Identifier: 'FileBuffer'
                                Identifier: 'isTextFile'
                              StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          ReturnStatement
                            ParenthesizedExpression
                              BinaryExpression
                                PrefixUnaryExpression
                                  CallExpression
                                    PropertyAccessExpression
                                      PropertyAccessExpression
                                        Identifier: 'FileManager'
                                        Identifier: 'FileBuffer'
                                      Identifier: 'isTextFile'
                                    StringLiteral
                                AmpersandAmpersandToken
                                PrefixUnaryExpression
                                  CallExpression
                                    PropertyAccessExpression
                                      PropertyAccessExpression
                                        Identifier: 'FileManager'
                                        Identifier: 'FileBuffer'
                                      Identifier: 'isTextFile'
                                    StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    // Command-line parameter tests
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' app'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' App'
                                    Identifier: 'App'
                                  ArrayLiteralExpression
                          ReturnStatement
                            ParenthesizedExpression
                              BinaryExpression
                                BinaryExpression
                                  BinaryExpression
                                    BinaryExpression
                                      BinaryExpression
                                        BinaryExpression
                                          BinaryExpression
                                            PropertyAccessExpression
                                              Identifier: 'app'
                                              Identifier: 'fixLines'
                                            EqualsEqualsEqualsToken
                                            FalseKeyword
                                          AmpersandAmpersandToken
                                          BinaryExpression
                                            PropertyAccessExpression
                                              Identifier: '
                   app'
                                              Identifier: 'recurse'
                                            EqualsEqualsEqualsToken
                                            TrueKeyword
                                        AmpersandAmpersandToken
                                        BinaryExpression
                                          PropertyAccessExpression
                                            Identifier: '
                   app'
                                            Identifier: 'lineEndings'
                                          EqualsEqualsEqualsToken
                                          StringLiteral
                                      AmpersandAmpersandToken
                                      BinaryExpression
                                        PropertyAccessExpression
                                          Identifier: '
                   app'
                                          Identifier: 'matchPattern'
                                        EqualsEqualsEqualsToken
                                        Identifier: ' undefined'
                                    AmpersandAmpersandToken
                                    BinaryExpression
                                      PropertyAccessExpression
                                        Identifier: '
                   app'
                                        Identifier: 'rootDirectory'
                                      EqualsEqualsEqualsToken
                                      StringLiteral
                                  AmpersandAmpersandToken
                                  BinaryExpression
                                    ElementAccessExpression
                                      PropertyAccessExpression
                                        Identifier: '
                   app'
                                        Identifier: 'encodings'
                                      NumericLiteral
                                    EqualsEqualsEqualsToken
                                    StringLiteral
                                AmpersandAmpersandToken
                                BinaryExpression
                                  ElementAccessExpression
                                    PropertyAccessExpression
                                      Identifier: '
                   app'
                                      Identifier: 'encodings'
                                    NumericLiteral
                                  EqualsEqualsEqualsToken
                                  StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' app'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' App'
                                    Identifier: 'App'
                                  ArrayLiteralExpression
                                    StringLiteral
                                    StringLiteral
                                    StringLiteral
                                    StringLiteral
                                    StringLiteral
                          ReturnStatement
                            ParenthesizedExpression
                              BinaryExpression
                                BinaryExpression
                                  BinaryExpression
                                    BinaryExpression
                                      BinaryExpression
                                        BinaryExpression
                                          BinaryExpression
                                            BinaryExpression
                                              PropertyAccessExpression
                                                Identifier: 'app'
                                                Identifier: 'fixLines'
                                              EqualsEqualsEqualsToken
                                              TrueKeyword
                                            AmpersandAmpersandToken
                                            BinaryExpression
                                              PropertyAccessExpression
                                                Identifier: '
                   app'
                                                Identifier: 'lineEndings'
                                              EqualsEqualsEqualsToken
                                              StringLiteral
                                          AmpersandAmpersandToken
                                          BinaryExpression
                                            PropertyAccessExpression
                                              Identifier: '
                   app'
                                              Identifier: 'recurse'
                                            EqualsEqualsEqualsToken
                                            FalseKeyword
                                        AmpersandAmpersandToken
                                        BinaryExpression
                                          PropertyAccessExpression
                                            Identifier: '
                   app'
                                            Identifier: 'matchPattern'
                                          EqualsEqualsEqualsToken
                                          Identifier: ' undefined'
                                      AmpersandAmpersandToken
                                      BinaryExpression
                                        PropertyAccessExpression
                                          Identifier: '
                   app'
                                          Identifier: 'rootDirectory'
                                        EqualsEqualsEqualsToken
                                        StringLiteral
                                    AmpersandAmpersandToken
                                    BinaryExpression
                                      ElementAccessExpression
                                        PropertyAccessExpression
                                          Identifier: '
                   app'
                                          Identifier: 'encodings'
                                        NumericLiteral
                                      EqualsEqualsEqualsToken
                                      StringLiteral
                                  AmpersandAmpersandToken
                                  BinaryExpression
                                    ElementAccessExpression
                                      PropertyAccessExpression
                                        Identifier: '
                   app'
                                        Identifier: 'encodings'
                                      NumericLiteral
                                    EqualsEqualsEqualsToken
                                    StringLiteral
                                AmpersandAmpersandToken
                                BinaryExpression
                                  PropertyAccessExpression
                                    PropertyAccessExpression
                                      Identifier: '
                   app'
                                      Identifier: 'encodings'
                                    Identifier: 'length'
                                  EqualsEqualsEqualsToken
                                  NumericLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    // File BOM detection tests
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  BinaryExpression
                                    Identifier: 'TestFileDir'
                                    PlusToken
                                    StringLiteral
                          ReturnStatement
                            BinaryExpression
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: ' fb'
                                  Identifier: 'bom'
                                EqualsEqualsEqualsToken
                                StringLiteral
                              AmpersandAmpersandToken
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: ' fb'
                                  Identifier: 'encoding'
                                EqualsEqualsEqualsToken
                                StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  BinaryExpression
                                    Identifier: 'TestFileDir'
                                    PlusToken
                                    StringLiteral
                          ReturnStatement
                            BinaryExpression
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: ' fb'
                                  Identifier: 'bom'
                                EqualsEqualsEqualsToken
                                StringLiteral
                              AmpersandAmpersandToken
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: ' fb'
                                  Identifier: 'encoding'
                                EqualsEqualsEqualsToken
                                StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  BinaryExpression
                                    Identifier: 'TestFileDir'
                                    PlusToken
                                    StringLiteral
                          ReturnStatement
                            BinaryExpression
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: ' fb'
                                  Identifier: 'bom'
                                EqualsEqualsEqualsToken
                                StringLiteral
                              AmpersandAmpersandToken
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: ' fb'
                                  Identifier: 'encoding'
                                EqualsEqualsEqualsToken
                                StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  BinaryExpression
                                    Identifier: 'TestFileDir'
                                    PlusToken
                                    StringLiteral
                          ReturnStatement
                            BinaryExpression
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: ' fb'
                                  Identifier: 'bom'
                                EqualsEqualsEqualsToken
                                StringLiteral
                              AmpersandAmpersandToken
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: ' fb'
                                  Identifier: 'encoding'
                                EqualsEqualsEqualsToken
                                StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  BinaryExpression
                                    Identifier: 'TestFileDir'
                                    PlusToken
                                    StringLiteral
                          ReturnStatement
                            BinaryExpression
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: ' fb'
                                  Identifier: 'bom'
                                EqualsEqualsEqualsToken
                                StringLiteral
                              AmpersandAmpersandToken
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: ' fb'
                                  Identifier: 'encoding'
                                EqualsEqualsEqualsToken
                                StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  BinaryExpression
                                    Identifier: 'TestFileDir'
                                    PlusToken
                                    StringLiteral
                          ReturnStatement
                            BinaryExpression
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: ' fb'
                                  Identifier: 'bom'
                                EqualsEqualsEqualsToken
                                StringLiteral
                              AmpersandAmpersandToken
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: ' fb'
                                  Identifier: 'encoding'
                                EqualsEqualsEqualsToken
                                StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    // UTF8 encoding tests
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  BinaryExpression
                                    Identifier: 'TestFileDir'
                                    PlusToken
                                    StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' chars'
                                ArrayLiteralExpression
                          ForStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' i'
                                NumericLiteral
                            BinaryExpression
                              Identifier: ' i'
                              LessThanToken
                              NumericLiteral
                            PostfixUnaryExpression
                              Identifier: ' i'
                            Block
                              ExpressionStatement
                                CallExpression
                                  PropertyAccessExpression
                                    Identifier: '
                chars'
                                    Identifier: 'push'
                                  CallExpression
                                    PropertyAccessExpression
                                      Identifier: 'fb'
                                      Identifier: 'readByte'
                          ReturnStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: ' TestRunner'
                                Identifier: 'arrayCompare'
                              Identifier: 'chars'
                              ArrayLiteralExpression
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '


    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  BinaryExpression
                                    Identifier: 'TestFileDir'
                                    PlusToken
                                    StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' chars'
                                ArrayLiteralExpression
                          ForStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' i'
                                NumericLiteral
                            BinaryExpression
                              Identifier: ' i'
                              LessThanToken
                              NumericLiteral
                            PostfixUnaryExpression
                              Identifier: ' i'
                            Block
                              ExpressionStatement
                                CallExpression
                                  PropertyAccessExpression
                                    Identifier: '
                chars'
                                    Identifier: 'push'
                                  CallExpression
                                    PropertyAccessExpression
                                      Identifier: 'fb'
                                      Identifier: 'readUtf8CodePoint'
                          ReturnStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: ' TestRunner'
                                Identifier: 'arrayCompare'
                              Identifier: 'chars'
                              ArrayLiteralExpression
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                                NumericLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  NumericLiteral
                          ExpressionStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: '
            fb'
                                Identifier: 'writeUtf8Bom'
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' chars'
                                ArrayLiteralExpression
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                          ForInStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' i'
                            Identifier: ' chars'
                            Block
                              ExpressionStatement
                                CallExpression
                                  PropertyAccessExpression
                                    Identifier: '
                fb'
                                    Identifier: 'writeUtf8CodePoint'
                                  ElementAccessExpression
                                    Identifier: 'chars'
                                    Identifier: 'i'
                          ExpressionStatement
                            BinaryExpression
                              PropertyAccessExpression
                                Identifier: '
            fb'
                                Identifier: 'index'
                              EqualsToken
                              NumericLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' bytes'
                                ArrayLiteralExpression
                          ForStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' i'
                                NumericLiteral
                            BinaryExpression
                              Identifier: ' i'
                              LessThanToken
                              NumericLiteral
                            PostfixUnaryExpression
                              Identifier: ' i'
                            Block
                              ExpressionStatement
                                CallExpression
                                  PropertyAccessExpression
                                    Identifier: '
                bytes'
                                    Identifier: 'push'
                                  CallExpression
                                    PropertyAccessExpression
                                      Identifier: 'fb'
                                      Identifier: 'readByte'
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' expected'
                                ArrayLiteralExpression
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                          ReturnStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: ' TestRunner'
                                Identifier: 'arrayCompare'
                              Identifier: 'bytes'
                              Identifier: ' expected'
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    // Test reading and writing files
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' filename'
                                BinaryExpression
                                  Identifier: ' TestFileDir'
                                  PlusToken
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  NumericLiteral
                          ExpressionStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: '
            fb'
                                Identifier: 'writeUtf16leBom'
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' chars'
                                ArrayLiteralExpression
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                          ExpressionStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: '
            chars'
                                Identifier: 'forEach'
                              FunctionExpression
                                Parameter
                                  Identifier: 'val'
                                Block
                                  ExpressionStatement
                                    CallExpression
                                      PropertyAccessExpression
                                        Identifier: ' fb'
                                        Identifier: 'writeUtf16CodePoint'
                                      Identifier: 'val'
                                      FalseKeyword
                          ExpressionStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: '
            fb'
                                Identifier: 'save'
                              Identifier: 'filename'
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' savedFile'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  Identifier: 'filename'
                          IfStatement
                            BinaryExpression
                              PropertyAccessExpression
                                Identifier: 'savedFile'
                                Identifier: 'encoding'
                              ExclamationEqualsEqualsToken
                              StringLiteral
                            Block
                              ThrowStatement
                                CallExpression
                                  Identifier: ' Error'
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' expectedBytes'
                                ArrayLiteralExpression
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                          ExpressionStatement
                            BinaryExpression
                              PropertyAccessExpression
                                Identifier: '
            savedFile'
                                Identifier: 'index'
                              EqualsToken
                              NumericLiteral
                          ExpressionStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: '
            expectedBytes'
                                Identifier: 'forEach'
                              FunctionExpression
                                Parameter
                                  Identifier: 'val'
                                Block
                                  VariableStatement
                                    VariableDeclarationList
                                      VariableDeclaration
                                        Identifier: ' byteVal'
                                        CallExpression
                                          PropertyAccessExpression
                                            Identifier: ' savedFile'
                                            Identifier: 'readByte'
                                  IfStatement
                                    BinaryExpression
                                      Identifier: 'byteVal'
                                      ExclamationEqualsEqualsToken
                                      Identifier: ' val'
                                    Block
                                      ThrowStatement
                                        CallExpression
                                          Identifier: ' Error'
                                          StringLiteral
                          ReturnStatement
                            TrueKeyword
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  BinaryExpression
                                    Identifier: 'TestFileDir'
                                    PlusToken
                                    StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' result'
                                CallExpression
                                  PropertyAccessExpression
                                    Identifier: ' fb'
                                    Identifier: 'readByte'
                                  NumericLiteral
                          ReturnStatement
                            TrueKeyword
                      StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  BinaryExpression
                                    Identifier: 'TestFileDir'
                                    PlusToken
                                    StringLiteral
                          ExpressionStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: '
        fb'
                                Identifier: 'writeByte'
                              NumericLiteral
                              NumericLiteral
                          ReturnStatement
                            TrueKeyword
                      StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    // Non-BMP unicode char tests
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' savedFile'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  BinaryExpression
                                    Identifier: 'TestFileDir'
                                    PlusToken
                                    StringLiteral
                          IfStatement
                            BinaryExpression
                              PropertyAccessExpression
                                Identifier: 'savedFile'
                                Identifier: 'encoding'
                              ExclamationEqualsEqualsToken
                              StringLiteral
                            Block
                              ThrowStatement
                                CallExpression
                                  Identifier: ' Error'
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' codePoints'
                                ArrayLiteralExpression
                          ForStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' i'
                                NumericLiteral
                            BinaryExpression
                              Identifier: ' i'
                              LessThanToken
                              NumericLiteral
                            PostfixUnaryExpression
                              Identifier: ' i'
                            Block
                              ExpressionStatement
                                CallExpression
                                  PropertyAccessExpression
                                    Identifier: '
                codePoints'
                                    Identifier: 'push'
                                  CallExpression
                                    PropertyAccessExpression
                                      Identifier: 'savedFile'
                                      Identifier: 'readUtf16CodePoint'
                                    FalseKeyword
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' expectedCodePoints'
                                ArrayLiteralExpression
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                          ReturnStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: ' TestRunner'
                                Identifier: 'arrayCompare'
                              Identifier: 'codePoints'
                              Identifier: ' expectedCodePoints'
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' savedFile'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  BinaryExpression
                                    Identifier: 'TestFileDir'
                                    PlusToken
                                    StringLiteral
                          IfStatement
                            BinaryExpression
                              PropertyAccessExpression
                                Identifier: 'savedFile'
                                Identifier: 'encoding'
                              ExclamationEqualsEqualsToken
                              StringLiteral
                            Block
                              ThrowStatement
                                CallExpression
                                  Identifier: ' Error'
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' codePoints'
                                ArrayLiteralExpression
                          ForStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' i'
                                NumericLiteral
                            BinaryExpression
                              Identifier: ' i'
                              LessThanToken
                              NumericLiteral
                            PostfixUnaryExpression
                              Identifier: ' i'
                            Block
                              ExpressionStatement
                                CallExpression
                                  PropertyAccessExpression
                                    Identifier: '
                codePoints'
                                    Identifier: 'push'
                                  CallExpression
                                    PropertyAccessExpression
                                      Identifier: 'savedFile'
                                      Identifier: 'readUtf8CodePoint'
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' expectedCodePoints'
                                ArrayLiteralExpression
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                          ReturnStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: ' TestRunner'
                                Identifier: 'arrayCompare'
                              Identifier: 'codePoints'
                              Identifier: ' expectedCodePoints'
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' filename'
                                BinaryExpression
                                  Identifier: ' TestFileDir'
                                  PlusToken
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  NumericLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' chars'
                                ArrayLiteralExpression
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                          ExpressionStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: '
            chars'
                                Identifier: 'forEach'
                              FunctionExpression
                                Parameter
                                  Identifier: 'val'
                                Block
                                  ExpressionStatement
                                    CallExpression
                                      PropertyAccessExpression
                                        Identifier: ' fb'
                                        Identifier: 'writeUtf8CodePoint'
                                      Identifier: 'val'
                          ExpressionStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: '
            fb'
                                Identifier: 'save'
                              Identifier: 'filename'
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' savedFile'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  Identifier: 'filename'
                          IfStatement
                            BinaryExpression
                              PropertyAccessExpression
                                Identifier: 'savedFile'
                                Identifier: 'encoding'
                              ExclamationEqualsEqualsToken
                              StringLiteral
                            Block
                              ThrowStatement
                                CallExpression
                                  Identifier: ' Error'
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' expectedBytes'
                                ArrayLiteralExpression
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                                  NumericLiteral
                          ExpressionStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: '
            expectedBytes'
                                Identifier: 'forEach'
                              FunctionExpression
                                Parameter
                                  Identifier: 'val'
                                Block
                                  VariableStatement
                                    VariableDeclarationList
                                      VariableDeclaration
                                        Identifier: ' byteVal'
                                        CallExpression
                                          PropertyAccessExpression
                                            Identifier: ' savedFile'
                                            Identifier: 'readByte'
                                  IfStatement
                                    BinaryExpression
                                      Identifier: 'byteVal'
                                      ExclamationEqualsEqualsToken
                                      Identifier: ' val'
                                    Block
                                      ThrowStatement
                                        CallExpression
                                          Identifier: ' Error'
                                          StringLiteral
                          ReturnStatement
                            TrueKeyword
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' filename'
                                BinaryExpression
                                  Identifier: ' TestFileDir'
                                  PlusToken
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  Identifier: 'filename'
                          ReturnStatement
                            TrueKeyword
                      StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' filename'
                                BinaryExpression
                                  Identifier: ' TestFileDir'
                                  PlusToken
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  Identifier: 'filename'
                          ReturnStatement
                            TrueKeyword
                      StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' filename'
                                BinaryExpression
                                  Identifier: ' TestFileDir'
                                  PlusToken
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  Identifier: 'filename'
                          ReturnStatement
                            TrueKeyword
                      StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' filename'
                                BinaryExpression
                                  Identifier: ' TestFileDir'
                                  PlusToken
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  Identifier: 'filename'
                          ReturnStatement
                            TrueKeyword
                      StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' filename'
                                BinaryExpression
                                  Identifier: ' TestFileDir'
                                  PlusToken
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  Identifier: 'filename'
                          ReturnStatement
                            TrueKeyword
                      StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' filename'
                                BinaryExpression
                                  Identifier: ' TestFileDir'
                                  PlusToken
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  Identifier: 'filename'
                          ReturnStatement
                            TrueKeyword
                      StringLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    // Count of CRs & LFs
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' filename'
                                BinaryExpression
                                  Identifier: ' TestFileDir'
                                  PlusToken
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  Identifier: 'filename'
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' result'
                                ParenthesizedExpression
                                  BinaryExpression
                                    BinaryExpression
                                      BinaryExpression
                                        BinaryExpression
                                          PropertyAccessExpression
                                            Identifier: 'fb'
                                            Identifier: 'countCR'
                                          EqualsEqualsEqualsToken
                                          NumericLiteral
                                        AmpersandAmpersandToken
                                        BinaryExpression
                                          PropertyAccessExpression
                                            Identifier: ' fb'
                                            Identifier: 'countLF'
                                          EqualsEqualsEqualsToken
                                          NumericLiteral
                                      AmpersandAmpersandToken
                                      BinaryExpression
                                        PropertyAccessExpression
                                          Identifier: ' fb'
                                          Identifier: 'countCRLF'
                                        EqualsEqualsEqualsToken
                                        NumericLiteral
                                    AmpersandAmpersandToken
                                    BinaryExpression
                                      PropertyAccessExpression
                                        Identifier: ' fb'
                                        Identifier: 'countHT'
                                      EqualsEqualsEqualsToken
                                      NumericLiteral
                          ReturnStatement
                            Identifier: ' result'
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '

    // Control characters in text
    testRunner'
                      Identifier: 'addTest'
                    NewExpression
                      Identifier: ' TestCase'
                      StringLiteral
                      FunctionExpression
                        Block
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' filename'
                                BinaryExpression
                                  Identifier: ' TestFileDir'
                                  PlusToken
                                  StringLiteral
                          VariableStatement
                            VariableDeclarationList
                              VariableDeclaration
                                Identifier: ' fb'
                                NewExpression
                                  PropertyAccessExpression
                                    Identifier: ' FileManager'
                                    Identifier: 'FileBuffer'
                                  Identifier: 'filename'
                          ReturnStatement
                            TrueKeyword
                      StringLiteral
                ReturnStatement
                  Identifier: ' testRunner'
