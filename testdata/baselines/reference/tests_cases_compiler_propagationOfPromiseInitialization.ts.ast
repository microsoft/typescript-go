SourceFile
  InterfaceDeclaration
    Identifier: ' IPromise'
    TypeParameter
      Identifier: 'T'
    MethodSignature
      Identifier: '
    then'
      TypeParameter
        Identifier: 'TResult'
      Parameter
        Identifier: 'successCallback'
        FunctionType
          Parameter
            Identifier: 'promiseValue'
            TypeReference
              Identifier: ' T'
          TypeReference
            Identifier: ' TResult'
      Parameter
        Identifier: ' errorCallback'
        QuestionToken
        FunctionType
          Parameter
            Identifier: 'reason'
            AnyKeyword
          TypeReference
            Identifier: ' TResult'
      TypeReference
        Identifier: ' IPromise'
        TypeReference
          Identifier: 'TResult'
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' foo'
        TypeReference
          Identifier: ' IPromise'
          NumberKeyword
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        CallExpression
          PropertyAccessExpression
            Identifier: '
foo'
            Identifier: 'then'
          ArrowFunction
            Parameter
              Identifier: 'x'
            EqualsGreaterThanToken
            Block
              ReturnStatement
                StringLiteral
        Identifier: 'then'
      ArrowFunction
        Parameter
          Identifier: 'x'
        EqualsGreaterThanToken
        Block
          ExpressionStatement
            PropertyAccessExpression
              Identifier: '
    // x is inferred to be string
    x'
              Identifier: 'length'
          ReturnStatement
            NumericLiteral
