SourceFile
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: '
    CallExpression'
        ImportSpecifier
          Identifier: '
    Debug'
        ImportSpecifier
          Identifier: '
    Expression'
        ImportSpecifier
          Identifier: '
    getSourceTextOfNodeFromSourceFile'
        ImportSpecifier
          Identifier: '
    hasInvalidEscape'
        ImportSpecifier
          Identifier: '
    Identifier'
        ImportSpecifier
          Identifier: '
    isExpression'
        ImportSpecifier
          Identifier: '
    isExternalModule'
        ImportSpecifier
          Identifier: '
    isNoSubstitutionTemplateLiteral'
        ImportSpecifier
          Identifier: '
    NodeFactory'
        ImportSpecifier
          Identifier: '
    NoSubstitutionTemplateLiteral'
        ImportSpecifier
          Identifier: '
    setTextRange'
        ImportSpecifier
          Identifier: '
    SourceFile'
        ImportSpecifier
          Identifier: '
    SyntaxKind'
        ImportSpecifier
          Identifier: '
    TaggedTemplateExpression'
        ImportSpecifier
          Identifier: '
    TemplateHead'
        ImportSpecifier
          Identifier: '
    TemplateLiteralLikeNode'
        ImportSpecifier
          Identifier: '
    TemplateMiddle'
        ImportSpecifier
          Identifier: '
    TemplateTail'
        ImportSpecifier
          Identifier: '
    TokenFlags'
        ImportSpecifier
          Identifier: '
    TransformationContext'
        ImportSpecifier
          Identifier: '
    visitEachChild'
        ImportSpecifier
          Identifier: '
    visitNode'
        ImportSpecifier
          Identifier: '
    Visitor'
    StringLiteral
  EnumDeclaration
    ExportKeyword
    Identifier: ' ProcessLevel'
    EnumMember
      Identifier: '
    LiftRestriction'
    EnumMember
      Identifier: '
    All'
  FunctionDeclaration
    ExportKeyword
    Identifier: ' processTaggedTemplateExpression'
    Parameter
      Identifier: '
    context'
      TypeReference
        Identifier: ' TransformationContext'
    Parameter
      Identifier: '
    node'
      TypeReference
        Identifier: ' TaggedTemplateExpression'
    Parameter
      Identifier: '
    visitor'
      TypeReference
        Identifier: ' Visitor'
    Parameter
      Identifier: '
    currentSourceFile'
      TypeReference
        Identifier: ' SourceFile'
    Parameter
      Identifier: '
    recordTaggedTemplateString'
      FunctionType
        Parameter
          Identifier: 'temp'
          TypeReference
            Identifier: ' Identifier'
        VoidKeyword
    Parameter
      Identifier: '
    level'
      TypeReference
        Identifier: ' ProcessLevel'
    UnionType
      TypeReference
        Identifier: ' CallExpression'
      TypeReference
        Identifier: ' TaggedTemplateExpression'
    Block
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' tag'
            CallExpression
              Identifier: ' visitNode'
              PropertyAccessExpression
                Identifier: 'node'
                Identifier: 'tag'
              Identifier: ' visitor'
              Identifier: ' isExpression'
      ExpressionStatement
        CallExpression
          PropertyAccessExpression
            Identifier: '
    Debug'
            Identifier: 'assert'
          Identifier: 'tag'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' templateArguments'
            ArrayType
              TypeReference
                Identifier: ' Expression'
            ArrayLiteralExpression
              NonNullExpression
                Identifier: 'undefined'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' cookedStrings'
            ArrayType
              TypeReference
                Identifier: ' Expression'
            ArrayLiteralExpression
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' rawStrings'
            ArrayType
              TypeReference
                Identifier: ' Expression'
            ArrayLiteralExpression
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' template'
            PropertyAccessExpression
              Identifier: ' node'
              Identifier: 'template'
      IfStatement
        BinaryExpression
          BinaryExpression
            Identifier: 'level'
            EqualsEqualsEqualsToken
            PropertyAccessExpression
              Identifier: ' ProcessLevel'
              Identifier: 'LiftRestriction'
          AmpersandAmpersandToken
          PrefixUnaryExpression
            CallExpression
              Identifier: 'hasInvalidEscape'
              Identifier: 'template'
        Block
          ReturnStatement
            CallExpression
              Identifier: ' visitEachChild'
              Identifier: 'node'
              Identifier: ' visitor'
              Identifier: ' context'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            ObjectBindingPattern
              BindingElement
                Identifier: ' factory'
            Identifier: ' context'
      IfStatement
        CallExpression
          Identifier: 'isNoSubstitutionTemplateLiteral'
          Identifier: 'template'
        Block
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '
        cookedStrings'
                Identifier: 'push'
              CallExpression
                Identifier: 'createTemplateCooked'
                Identifier: 'factory'
                Identifier: ' template'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '
        rawStrings'
                Identifier: 'push'
              CallExpression
                Identifier: 'getRawLiteral'
                Identifier: 'factory'
                Identifier: ' template'
                Identifier: ' currentSourceFile'
        Block
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '
        cookedStrings'
                Identifier: 'push'
              CallExpression
                Identifier: 'createTemplateCooked'
                Identifier: 'factory'
                PropertyAccessExpression
                  Identifier: ' template'
                  Identifier: 'head'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '
        rawStrings'
                Identifier: 'push'
              CallExpression
                Identifier: 'getRawLiteral'
                Identifier: 'factory'
                PropertyAccessExpression
                  Identifier: ' template'
                  Identifier: 'head'
                Identifier: ' currentSourceFile'
          ForOfStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' templateSpan'
            PropertyAccessExpression
              Identifier: ' template'
              Identifier: 'templateSpans'
            Block
              ExpressionStatement
                CallExpression
                  PropertyAccessExpression
                    Identifier: '
            cookedStrings'
                    Identifier: 'push'
                  CallExpression
                    Identifier: 'createTemplateCooked'
                    Identifier: 'factory'
                    PropertyAccessExpression
                      Identifier: ' templateSpan'
                      Identifier: 'literal'
              ExpressionStatement
                CallExpression
                  PropertyAccessExpression
                    Identifier: '
            rawStrings'
                    Identifier: 'push'
                  CallExpression
                    Identifier: 'getRawLiteral'
                    Identifier: 'factory'
                    PropertyAccessExpression
                      Identifier: ' templateSpan'
                      Identifier: 'literal'
                    Identifier: ' currentSourceFile'
              ExpressionStatement
                CallExpression
                  PropertyAccessExpression
                    Identifier: '
            templateArguments'
                    Identifier: 'push'
                  CallExpression
                    PropertyAccessExpression
                      Identifier: 'Debug'
                      Identifier: 'checkDefined'
                    CallExpression
                      Identifier: 'visitNode'
                      PropertyAccessExpression
                        Identifier: 'templateSpan'
                        Identifier: 'expression'
                      Identifier: ' visitor'
                      Identifier: ' isExpression'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' helperCall'
            CallExpression
              PropertyAccessExpression
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' context'
                    Identifier: 'getEmitHelperFactory'
                Identifier: 'createTemplateObjectHelper'
              CallExpression
                PropertyAccessExpression
                  Identifier: '
        factory'
                  Identifier: 'createArrayLiteralExpression'
                Identifier: 'cookedStrings'
              CallExpression
                PropertyAccessExpression
                  Identifier: '
        factory'
                  Identifier: 'createArrayLiteralExpression'
                Identifier: 'rawStrings'
      IfStatement
        CallExpression
          Identifier: 'isExternalModule'
          Identifier: 'currentSourceFile'
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' tempVar'
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' factory'
                    Identifier: 'createUniqueName'
                  StringLiteral
          ExpressionStatement
            CallExpression
              Identifier: '
        recordTaggedTemplateString'
              Identifier: 'tempVar'
          ExpressionStatement
            BinaryExpression
              ElementAccessExpression
                Identifier: '
        templateArguments'
                NumericLiteral
              EqualsToken
              CallExpression
                PropertyAccessExpression
                  Identifier: ' factory'
                  Identifier: 'createLogicalOr'
                Identifier: '
            tempVar'
                CallExpression
                  PropertyAccessExpression
                    Identifier: '
            factory'
                    Identifier: 'createAssignment'
                  Identifier: '
                tempVar'
                  Identifier: '
                helperCall'
        Block
          ExpressionStatement
            BinaryExpression
              ElementAccessExpression
                Identifier: '
        templateArguments'
                NumericLiteral
              EqualsToken
              Identifier: ' helperCall'
      ReturnStatement
        CallExpression
          PropertyAccessExpression
            Identifier: ' factory'
            Identifier: 'createCallExpression'
          Identifier: 'tag'
          Identifier: ' /*typeArguments*/ undefined'
          Identifier: ' templateArguments'
  FunctionDeclaration
    Identifier: ' createTemplateCooked'
    Parameter
      Identifier: 'factory'
      TypeReference
        Identifier: ' NodeFactory'
    Parameter
      Identifier: ' template'
      UnionType
        TypeReference
          Identifier: ' TemplateHead'
        TypeReference
          Identifier: ' TemplateMiddle'
        TypeReference
          Identifier: ' TemplateTail'
        TypeReference
          Identifier: ' NoSubstitutionTemplateLiteral'
    Block
      ReturnStatement
        ConditionalExpression
          BinaryExpression
            NonNullExpression
              PropertyAccessExpression
                Identifier: ' template'
                Identifier: 'templateFlags'
            AmpersandToken
            PropertyAccessExpression
              Identifier: ' TokenFlags'
              Identifier: 'IsInvalid'
          QuestionToken
          CallExpression
            PropertyAccessExpression
              Identifier: ' factory'
              Identifier: 'createVoidZero'
          ColonToken
          CallExpression
            PropertyAccessExpression
              Identifier: ' factory'
              Identifier: 'createStringLiteral'
            PropertyAccessExpression
              Identifier: 'template'
              Identifier: 'text'
  FunctionDeclaration
    Identifier: ' getRawLiteral'
    Parameter
      Identifier: 'factory'
      TypeReference
        Identifier: ' NodeFactory'
    Parameter
      Identifier: ' node'
      TypeReference
        Identifier: ' TemplateLiteralLikeNode'
    Parameter
      Identifier: ' currentSourceFile'
      TypeReference
        Identifier: ' SourceFile'
    Block
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' text'
            PropertyAccessExpression
              Identifier: ' node'
              Identifier: 'rawText'
      IfStatement
        BinaryExpression
          Identifier: 'text'
          EqualsEqualsEqualsToken
          Identifier: ' undefined'
        Block
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '
        Debug'
                Identifier: 'assertIsDefined'
              Identifier: 'currentSourceFile'
              StringLiteral
          ExpressionStatement
            BinaryExpression
              Identifier: '
        text'
              EqualsToken
              CallExpression
                Identifier: ' getSourceTextOfNodeFromSourceFile'
                Identifier: 'currentSourceFile'
                Identifier: ' node'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' isLast'
                BinaryExpression
                  BinaryExpression
                    PropertyAccessExpression
                      Identifier: ' node'
                      Identifier: 'kind'
                    EqualsEqualsEqualsToken
                    PropertyAccessExpression
                      Identifier: ' SyntaxKind'
                      Identifier: 'NoSubstitutionTemplateLiteral'
                  BarBarToken
                  BinaryExpression
                    PropertyAccessExpression
                      Identifier: ' node'
                      Identifier: 'kind'
                    EqualsEqualsEqualsToken
                    PropertyAccessExpression
                      Identifier: ' SyntaxKind'
                      Identifier: 'TemplateTail'
          ExpressionStatement
            BinaryExpression
              Identifier: '
        text'
              EqualsToken
              CallExpression
                PropertyAccessExpression
                  Identifier: ' text'
                  Identifier: 'substring'
                NumericLiteral
                BinaryExpression
                  PropertyAccessExpression
                    Identifier: ' text'
                    Identifier: 'length'
                  MinusToken
                  ParenthesizedExpression
                    ConditionalExpression
                      Identifier: 'isLast'
                      QuestionToken
                      NumericLiteral
                      ColonToken
                      NumericLiteral
      ExpressionStatement
        BinaryExpression
          Identifier: '

    // Newline normalization:
    // ES6 Spec 11.8.6.1 - Static Semantics of TV's and TRV's
    // <CR><LF> and <CR> LineTerminatorSequences are normalized to <LF> for both TV and TRV.
    text'
          EqualsToken
          CallExpression
            PropertyAccessExpression
              Identifier: ' text'
              Identifier: 'replace'
            RegularExpressionLiteral
            StringLiteral
      ReturnStatement
        CallExpression
          Identifier: ' setTextRange'
          CallExpression
            PropertyAccessExpression
              Identifier: 'factory'
              Identifier: 'createStringLiteral'
            Identifier: 'text'
          Identifier: ' node'
