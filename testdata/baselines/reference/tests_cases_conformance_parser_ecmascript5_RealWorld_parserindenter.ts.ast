SourceFile
  ModuleDeclaration
    Identifier: ' Formatting'
    ModuleBlock
      ClassDeclaration
        ExportKeyword
        Identifier: ' Indenter'
        HeritageClause
          ExpressionWithTypeArguments
            Identifier: ' ILineIndenationResolver'
        PropertyDeclaration
          PrivateKeyword
          Identifier: ' indentationBag'
          TypeReference
            Identifier: ' IndentationBag'
        PropertyDeclaration
          PrivateKeyword
          Identifier: ' scriptBlockBeginLineNumber'
          NumberKeyword
        PropertyDeclaration
          PrivateKeyword
          Identifier: ' offsetIndentationDeltas'
          TypeReference
            Identifier: ' Dictionary_int_int'
        Constructor
          Parameter
            PublicKeyword
            Identifier: ' logger'
            TypeReference
              QualifiedName
                Identifier: ' TypeScript'
                Identifier: 'ILogger'
          Parameter
            PublicKeyword
            Identifier: ' tree'
            TypeReference
              Identifier: ' ParseTree'
          Parameter
            PublicKeyword
            Identifier: ' snapshot'
            TypeReference
              Identifier: ' ITextSnapshot'
          Parameter
            PublicKeyword
            Identifier: ' languageHostIndentation'
            StringKeyword
          Parameter
            PublicKeyword
            Identifier: ' editorOptions'
            TypeReference
              QualifiedName
                Identifier: ' Services'
                Identifier: 'EditorOptions'
          Parameter
            PublicKeyword
            Identifier: ' firstToken'
            TypeReference
              Identifier: ' TokenSpan'
          Parameter
            PublicKeyword
            Identifier: ' smartIndent'
            BooleanKeyword
          Block
            ExpressionStatement
              BinaryExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'indentationBag'
                EqualsToken
                NewExpression
                  Identifier: ' IndentationBag'
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'snapshot'
            ExpressionStatement
              BinaryExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'scriptBlockBeginLineNumber'
                EqualsToken
                PrefixUnaryExpression
                  NumericLiteral
            ExpressionStatement
              BinaryExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'offsetIndentationDeltas'
                EqualsToken
                NewExpression
                  Identifier: ' Dictionary_int_int'
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'tree'
                    Identifier: 'Root'
                  Identifier: 'SetIndentationOverride'
                StringLiteral
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'ApplyScriptBlockIndentation'
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'languageHostIndentation'
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'tree'
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'FillInheritedIndentation'
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'tree'
        MethodDeclaration
          PublicKeyword
          Identifier: ' GetIndentationEdits'
          Parameter
            Identifier: 'token'
            TypeReference
              Identifier: ' TokenSpan'
          Parameter
            Identifier: ' nextToken'
            TypeReference
              Identifier: ' TokenSpan'
          Parameter
            Identifier: ' node'
            TypeReference
              Identifier: ' ParseNode'
          Parameter
            Identifier: ' sameLineIndent'
            BooleanKeyword
          TypeReference
            Identifier: ' List_TextEditInfo'
          Block
            IfStatement
              CallExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'logger'
                  Identifier: 'information'
              Block
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'logger'
                      Identifier: 'log'
                    BinaryExpression
                      BinaryExpression
                        BinaryExpression
                          BinaryExpression
                            BinaryExpression
                              BinaryExpression
                                BinaryExpression
                                  BinaryExpression
                                    BinaryExpression
                                      StringLiteral
                                      PlusToken
                                      StringLiteral
                                    PlusToken
                                    CallExpression
                                      PropertyAccessExpression
                                        PropertyAccessExpression
                                          Identifier: ' token'
                                          Identifier: 'Span'
                                        Identifier: 'startPosition'
                                  PlusToken
                                  StringLiteral
                                PlusToken
                                CallExpression
                                  PropertyAccessExpression
                                    PropertyAccessExpression
                                      Identifier: ' token'
                                      Identifier: 'Span'
                                    Identifier: 'endPosition'
                              PlusToken
                              StringLiteral
                            PlusToken
                            StringLiteral
                          PlusToken
                          ParenthesizedExpression
                            ConditionalExpression
                              BinaryExpression
                                Identifier: 'nextToken'
                                EqualsEqualsToken
                                NullKeyword
                              QuestionToken
                              StringLiteral
                              ColonToken
                              ParenthesizedExpression
                                BinaryExpression
                                  BinaryExpression
                                    CallExpression
                                      PropertyAccessExpression
                                        PropertyAccessExpression
                                          Identifier: 'nextToken'
                                          Identifier: 'Span'
                                        Identifier: 'startPosition'
                                    PlusToken
                                    StringLiteral
                                  PlusToken
                                  CallExpression
                                    PropertyAccessExpression
                                      PropertyAccessExpression
                                        Identifier: ' nextToken'
                                        Identifier: 'Span'
                                      Identifier: 'endPosition'
                        PlusToken
                        StringLiteral
                      PlusToken
                      StringLiteral
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' result'
                  CallExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'GetIndentationEditsWorker'
                    Identifier: 'token'
                    Identifier: ' nextToken'
                    Identifier: ' node'
                    Identifier: ' sameLineIndent'
            IfStatement
              CallExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'logger'
                  Identifier: 'information'
              Block
                ForStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' i'
                      NumericLiteral
                  BinaryExpression
                    Identifier: ' i'
                    LessThanToken
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' result'
                        Identifier: 'count'
                  PostfixUnaryExpression
                    Identifier: ' i'
                  Block
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' edit'
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' result'
                              Identifier: 'get'
                            Identifier: 'i'
                    ExpressionStatement
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'logger'
                          Identifier: 'log'
                        BinaryExpression
                          BinaryExpression
                            BinaryExpression
                              BinaryExpression
                                BinaryExpression
                                  BinaryExpression
                                    StringLiteral
                                    PlusToken
                                    PropertyAccessExpression
                                      Identifier: ' edit'
                                      Identifier: 'position'
                                  PlusToken
                                  StringLiteral
                                PlusToken
                                ParenthesizedExpression
                                  BinaryExpression
                                    PropertyAccessExpression
                                      Identifier: 'edit'
                                      Identifier: 'position'
                                    PlusToken
                                    PropertyAccessExpression
                                      Identifier: ' edit'
                                      Identifier: 'length'
                              PlusToken
                              StringLiteral
                            PlusToken
                            CallExpression
                              PropertyAccessExpression
                                Identifier: ' TypeScript'
                                Identifier: 'stringToLiteral'
                              PropertyAccessExpression
                                Identifier: 'edit'
                                Identifier: 'replaceWith'
                              NumericLiteral
                          PlusToken
                          StringLiteral
            ReturnStatement
              Identifier: ' result'
        MethodDeclaration
          PublicKeyword
          Identifier: ' GetIndentationEditsWorker'
          Parameter
            Identifier: 'token'
            TypeReference
              Identifier: ' TokenSpan'
          Parameter
            Identifier: ' nextToken'
            TypeReference
              Identifier: ' TokenSpan'
          Parameter
            Identifier: ' node'
            TypeReference
              Identifier: ' ParseNode'
          Parameter
            Identifier: ' sameLineIndent'
            BooleanKeyword
          TypeReference
            Identifier: ' List_TextEditInfo'
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' result'
                  NewExpression
                    Identifier: ' List_TextEditInfo'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentationInfo'
                  TypeReference
                    Identifier: ' IndentationInfo'
                  NullKeyword
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'AdjustStartOffsetIfNeeded'
                Identifier: 'token'
                Identifier: ' node'
            IfStatement
              BinaryExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'scriptBlockBeginLineNumber'
                EqualsEqualsToken
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' token'
                    Identifier: 'lineNumber'
              Block
                ReturnStatement
                  Identifier: ' result'
            IfStatement
              BinaryExpression
                PrefixUnaryExpression
                  Identifier: 'sameLineIndent'
                AmpersandAmpersandToken
                CallExpression
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'IsMultiLineString'
                  Identifier: 'token'
              Block
                ReturnStatement
                  Identifier: ' result'
            ExpressionStatement
              BinaryExpression
                Identifier: '

            // Special cases for the tokens that don't show up in the tree, such as curly braces and comments
            indentationInfo'
                EqualsToken
                CallExpression
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'GetSpecialCaseIndentation'
                  Identifier: 'token'
                  Identifier: ' node'
            IfStatement
              BinaryExpression
                Identifier: 'indentationInfo'
                EqualsEqualsToken
                NullKeyword
              Block
                WhileStatement
                  BinaryExpression
                    BinaryExpression
                      PrefixUnaryExpression
                        CallExpression
                          PropertyAccessExpression
                            Identifier: 'node'
                            Identifier: 'CanIndent'
                      AmpersandAmpersandToken
                      BinaryExpression
                        PropertyAccessExpression
                          Identifier: ' node'
                          Identifier: 'Parent'
                        ExclamationEqualsToken
                        NullKeyword
                    AmpersandAmpersandToken
                    BinaryExpression
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: ' token'
                              Identifier: 'Span'
                            Identifier: 'span'
                          Identifier: 'start'
                      EqualsEqualsToken
                      PropertyAccessExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: ' node'
                              Identifier: 'Parent'
                            Identifier: 'AuthorNode'
                          Identifier: 'Details'
                        Identifier: 'StartOffset'
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
                    node'
                      EqualsToken
                      PropertyAccessExpression
                        Identifier: ' node'
                        Identifier: 'Parent'
                IfStatement
                  BinaryExpression
                    CallExpression
                      PropertyAccessExpression
                        Identifier: 'node'
                        Identifier: 'CanIndent'
                    AmpersandAmpersandToken
                    BinaryExpression
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: ' token'
                              Identifier: 'Span'
                            Identifier: 'span'
                          Identifier: 'start'
                      EqualsEqualsToken
                      PropertyAccessExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            Identifier: ' node'
                            Identifier: 'AuthorNode'
                          Identifier: 'Details'
                        Identifier: 'StartOffset'
                  Block
                    ExpressionStatement
                      BinaryExpression
                        Identifier: '
                    indentationInfo'
                        EqualsToken
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' node'
                            Identifier: 'GetEffectiveIndentation'
                          ThisKeyword
                  Block
                    IfStatement
                      BinaryExpression
                        BinaryExpression
                          BinaryExpression
                            PropertyAccessExpression
                              Identifier: 'token'
                              Identifier: 'Token'
                            EqualsEqualsToken
                            PropertyAccessExpression
                              Identifier: ' AuthorTokenKind'
                              Identifier: 'atkIdentifier'
                          AmpersandAmpersandToken
                          BinaryExpression
                            Identifier: ' nextToken'
                            ExclamationEqualsToken
                            NullKeyword
                        AmpersandAmpersandToken
                        BinaryExpression
                          PropertyAccessExpression
                            Identifier: ' nextToken'
                            Identifier: 'Token'
                          EqualsEqualsToken
                          PropertyAccessExpression
                            Identifier: ' AuthorTokenKind'
                            Identifier: 'atkColon'
                      Block
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        // This will make the label on the same level as the surrounding function/block
                        // ex: 
                        // {
                        //      statement;
                        //      label:
                        //          statement;
                        // }
                        indentationInfo'
                            EqualsToken
                            CallExpression
                              PropertyAccessExpression
                                Identifier: ' node'
                                Identifier: 'GetEffectiveChildrenIndentation'
                              ThisKeyword
                      Block
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        //// Move the token the same indentation-delta that moved its indentable parent
                        //// For example:
                        ////    var a,
                        ////        b;
                        //// The declaration 'b' would remain under 'a' even if 'var' got indented.
                        indentationInfo'
                            EqualsToken
                            CallExpression
                              PropertyAccessExpression
                                ThisKeyword
                                Identifier: 'ApplyIndentationDeltaFromParent'
                              Identifier: 'token'
                              Identifier: ' node'
            IfStatement
              BinaryExpression
                Identifier: 'indentationInfo'
                ExclamationEqualsToken
                NullKeyword
              Block
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' edit'
                      CallExpression
                        PropertyAccessExpression
                          ThisKeyword
                          Identifier: 'GetIndentEdit'
                        Identifier: 'indentationInfo'
                        CallExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: ' token'
                              Identifier: 'Span'
                            Identifier: 'startPosition'
                        Identifier: ' sameLineIndent'
                IfStatement
                  BinaryExpression
                    Identifier: 'edit'
                    ExclamationEqualsToken
                    NullKeyword
                  Block
                    ExpressionStatement
                      CallExpression
                        PropertyAccessExpression
                          ThisKeyword
                          Identifier: 'RegisterIndentation'
                        Identifier: 'edit'
                        Identifier: ' sameLineIndent'
                    ExpressionStatement
                      CallExpression
                        PropertyAccessExpression
                          Identifier: '

                    result'
                          Identifier: 'add'
                        Identifier: 'edit'
                    IfStatement
                      BinaryExpression
                        PropertyAccessExpression
                          Identifier: 'token'
                          Identifier: 'Token'
                        EqualsEqualsToken
                        PropertyAccessExpression
                          Identifier: ' AuthorTokenKind'
                          Identifier: 'atkComment'
                      Block
                        VariableStatement
                          VariableDeclarationList
                            VariableDeclaration
                              Identifier: ' commentEdits'
                              CallExpression
                                PropertyAccessExpression
                                  ThisKeyword
                                  Identifier: 'GetCommentIndentationEdits'
                                Identifier: 'token'
                        ExpressionStatement
                          CallExpression
                            PropertyAccessExpression
                              Identifier: '
                        commentEdits'
                              Identifier: 'foreach'
                            ArrowFunction
                              Parameter
                                Identifier: 'item'
                              EqualsGreaterThanToken
                              Block
                                ExpressionStatement
                                  CallExpression
                                    PropertyAccessExpression
                                      Identifier: '
                            result'
                                      Identifier: 'add'
                                    Identifier: 'item'
            ReturnStatement
              Identifier: ' result'
        MethodDeclaration
          PrivateKeyword
          Identifier: ' GetCommentIndentationEdits'
          Parameter
            Identifier: 'token'
            TypeReference
              Identifier: ' TokenSpan'
          TypeReference
            Identifier: ' List_TextEditInfo'
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' result'
                  NewExpression
                    Identifier: ' List_TextEditInfo'
            IfStatement
              BinaryExpression
                PropertyAccessExpression
                  Identifier: 'token'
                  Identifier: 'Token'
                ExclamationEqualsToken
                PropertyAccessExpression
                  Identifier: ' AuthorTokenKind'
                  Identifier: 'atkComment'
              ReturnStatement
                Identifier: ' result'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' commentLastLineNumber'
                  CallExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'snapshot'
                      Identifier: 'GetLineNumberFromPosition'
                    CallExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: 'token'
                          Identifier: 'Span'
                        Identifier: 'endPosition'
            IfStatement
              BinaryExpression
                CallExpression
                  PropertyAccessExpression
                    Identifier: 'token'
                    Identifier: 'lineNumber'
                EqualsEqualsToken
                Identifier: ' commentLastLineNumber'
              ReturnStatement
                Identifier: ' result'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' commentFirstLineIndentationDelta'
                  CallExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'GetIndentationDelta'
                    CallExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: 'token'
                          Identifier: 'Span'
                        Identifier: 'startPosition'
                    NullKeyword
            IfStatement
              BinaryExpression
                Identifier: 'commentFirstLineIndentationDelta'
                ExclamationEqualsToken
                Identifier: ' undefined'
              Block
                ForStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' line'
                      BinaryExpression
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' token'
                            Identifier: 'lineNumber'
                        PlusToken
                        NumericLiteral
                  BinaryExpression
                    Identifier: ' line'
                    LessThanEqualsToken
                    Identifier: ' commentLastLineNumber'
                  PostfixUnaryExpression
                    Identifier: ' line'
                  Block
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' lineStartPosition'
                          CallExpression
                            PropertyAccessExpression
                              CallExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    ThisKeyword
                                    Identifier: 'snapshot'
                                  Identifier: 'GetLineFromLineNumber'
                                Identifier: 'line'
                              Identifier: 'startPosition'
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' lineIndent'
                          CallExpression
                            PropertyAccessExpression
                              ThisKeyword
                              Identifier: 'GetLineIndentationForOffset'
                            Identifier: 'lineStartPosition'
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' commentIndentationInfo'
                          CallExpression
                            PropertyAccessExpression
                              ThisKeyword
                              Identifier: 'ApplyIndentationDelta2'
                            Identifier: 'lineIndent'
                            Identifier: ' commentFirstLineIndentationDelta'
                    IfStatement
                      BinaryExpression
                        Identifier: 'commentIndentationInfo'
                        ExclamationEqualsToken
                        NullKeyword
                      Block
                        VariableStatement
                          VariableDeclarationList
                            VariableDeclaration
                              Identifier: ' tokenStartPosition'
                              BinaryExpression
                                Identifier: ' lineStartPosition'
                                PlusToken
                                PropertyAccessExpression
                                  Identifier: ' lineIndent'
                                  Identifier: 'length'
                        VariableStatement
                          VariableDeclarationList
                            VariableDeclaration
                              Identifier: ' commentIndentationEdit'
                              CallExpression
                                PropertyAccessExpression
                                  ThisKeyword
                                  Identifier: 'GetIndentEdit'
                                Identifier: 'commentIndentationInfo'
                                Identifier: ' tokenStartPosition'
                                FalseKeyword
                        IfStatement
                          BinaryExpression
                            Identifier: 'commentIndentationEdit'
                            ExclamationEqualsToken
                            NullKeyword
                          Block
                            ExpressionStatement
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: '
                            result'
                                  Identifier: 'add'
                                Identifier: 'commentIndentationEdit'
            ReturnStatement
              Identifier: ' result'
        MethodDeclaration
          StaticKeyword
          Identifier: ' GetIndentSizeFromIndentText'
          Parameter
            Identifier: 'indentText'
            StringKeyword
          Parameter
            Identifier: ' editorOptions'
            TypeReference
              QualifiedName
                Identifier: ' Services'
                Identifier: 'EditorOptions'
          NumberKeyword
          Block
            ReturnStatement
              CallExpression
                Identifier: ' GetIndentSizeFromText'
                Identifier: 'indentText'
                Identifier: ' editorOptions'
                FalseKeyword
        MethodDeclaration
          StaticKeyword
          Identifier: ' GetIndentSizeFromText'
          Parameter
            Identifier: 'text'
            StringKeyword
          Parameter
            Identifier: ' editorOptions'
            TypeReference
              QualifiedName
                Identifier: ' Services'
                Identifier: 'EditorOptions'
          Parameter
            Identifier: ' includeNonIndentChars'
            BooleanKeyword
          NumberKeyword
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentSize'
                  NumericLiteral
            ForStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' i'
                  NumericLiteral
              BinaryExpression
                Identifier: ' i'
                LessThanToken
                PropertyAccessExpression
                  Identifier: ' text'
                  Identifier: 'length'
              PostfixUnaryExpression
                Identifier: ' i'
              Block
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' c'
                      CallExpression
                        PropertyAccessExpression
                          Identifier: ' text'
                          Identifier: 'charAt'
                        Identifier: 'i'
                IfStatement
                  BinaryExpression
                    Identifier: 'c'
                    EqualsEqualsToken
                    StringLiteral
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
                    indentSize'
                      EqualsToken
                      BinaryExpression
                        ParenthesizedExpression
                          BinaryExpression
                            Identifier: 'indentSize'
                            PlusToken
                            PropertyAccessExpression
                              Identifier: ' editorOptions'
                              Identifier: 'TabSize'
                        MinusToken
                        ParenthesizedExpression
                          BinaryExpression
                            Identifier: 'indentSize'
                            PercentToken
                            PropertyAccessExpression
                              Identifier: ' editorOptions'
                              Identifier: 'TabSize'
                  IfStatement
                    BinaryExpression
                      Identifier: 'c'
                      EqualsEqualsToken
                      StringLiteral
                    ExpressionStatement
                      BinaryExpression
                        Identifier: '
                    indentSize'
                        PlusEqualsToken
                        NumericLiteral
                    Block
                      IfStatement
                        Identifier: 'includeNonIndentChars'
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        indentSize'
                            PlusEqualsToken
                            NumericLiteral
                        BreakStatement
            ReturnStatement
              Identifier: ' indentSize'
        MethodDeclaration
          PrivateKeyword
          Identifier: ' GetSpecialCaseIndentation'
          Parameter
            Identifier: 'token'
            TypeReference
              Identifier: ' TokenSpan'
          Parameter
            Identifier: ' node'
            TypeReference
              Identifier: ' ParseNode'
          TypeReference
            Identifier: ' IndentationInfo'
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentationInfo'
                  TypeReference
                    Identifier: ' IndentationInfo'
                  NullKeyword
            SwitchStatement
              PropertyAccessExpression
                Identifier: 'token'
                Identifier: 'Token'
              CaseBlock
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorTokenKind'
                    Identifier: 'atkLCurly'
                  ExpressionStatement
                    BinaryExpression
                      Identifier: ' // { is not part of the tree
                    indentationInfo'
                      EqualsToken
                      CallExpression
                        PropertyAccessExpression
                          ThisKeyword
                          Identifier: 'GetSpecialCaseIndentationForLCurly'
                        Identifier: 'node'
                  ReturnStatement
                    Identifier: ' indentationInfo'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorTokenKind'
                    Identifier: 'atkElse'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorTokenKind'
                    Identifier: 'atkRBrack'
                  ExpressionStatement
                    BinaryExpression
                      Identifier: ' // ] is not part of the tree
                    indentationInfo'
                      EqualsToken
                      CallExpression
                        PropertyAccessExpression
                          Identifier: ' node'
                          Identifier: 'GetNodeStartLineIndentation'
                        ThisKeyword
                  ReturnStatement
                    Identifier: ' indentationInfo'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorTokenKind'
                    Identifier: 'atkRCurly'
                  IfStatement
                    BinaryExpression
                      BinaryExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: 'node'
                              Identifier: 'AuthorNode'
                            Identifier: 'Details'
                          Identifier: 'Kind'
                        EqualsEqualsToken
                        PropertyAccessExpression
                          Identifier: ' AuthorParseNodeKind'
                          Identifier: 'apnkBlock'
                      AmpersandAmpersandToken
                      BinaryExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            Identifier: ' node'
                            Identifier: 'AuthorNode'
                          Identifier: 'EdgeLabel'
                        EqualsEqualsToken
                        PropertyAccessExpression
                          Identifier: ' AuthorParseNodeEdge'
                          Identifier: 'apneBody'
                    ExpressionStatement
                      BinaryExpression
                        Identifier: '
                        node'
                        EqualsToken
                        PropertyAccessExpression
                          Identifier: ' node'
                          Identifier: 'Parent'
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
                    indentationInfo'
                      EqualsToken
                      CallExpression
                        PropertyAccessExpression
                          Identifier: ' node'
                          Identifier: 'GetNodeStartLineIndentation'
                        ThisKeyword
                  ReturnStatement
                    Identifier: ' indentationInfo'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorTokenKind'
                    Identifier: 'atkWhile'
                  IfStatement
                    BinaryExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            Identifier: 'node'
                            Identifier: 'AuthorNode'
                          Identifier: 'Details'
                        Identifier: 'Kind'
                      EqualsEqualsToken
                      PropertyAccessExpression
                        Identifier: ' AuthorParseNodeKind'
                        Identifier: 'apnkDoWhile'
                    Block
                      ExpressionStatement
                        BinaryExpression
                          Identifier: '
                        indentationInfo'
                          EqualsToken
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' node'
                              Identifier: 'GetNodeStartLineIndentation'
                            ThisKeyword
                      ReturnStatement
                        Identifier: ' indentationInfo'
                  ReturnStatement
                    NullKeyword
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorTokenKind'
                    Identifier: 'atkSColon'
                  ReturnStatement
                    CallExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'GetSpecialCaseIndentationForSemicolon'
                      Identifier: 'token'
                      Identifier: ' node'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorTokenKind'
                    Identifier: 'atkComment'
                  ReturnStatement
                    CallExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'GetSpecialCaseIndentationForComment'
                      Identifier: 'token'
                      Identifier: ' node'
                DefaultClause
                  ReturnStatement
                    Identifier: ' indentationInfo'
        MethodDeclaration
          PrivateKeyword
          Identifier: ' GetSpecialCaseIndentationForLCurly'
          Parameter
            Identifier: 'node'
            TypeReference
              Identifier: ' ParseNode'
          TypeReference
            Identifier: ' IndentationInfo'
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentationInfo'
                  TypeReference
                    Identifier: ' IndentationInfo'
                  NullKeyword
            IfStatement
              BinaryExpression
                BinaryExpression
                  BinaryExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: 'node'
                          Identifier: 'AuthorNode'
                        Identifier: 'Details'
                      Identifier: 'Kind'
                    EqualsEqualsToken
                    PropertyAccessExpression
                      Identifier: ' AuthorParseNodeKind'
                      Identifier: 'apnkFncDecl'
                  BarBarToken
                  BinaryExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        Identifier: '
                node'
                        Identifier: 'AuthorNode'
                      Identifier: 'EdgeLabel'
                    EqualsEqualsToken
                    PropertyAccessExpression
                      Identifier: ' AuthorParseNodeEdge'
                      Identifier: 'apneThen'
                BarBarToken
                BinaryExpression
                  PropertyAccessExpression
                    PropertyAccessExpression
                      Identifier: ' node'
                      Identifier: 'AuthorNode'
                    Identifier: 'EdgeLabel'
                  EqualsEqualsToken
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeEdge'
                    Identifier: 'apneElse'
              Block
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
                    // flushed with the node (function & if)
                indentationInfo'
                    EqualsToken
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' node'
                        Identifier: 'GetNodeStartLineIndentation'
                      ThisKeyword
                ReturnStatement
                  Identifier: ' indentationInfo'
              IfStatement
                BinaryExpression
                  BinaryExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: 'node'
                          Identifier: 'AuthorNode'
                        Identifier: 'Details'
                      Identifier: 'Kind'
                    EqualsEqualsToken
                    PropertyAccessExpression
                      Identifier: ' AuthorParseNodeKind'
                      Identifier: 'apnkObject'
                  AmpersandAmpersandToken
                  PrefixUnaryExpression
                    CallExpression
                      PropertyAccessExpression
                        Identifier: 'node'
                        Identifier: 'CanIndent'
                Block
                  ReturnStatement
                    NullKeyword
            ExpressionStatement
              BinaryExpression
                Identifier: '

            // effective identation of the block
            indentationInfo'
                EqualsToken
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' node'
                    Identifier: 'GetEffectiveIndentation'
                  ThisKeyword
            ReturnStatement
              Identifier: ' indentationInfo'
        MethodDeclaration
          PrivateKeyword
          Identifier: ' GetSpecialCaseIndentationForSemicolon'
          Parameter
            Identifier: 'token'
            TypeReference
              Identifier: ' TokenSpan'
          Parameter
            Identifier: ' node'
            TypeReference
              Identifier: ' ParseNode'
          TypeReference
            Identifier: ' IndentationInfo'
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentationInfo'
                  TypeReference
                    Identifier: ' IndentationInfo'
                  NullKeyword
            IfStatement
              PropertyAccessExpression
                ThisKeyword
                Identifier: 'smartIndent'
              Block
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
                indentationInfo'
                    EqualsToken
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' node'
                        Identifier: 'GetEffectiveChildrenIndentation'
                      ThisKeyword
                ReturnStatement
                  Identifier: ' indentationInfo'
              Block
                IfStatement
                  BinaryExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: 'node'
                          Identifier: 'AuthorNode'
                        Identifier: 'Details'
                      Identifier: 'Kind'
                    ExclamationEqualsToken
                    PropertyAccessExpression
                      Identifier: ' AuthorParseNodeKind'
                      Identifier: 'apnkFor'
                  Block
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' semiColonStartSpan'
                          NewExpression
                            Identifier: ' Span'
                            CallExpression
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  Identifier: 'token'
                                  Identifier: 'Span'
                                Identifier: 'startPosition'
                            NumericLiteral
                    ExpressionStatement
                      BinaryExpression
                        Identifier: '
                    node'
                        EqualsToken
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' ParseTree'
                            Identifier: 'FindCommonParentNode'
                          Identifier: 'semiColonStartSpan'
                          Identifier: ' semiColonStartSpan'
                          Identifier: ' node'
                    ExpressionStatement
                      BinaryExpression
                        Identifier: '
                    indentationInfo'
                        EqualsToken
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' node'
                            Identifier: 'GetEffectiveChildrenIndentation'
                          ThisKeyword
                    ReturnStatement
                      Identifier: ' indentationInfo'
            ReturnStatement
              NullKeyword
        MethodDeclaration
          PrivateKeyword
          Identifier: ' GetSpecialCaseIndentationForComment'
          Parameter
            Identifier: 'token'
            TypeReference
              Identifier: ' TokenSpan'
          Parameter
            Identifier: ' node'
            TypeReference
              Identifier: ' ParseNode'
          TypeReference
            Identifier: ' IndentationInfo'
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentationInfo'
                  TypeReference
                    Identifier: ' IndentationInfo'
                  NullKeyword
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' twoCharSpan'
                  CallExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        Identifier: ' token'
                        Identifier: 'Span'
                      Identifier: 'Intersection'
                    NewExpression
                      Identifier: ' Span'
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            Identifier: 'token'
                            Identifier: 'Span'
                          Identifier: 'startPosition'
                      NumericLiteral
            IfStatement
              BinaryExpression
                BinaryExpression
                  Identifier: 'twoCharSpan'
                  ExclamationEqualsToken
                  NullKeyword
                AmpersandAmpersandToken
                ParenthesizedExpression
                  BinaryExpression
                    BinaryExpression
                      CallExpression
                        PropertyAccessExpression
                          Identifier: 'twoCharSpan'
                          Identifier: 'GetText'
                      EqualsEqualsToken
                      StringLiteral
                    BarBarToken
                    BinaryExpression
                      CallExpression
                        PropertyAccessExpression
                          Identifier: ' twoCharSpan'
                          Identifier: 'GetText'
                      EqualsEqualsToken
                      StringLiteral
              Block
                WhileStatement
                  BinaryExpression
                    BinaryExpression
                      PropertyAccessExpression
                        Identifier: 'node'
                        Identifier: 'ChildrenIndentationDelta'
                      EqualsEqualsToken
                      NullKeyword
                    AmpersandAmpersandToken
                    BinaryExpression
                      PropertyAccessExpression
                        Identifier: ' node'
                        Identifier: 'Parent'
                      ExclamationEqualsToken
                      NullKeyword
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
                    node'
                      EqualsToken
                      PropertyAccessExpression
                        Identifier: ' node'
                        Identifier: 'Parent'
                IfStatement
                  CallExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'CanIndentComment'
                    Identifier: 'token'
                    Identifier: ' node'
                  Block
                    ExpressionStatement
                      BinaryExpression
                        Identifier: '
                    indentationInfo'
                        EqualsToken
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' node'
                            Identifier: 'GetEffectiveChildrenIndentationForComment'
                          ThisKeyword
                  Block
                    ExpressionStatement
                      BinaryExpression
                        Identifier: '
                    indentationInfo'
                        EqualsToken
                        CallExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'ApplyIndentationDeltaFromParent'
                          Identifier: 'token'
                          Identifier: ' node'
            ReturnStatement
              Identifier: ' indentationInfo'
        MethodDeclaration
          PrivateKeyword
          Identifier: ' CanIndentComment'
          Parameter
            Identifier: 'token'
            TypeReference
              Identifier: ' TokenSpan'
          Parameter
            Identifier: ' node'
            TypeReference
              Identifier: ' ParseNode'
          BooleanKeyword
          Block
            SwitchStatement
              PropertyAccessExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    Identifier: 'node'
                    Identifier: 'AuthorNode'
                  Identifier: 'Details'
                Identifier: 'Kind'
              CaseBlock
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkProg'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkBlock'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkSwitch'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkCase'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkDefaultCase'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkIf'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkFor'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkForIn'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkWhile'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkWith'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkDoWhile'
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkObject'
                  ReturnStatement
                    TrueKeyword
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkFncDecl'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' result'
                        TrueKeyword
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' children'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' ParseNodeExtensions'
                            Identifier: 'FindChildrenWithEdge'
                          Identifier: 'node'
                          PropertyAccessExpression
                            Identifier: ' AuthorParseNodeEdge'
                            Identifier: 'apneArgument'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                    children'
                        Identifier: 'foreach'
                      ArrowFunction
                        Parameter
                          Identifier: 'argumentNode'
                        EqualsGreaterThanToken
                        Block
                          IfStatement
                            BinaryExpression
                              CallExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    Identifier: 'token'
                                    Identifier: 'Span'
                                  Identifier: 'startPosition'
                              LessThanToken
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    Identifier: ' argumentNode'
                                    Identifier: 'AuthorNode'
                                  Identifier: 'Details'
                                Identifier: 'StartOffset'
                            ExpressionStatement
                              BinaryExpression
                                Identifier: '
                            result'
                                EqualsToken
                                FalseKeyword
                  ReturnStatement
                    Identifier: ' result'
            ReturnStatement
              FalseKeyword
        MethodDeclaration
          PrivateKeyword
          Identifier: ' ApplyScriptBlockIndentation'
          Parameter
            Identifier: 'languageHostIndentation'
            StringKeyword
          Parameter
            Identifier: ' tree'
            TypeReference
              Identifier: ' ParseTree'
          VoidKeyword
          Block
            IfStatement
              BinaryExpression
                BinaryExpression
                  Identifier: 'languageHostIndentation'
                  EqualsEqualsToken
                  NullKeyword
                BarBarToken
                BinaryExpression
                  PropertyAccessExpression
                    Identifier: ' tree'
                    Identifier: 'StartNodeSelf'
                  EqualsEqualsToken
                  NullKeyword
              ReturnStatement
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' scriptBlockIndentation'
                  CallExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'ApplyIndentationLevel'
                    Identifier: 'languageHostIndentation'
                    NumericLiteral
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    Identifier: '

            //TypeScript: Projection snapshots not supported

            // Disconnect the sibling node if it belongs to a different script block
            //IProjectionSnapshot projectionSnapshot = this.snapshot as IProjectionSnapshot;
            //if (projectionSnapshot != null)
            //{
            //    // Get script block spans.
            //    foreach (SnapshotSpan sourceSpan in projectionSnapshot.GetSourceSpans())
            //    {
            //        // Map the spans to the JavaScript buffer.
            //        ReadOnlyCollection<Span> spans = projectionSnapshot.MapFromSourceSnapshot(sourceSpan);

            //        Debug.Assert(spans.Count == 1, string.Format(CultureInfo.InvariantCulture, "Unexpected span count of {0}.", spans.Count));

            //        if (spans.Count > 0)
            //        {
            //            Span span = spans.First();

            //            // If the "self" node is the first root-level node in a script block, then remove the start node.
            //            if (span.Contains(tree.StartNodethis.AuthorNode.Details.StartOffset))
            //            {
            //                this.scriptBlockBeginLineNumber = projectionSnapshot.GetLineNumberFromPosition(span.Start);

            //                if (tree.StartNodePreviousSibling.HasValue)
            //                {
            //                    int siblingStartOffset = tree.StartNodePreviousSibling.Value.Details.StartOffset;

            //                    // Don't consider sibling in these cases:
            //                    // 1. The sibling belongs to another script block
            //                    // 2. The sibling is on the same line of the script block
            //                    if (!span.Contains(siblingStartOffset) || projectionSnapshot.GetLineNumberFromPosition(siblingStartOffset) == this.scriptBlockBeginLineNumber)
            //                    {
            //                        tree.StartNodePreviousSibling = null;
            //                    }
            //                }

            //                break;
            //            }
            //        }
            //    }
            //}

            // The root is the program.
            tree'
                    Identifier: 'Root'
                  Identifier: 'SetIndentationOverride'
                Identifier: 'scriptBlockIndentation'
        MethodDeclaration
          PrivateKeyword
          Identifier: ' GetIndentEdit'
          Parameter
            Identifier: 'indentInfo'
            TypeReference
              Identifier: ' IndentationInfo'
          Parameter
            Identifier: ' tokenStartPosition'
            NumberKeyword
          Parameter
            Identifier: ' sameLineIndent'
            BooleanKeyword
          TypeReference
            Identifier: ' TextEditInfo'
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentText'
                  CallExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'ApplyIndentationLevel'
                    PropertyAccessExpression
                      Identifier: 'indentInfo'
                      Identifier: 'Prefix'
                    PropertyAccessExpression
                      Identifier: ' indentInfo'
                      Identifier: 'Level'
            IfStatement
              Identifier: 'sameLineIndent'
              Block
                ReturnStatement
                  NewExpression
                    Identifier: ' TextEditInfo'
                    Identifier: 'tokenStartPosition'
                    NumericLiteral
                    Identifier: ' indentText'
              Block
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' snapshotLine'
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'snapshot'
                          Identifier: 'GetLineFromPosition'
                        Identifier: 'tokenStartPosition'
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' currentIndentSpan'
                      NewExpression
                        Identifier: ' Span'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: 'snapshotLine'
                            Identifier: 'startPosition'
                        BinaryExpression
                          Identifier: ' tokenStartPosition'
                          MinusToken
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' snapshotLine'
                              Identifier: 'startPosition'
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' currentIndentText'
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'snapshot'
                          Identifier: 'GetText'
                        Identifier: 'currentIndentSpan'
                IfStatement
                  BinaryExpression
                    Identifier: 'currentIndentText'
                    ExclamationEqualsEqualsToken
                    Identifier: ' indentText'
                  Block
                    IfStatement
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'logger'
                          Identifier: 'debug'
                      Block
                        ForStatement
                          VariableDeclarationList
                            VariableDeclaration
                              Identifier: ' i'
                              NumericLiteral
                            VariableDeclaration
                              Identifier: ' len'
                              PropertyAccessExpression
                                Identifier: ' currentIndentText'
                                Identifier: 'length'
                          BinaryExpression
                            Identifier: ' i'
                            LessThanToken
                            Identifier: ' len'
                          PostfixUnaryExpression
                            Identifier: ' i'
                          Block
                            VariableStatement
                              VariableDeclarationList
                                VariableDeclaration
                                  Identifier: ' c'
                                  CallExpression
                                    PropertyAccessExpression
                                      Identifier: ' currentIndentText'
                                      Identifier: 'charCodeAt'
                                    Identifier: 'i'
                            IfStatement
                              PrefixUnaryExpression
                                CallExpression
                                  PropertyAccessExpression
                                    Identifier: 'StringUtils'
                                    Identifier: 'IsWhiteSpace'
                                  Identifier: 'c'
                              Block
                                ExpressionStatement
                                  CallExpression
                                    PropertyAccessExpression
                                      Identifier: '
                                Debug'
                                      Identifier: 'Fail'
                                    BinaryExpression
                                      StringLiteral
                                      PlusToken
                                      CallExpression
                                        PropertyAccessExpression
                                          Identifier: ' snapshotLine'
                                          Identifier: 'getText'
                                BreakStatement
                    ReturnStatement
                      NewExpression
                        Identifier: ' TextEditInfo'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: 'currentIndentSpan'
                            Identifier: 'start'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' currentIndentSpan'
                            Identifier: 'length'
                        Identifier: ' indentText'
            ReturnStatement
              NullKeyword
        MethodDeclaration
          PrivateKeyword
          Identifier: ' ApplyIndentationLevel'
          Parameter
            Identifier: 'existingIndentation'
            StringKeyword
          Parameter
            Identifier: ' level'
            NumberKeyword
          StringKeyword
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentSize'
                  PropertyAccessExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'editorOptions'
                    Identifier: 'IndentSize'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' tabSize'
                  PropertyAccessExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'editorOptions'
                    Identifier: 'TabSize'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' convertTabsToSpaces'
                  PropertyAccessExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'editorOptions'
                    Identifier: 'ConvertTabsToSpaces'
            IfStatement
              BinaryExpression
                Identifier: 'level'
                LessThanToken
                NumericLiteral
              Block
                IfStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: 'StringUtils'
                      Identifier: 'IsNullOrEmpty'
                    Identifier: 'existingIndentation'
                  ReturnStatement
                    StringLiteral
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' totalIndent'
                      NumericLiteral
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
                StringUtils'
                      Identifier: 'foreach'
                    Identifier: 'existingIndentation'
                    ArrowFunction
                      Parameter
                        Identifier: 'c'
                      EqualsGreaterThanToken
                      Block
                        IfStatement
                          BinaryExpression
                            Identifier: 'c'
                            EqualsEqualsToken
                            StringLiteral
                          ExpressionStatement
                            BinaryExpression
                              Identifier: '
                        totalIndent'
                              PlusEqualsToken
                              Identifier: ' tabSize'
                          ExpressionStatement
                            PostfixUnaryExpression
                              Identifier: '
                        totalIndent'
                ExpressionStatement
                  BinaryExpression
                    Identifier: '

                totalIndent'
                    PlusEqualsToken
                    BinaryExpression
                      Identifier: ' level'
                      AsteriskToken
                      Identifier: ' indentSize'
                IfStatement
                  BinaryExpression
                    Identifier: 'totalIndent'
                    LessThanToken
                    NumericLiteral
                  ReturnStatement
                    StringLiteral
                  ReturnStatement
                    CallExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'GetIndentString'
                      NullKeyword
                      Identifier: ' totalIndent'
                      Identifier: ' tabSize'
                      Identifier: ' convertTabsToSpaces'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' totalIndentSize'
                  BinaryExpression
                    Identifier: ' level'
                    AsteriskToken
                    Identifier: ' indentSize'
            ReturnStatement
              CallExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'GetIndentString'
                Identifier: 'existingIndentation'
                Identifier: ' totalIndentSize'
                Identifier: ' tabSize'
                Identifier: ' convertTabsToSpaces'
        MethodDeclaration
          PrivateKeyword
          Identifier: ' GetIndentString'
          Parameter
            Identifier: 'prefix'
            StringKeyword
          Parameter
            Identifier: ' totalIndentSize'
            NumberKeyword
          Parameter
            Identifier: ' tabSize'
            NumberKeyword
          Parameter
            Identifier: ' convertTabsToSpaces'
            BooleanKeyword
          StringKeyword
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' tabString'
                  ConditionalExpression
                    Identifier: ' convertTabsToSpaces'
                    QuestionToken
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' StringUtils'
                        Identifier: 'create'
                      StringLiteral
                      Identifier: ' tabSize'
                    ColonToken
                    StringLiteral
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' text'
                  StringLiteral
            IfStatement
              PrefixUnaryExpression
                CallExpression
                  PropertyAccessExpression
                    Identifier: 'StringUtils'
                    Identifier: 'IsNullOrEmpty'
                  Identifier: 'prefix'
              ExpressionStatement
                BinaryExpression
                  Identifier: '
                text'
                  PlusEqualsToken
                  Identifier: ' prefix'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' pos'
                  NumericLiteral
            WhileStatement
              BinaryExpression
                Identifier: 'pos'
                LessThanEqualsToken
                BinaryExpression
                  Identifier: ' totalIndentSize'
                  MinusToken
                  Identifier: ' tabSize'
              Block
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
                text'
                    PlusEqualsToken
                    Identifier: ' tabString'
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
                pos'
                    PlusEqualsToken
                    Identifier: ' tabSize'
            WhileStatement
              BinaryExpression
                Identifier: 'pos'
                LessThanToken
                Identifier: ' totalIndentSize'
              Block
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
                text'
                    PlusEqualsToken
                    StringLiteral
                ExpressionStatement
                  PostfixUnaryExpression
                    Identifier: '
                pos'
            ReturnStatement
              Identifier: ' text'
        MethodDeclaration
          PrivateKeyword
          Identifier: '  ApplyIndentationDeltaFromParent'
          Parameter
            Identifier: 'token'
            TypeReference
              Identifier: ' TokenSpan'
          Parameter
            Identifier: ' node'
            TypeReference
              Identifier: ' ParseNode'
          TypeReference
            Identifier: ' IndentationInfo'
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentationInfo'
                  TypeReference
                    Identifier: ' IndentationInfo'
                  NullKeyword
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentableParent'
                  Identifier: ' node'
            WhileStatement
              BinaryExpression
                BinaryExpression
                  Identifier: 'indentableParent'
                  ExclamationEqualsToken
                  NullKeyword
                AmpersandAmpersandToken
                PrefixUnaryExpression
                  CallExpression
                    PropertyAccessExpression
                      Identifier: 'indentableParent'
                      Identifier: 'CanIndent'
              ExpressionStatement
                BinaryExpression
                  Identifier: '
                indentableParent'
                  EqualsToken
                  PropertyAccessExpression
                    Identifier: ' indentableParent'
                    Identifier: 'Parent'
            IfStatement
              BinaryExpression
                BinaryExpression
                  Identifier: 'indentableParent'
                  ExclamationEqualsToken
                  NullKeyword
                AmpersandAmpersandToken
                BinaryExpression
                  PropertyAccessExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        Identifier: ' indentableParent'
                        Identifier: 'AuthorNode'
                      Identifier: 'Details'
                    Identifier: 'Kind'
                  ExclamationEqualsToken
                  PropertyAccessExpression
                    Identifier: ' AuthorParseNodeKind'
                    Identifier: 'apnkProg'
              Block
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' parentIndentationDeltaSize'
                      CallExpression
                        PropertyAccessExpression
                          ThisKeyword
                          Identifier: 'GetIndentationDelta'
                        PropertyAccessExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: 'indentableParent'
                              Identifier: 'AuthorNode'
                            Identifier: 'Details'
                          Identifier: 'StartOffset'
                        CallExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: ' token'
                              Identifier: 'Span'
                            Identifier: 'startPosition'
                IfStatement
                  BinaryExpression
                    Identifier: 'parentIndentationDeltaSize'
                    ExclamationEqualsEqualsToken
                    Identifier: ' undefined'
                  Block
                    ExpressionStatement
                      BinaryExpression
                        Identifier: '
                    indentationInfo'
                        EqualsToken
                        CallExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'ApplyIndentationDelta1'
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                Identifier: 'token'
                                Identifier: 'Span'
                              Identifier: 'startPosition'
                          Identifier: ' parentIndentationDeltaSize'
            ReturnStatement
              Identifier: ' indentationInfo'
        MethodDeclaration
          PrivateKeyword
          Identifier: ' ApplyIndentationDelta1'
          Parameter
            Identifier: 'tokenStartPosition'
            NumberKeyword
          Parameter
            Identifier: ' delta'
            NumberKeyword
          TypeReference
            Identifier: ' IndentationInfo'
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' snapshotLine'
                  CallExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'snapshot'
                      Identifier: 'GetLineFromPosition'
                    Identifier: 'tokenStartPosition'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' currentIndentSpan'
                  NewExpression
                    Identifier: ' Span'
                    CallExpression
                      PropertyAccessExpression
                        Identifier: 'snapshotLine'
                        Identifier: 'startPosition'
                    BinaryExpression
                      Identifier: ' tokenStartPosition'
                      MinusToken
                      CallExpression
                        PropertyAccessExpression
                          Identifier: ' snapshotLine'
                          Identifier: 'startPosition'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' currentIndent'
                  CallExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'snapshot'
                      Identifier: 'GetText'
                    Identifier: 'currentIndentSpan'
            ReturnStatement
              CallExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'ApplyIndentationDelta2'
                Identifier: 'currentIndent'
                Identifier: ' delta'
        MethodDeclaration
          PrivateKeyword
          Identifier: ' ApplyIndentationDelta2'
          Parameter
            Identifier: 'currentIndent'
            StringKeyword
          Parameter
            Identifier: ' delta'
            NumberKeyword
          TypeReference
            Identifier: ' IndentationInfo'
          Block
            IfStatement
              BinaryExpression
                Identifier: 'delta'
                EqualsEqualsToken
                NumericLiteral
              ReturnStatement
                NullKeyword
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' currentIndentSize'
                  CallExpression
                    PropertyAccessExpression
                      Identifier: ' Indenter'
                      Identifier: 'GetIndentSizeFromIndentText'
                    Identifier: 'currentIndent'
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'editorOptions'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' newIndentSize'
                  BinaryExpression
                    Identifier: ' currentIndentSize'
                    PlusToken
                    Identifier: ' delta'
            IfStatement
              BinaryExpression
                Identifier: 'newIndentSize'
                LessThanToken
                NumericLiteral
              Block
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
                newIndentSize'
                    EqualsToken
                    NumericLiteral
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' newIndent'
                  CallExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'GetIndentString'
                    NullKeyword
                    Identifier: ' newIndentSize'
                    PropertyAccessExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'editorOptions'
                      Identifier: 'TabSize'
                    PropertyAccessExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'editorOptions'
                      Identifier: 'ConvertTabsToSpaces'
            IfStatement
              BinaryExpression
                Identifier: 'newIndent'
                ExclamationEqualsToken
                NullKeyword
              Block
                ReturnStatement
                  NewExpression
                    Identifier: ' IndentationInfo'
                    Identifier: 'newIndent'
                    NumericLiteral
            ReturnStatement
              NullKeyword
        MethodDeclaration
          PrivateKeyword
          Identifier: ' GetIndentationDelta'
          Parameter
            Identifier: 'tokenStartPosition'
            NumberKeyword
          Parameter
            Identifier: ' childTokenStartPosition'
            NumberKeyword
          NumberKeyword
          Block
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  Identifier: '
            Debug'
                  Identifier: 'Assert'
                BinaryExpression
                  Identifier: 'childTokenStartPosition'
                  ExclamationEqualsEqualsToken
                  Identifier: ' undefined'
                StringLiteral
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentationDeltaSize'
                  CallExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'offsetIndentationDeltas'
                      Identifier: 'GetValue'
                    Identifier: 'tokenStartPosition'
            IfStatement
              BinaryExpression
                Identifier: 'indentationDeltaSize'
                EqualsEqualsEqualsToken
                NullKeyword
              Block
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' indentEditInfo'
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'indentationBag'
                          Identifier: 'FindIndent'
                        Identifier: 'tokenStartPosition'
                IfStatement
                  BinaryExpression
                    Identifier: 'indentEditInfo'
                    EqualsEqualsToken
                    NullKeyword
                  ReturnStatement
                    NullKeyword
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' origIndentText'
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'snapshot'
                          Identifier: 'GetText'
                        NewExpression
                          Identifier: ' Span'
                          PropertyAccessExpression
                            Identifier: 'indentEditInfo'
                            Identifier: 'OrigIndentPosition'
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' indentEditInfo'
                              Identifier: 'OrigIndentLength'
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' newIndentText'
                      CallExpression
                        PropertyAccessExpression
                          Identifier: ' indentEditInfo'
                          Identifier: 'Indentation'
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' origIndentSize'
                      CallExpression
                        PropertyAccessExpression
                          Identifier: ' Indenter'
                          Identifier: 'GetIndentSizeFromText'
                        Identifier: 'origIndentText'
                        PropertyAccessExpression
                          ThisKeyword
                          Identifier: 'editorOptions'
                        TrueKeyword
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' newIndentSize'
                      CallExpression
                        PropertyAccessExpression
                          Identifier: ' Indenter'
                          Identifier: 'GetIndentSizeFromIndentText'
                        Identifier: 'newIndentText'
                        PropertyAccessExpression
                          ThisKeyword
                          Identifier: 'editorOptions'
                IfStatement
                  BinaryExpression
                    Identifier: 'childTokenStartPosition'
                    ExclamationEqualsEqualsToken
                    NullKeyword
                  Block
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' childTokenLineStartPosition'
                          CallExpression
                            PropertyAccessExpression
                              CallExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    ThisKeyword
                                    Identifier: 'snapshot'
                                  Identifier: 'GetLineFromPosition'
                                Identifier: 'childTokenStartPosition'
                              Identifier: 'startPosition'
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' childIndentText'
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                ThisKeyword
                                Identifier: 'snapshot'
                              Identifier: 'GetText'
                            NewExpression
                              Identifier: ' Span'
                              Identifier: 'childTokenLineStartPosition'
                              BinaryExpression
                                Identifier: ' childTokenStartPosition'
                                MinusToken
                                Identifier: ' childTokenLineStartPosition'
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' childIndentSize'
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' Indenter'
                              Identifier: 'GetIndentSizeFromIndentText'
                            Identifier: 'childIndentText'
                            PropertyAccessExpression
                              ThisKeyword
                              Identifier: 'editorOptions'
                    IfStatement
                      BinaryExpression
                        Identifier: 'childIndentSize'
                        LessThanToken
                        Identifier: ' origIndentSize'
                      ExpressionStatement
                        BinaryExpression
                          Identifier: '
                        origIndentSize'
                          EqualsToken
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' Indenter'
                              Identifier: 'GetIndentSizeFromIndentText'
                            Identifier: 'origIndentText'
                            PropertyAccessExpression
                              ThisKeyword
                              Identifier: 'editorOptions'
                ExpressionStatement
                  BinaryExpression
                    Identifier: '

                indentationDeltaSize'
                    EqualsToken
                    BinaryExpression
                      Identifier: ' newIndentSize'
                      MinusToken
                      Identifier: ' origIndentSize'
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'offsetIndentationDeltas'
                      Identifier: 'Add'
                    Identifier: 'tokenStartPosition'
                    Identifier: ' indentationDeltaSize'
            ReturnStatement
              Identifier: ' indentationDeltaSize'
        MethodDeclaration
          PrivateKeyword
          Identifier: ' FillInheritedIndentation'
          Parameter
            Identifier: 'tree'
            TypeReference
              Identifier: ' ParseTree'
          VoidKeyword
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' offset'
                  PrefixUnaryExpression
                    NumericLiteral
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentNode'
                  TypeReference
                    Identifier: ' ParseNode'
                  NullKeyword
            IfStatement
              BinaryExpression
                PropertyAccessExpression
                  Identifier: 'tree'
                  Identifier: 'StartNodeSelf'
                ExclamationEqualsToken
                NullKeyword
              Block
                IfStatement
                  BinaryExpression
                    BinaryExpression
                      BinaryExpression
                        PrefixUnaryExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'smartIndent'
                        AmpersandAmpersandToken
                        BinaryExpression
                          PropertyAccessExpression
                            Identifier: ' tree'
                            Identifier: 'StartNodePreviousSibling'
                          ExclamationEqualsEqualsToken
                          NullKeyword
                      AmpersandAmpersandToken
                      BinaryExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: ' tree'
                              Identifier: 'StartNodeSelf'
                            Identifier: 'AuthorNode'
                          Identifier: 'Label'
                        EqualsEqualsToken
                        NumericLiteral
                    AmpersandAmpersandToken
                    BinaryExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: ' tree'
                          Identifier: 'StartNodePreviousSibling'
                        Identifier: 'Label'
                      EqualsEqualsToken
                      NumericLiteral
                  Block
                    ExpressionStatement
                      BinaryExpression
                        Identifier: '
                    indentNode'
                        EqualsToken
                        PropertyAccessExpression
                          Identifier: ' tree'
                          Identifier: 'StartNodeSelf'
                    ExpressionStatement
                      BinaryExpression
                        Identifier: '
                    offset'
                        EqualsToken
                        PropertyAccessExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: ' tree'
                              Identifier: 'StartNodePreviousSibling'
                            Identifier: 'Details'
                          Identifier: 'StartOffset'
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' lineNum'
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                ThisKeyword
                                Identifier: 'snapshot'
                              Identifier: 'GetLineNumberFromPosition'
                            Identifier: 'offset'
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' node'
                          Identifier: ' indentNode'
                    WhileStatement
                      BinaryExpression
                        BinaryExpression
                          PropertyAccessExpression
                            Identifier: 'node'
                            Identifier: 'Parent'
                          ExclamationEqualsToken
                          NullKeyword
                        AmpersandAmpersandToken
                        BinaryExpression
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                ThisKeyword
                                Identifier: 'snapshot'
                              Identifier: 'GetLineNumberFromPosition'
                            PropertyAccessExpression
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    Identifier: 'node'
                                    Identifier: 'Parent'
                                  Identifier: 'AuthorNode'
                                Identifier: 'Details'
                              Identifier: 'StartOffset'
                          EqualsEqualsToken
                          Identifier: ' lineNum'
                      Block
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        node'
                            EqualsToken
                            PropertyAccessExpression
                              Identifier: ' node'
                              Identifier: 'Parent'
                        IfStatement
                          CallExpression
                            PropertyAccessExpression
                              Identifier: 'node'
                              Identifier: 'CanIndent'
                          Block
                            ExpressionStatement
                              BinaryExpression
                                Identifier: '
                            indentNode'
                                EqualsToken
                                Identifier: ' node'
                            ExpressionStatement
                              BinaryExpression
                                PropertyAccessExpression
                                  Identifier: '
                            indentNode'
                                  Identifier: 'IndentationDelta'
                                EqualsToken
                                NumericLiteral
                  Block
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' parent'
                          TypeReference
                            Identifier: ' ParseNode'
                    IfStatement
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'smartIndent'
                      Block
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        // in smartIndent the self node is the parent node since it's the closest node to the new line
                        // ... unless in case if the startNodeSelf represents the firstToken then we need to choose its parent
                        parent'
                            EqualsToken
                            PropertyAccessExpression
                              Identifier: ' tree'
                              Identifier: 'StartNodeSelf'
                        WhileStatement
                          BinaryExpression
                            BinaryExpression
                              Identifier: 'parent'
                              ExclamationEqualsToken
                              NullKeyword
                            AmpersandAmpersandToken
                            BinaryExpression
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    Identifier: ' parent'
                                    Identifier: 'AuthorNode'
                                  Identifier: 'Details'
                                Identifier: 'StartOffset'
                              EqualsEqualsToken
                              CallExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    PropertyAccessExpression
                                      ThisKeyword
                                      Identifier: 'firstToken'
                                    Identifier: 'Span'
                                  Identifier: 'startPosition'
                          ExpressionStatement
                            BinaryExpression
                              Identifier: '
                            parent'
                              EqualsToken
                              PropertyAccessExpression
                                Identifier: ' parent'
                                Identifier: 'Parent'
                      Block
                        VariableStatement
                          VariableDeclarationList
                            VariableDeclaration
                              Identifier: ' startNodeLineNumber'
                              CallExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    ThisKeyword
                                    Identifier: 'snapshot'
                                  Identifier: 'GetLineNumberFromPosition'
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    PropertyAccessExpression
                                      PropertyAccessExpression
                                        Identifier: 'tree'
                                        Identifier: 'StartNodeSelf'
                                      Identifier: 'AuthorNode'
                                    Identifier: 'Details'
                                  Identifier: 'StartOffset'
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        parent'
                            EqualsToken
                            PropertyAccessExpression
                              PropertyAccessExpression
                                Identifier: ' tree'
                                Identifier: 'StartNodeSelf'
                              Identifier: 'Parent'
                        WhileStatement
                          BinaryExpression
                            BinaryExpression
                              Identifier: 'parent'
                              ExclamationEqualsToken
                              NullKeyword
                            AmpersandAmpersandToken
                            BinaryExpression
                              Identifier: '
                                startNodeLineNumber'
                              EqualsEqualsToken
                              CallExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    ThisKeyword
                                    Identifier: 'snapshot'
                                  Identifier: 'GetLineNumberFromPosition'
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    PropertyAccessExpression
                                      Identifier: 'parent'
                                      Identifier: 'AuthorNode'
                                    Identifier: 'Details'
                                  Identifier: 'StartOffset'
                          Block
                            ExpressionStatement
                              BinaryExpression
                                Identifier: '
                            parent'
                                EqualsToken
                                PropertyAccessExpression
                                  Identifier: ' parent'
                                  Identifier: 'Parent'
                    WhileStatement
                      BinaryExpression
                        BinaryExpression
                          Identifier: 'parent'
                          ExclamationEqualsToken
                          NullKeyword
                        AmpersandAmpersandToken
                        PrefixUnaryExpression
                          CallExpression
                            PropertyAccessExpression
                              Identifier: 'parent'
                              Identifier: 'CanIndent'
                      Block
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        parent'
                            EqualsToken
                            PropertyAccessExpression
                              Identifier: ' parent'
                              Identifier: 'Parent'
                    IfStatement
                      BinaryExpression
                        BinaryExpression
                          Identifier: 'parent'
                          ExclamationEqualsToken
                          NullKeyword
                        AmpersandAmpersandToken
                        BinaryExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                Identifier: ' parent'
                                Identifier: 'AuthorNode'
                              Identifier: 'Details'
                            Identifier: 'Kind'
                          ExclamationEqualsToken
                          PropertyAccessExpression
                            Identifier: ' AuthorParseNodeKind'
                            Identifier: 'apnkProg'
                      Block
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        offset'
                            EqualsToken
                            PropertyAccessExpression
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  Identifier: ' parent'
                                  Identifier: 'AuthorNode'
                                Identifier: 'Details'
                              Identifier: 'StartOffset'
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        indentNode'
                            EqualsToken
                            Identifier: ' parent'
            IfStatement
              BinaryExpression
                Identifier: 'indentNode'
                ExclamationEqualsToken
                NullKeyword
              Block
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' indentOverride'
                      CallExpression
                        PropertyAccessExpression
                          ThisKeyword
                          Identifier: 'GetLineIndentationForOffset'
                        Identifier: 'offset'
                IfStatement
                  BinaryExpression
                    BinaryExpression
                      PrefixUnaryExpression
                        PropertyAccessExpression
                          ThisKeyword
                          Identifier: 'smartIndent'
                      AmpersandAmpersandToken
                      BinaryExpression
                        PropertyAccessExpression
                          Identifier: ' tree'
                          Identifier: 'StartNodePreviousSibling'
                        ExclamationEqualsEqualsToken
                        NullKeyword
                    AmpersandAmpersandToken
                    BinaryExpression
                      PropertyAccessExpression
                        Identifier: ' indentNode'
                        Identifier: 'Parent'
                      ExclamationEqualsToken
                      NullKeyword
                  Block
                    ExpressionStatement
                      CallExpression
                        PropertyAccessExpression
                          CallExpression
                            PropertyAccessExpression
                              Identifier: '
                    ParseNodeExtensions'
                              Identifier: 'GetChildren'
                            PropertyAccessExpression
                              Identifier: 'indentNode'
                              Identifier: 'Parent'
                          Identifier: 'foreach'
                        ArrowFunction
                          Parameter
                            Identifier: 'sibling'
                          EqualsGreaterThanToken
                          Block
                            IfStatement
                              BinaryExpression
                                Identifier: 'sibling'
                                ExclamationEqualsEqualsToken
                                Identifier: ' indentNode'
                              Block
                                IfStatement
                                  CallExpression
                                    PropertyAccessExpression
                                      Identifier: 'sibling'
                                      Identifier: 'CanIndent'
                                  ExpressionStatement
                                    CallExpression
                                      PropertyAccessExpression
                                        Identifier: '
                                sibling'
                                        Identifier: 'SetIndentationOverride'
                                      Identifier: 'indentOverride'
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' lastDelta'
                      NumericLiteral
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' lastLine'
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'snapshot'
                          Identifier: 'GetLineNumberFromPosition'
                        PropertyAccessExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: 'indentNode'
                              Identifier: 'AuthorNode'
                            Identifier: 'Details'
                          Identifier: 'StartOffset'
                DoStatement
                  Block
                    VariableStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' currentLine'
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                ThisKeyword
                                Identifier: 'snapshot'
                              Identifier: 'GetLineNumberFromPosition'
                            PropertyAccessExpression
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  Identifier: 'indentNode'
                                  Identifier: 'AuthorNode'
                                Identifier: 'Details'
                              Identifier: 'StartOffset'
                    IfStatement
                      BinaryExpression
                        Identifier: 'lastLine'
                        ExclamationEqualsToken
                        Identifier: ' currentLine'
                      Block
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        lastLine'
                            EqualsToken
                            Identifier: ' currentLine'
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        indentOverride'
                            EqualsToken
                            CallExpression
                              PropertyAccessExpression
                                ThisKeyword
                                Identifier: 'ApplyIndentationLevel'
                              Identifier: 'indentOverride'
                              PrefixUnaryExpression
                                Identifier: 'lastDelta'
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        lastDelta'
                            EqualsToken
                            NumericLiteral
                    IfStatement
                      CallExpression
                        PropertyAccessExpression
                          Identifier: 'indentNode'
                          Identifier: 'CanIndent'
                      Block
                        ExpressionStatement
                          CallExpression
                            PropertyAccessExpression
                              Identifier: '
                        indentNode'
                              Identifier: 'SetIndentationOverride'
                            Identifier: 'indentOverride'
                        ExpressionStatement
                          BinaryExpression
                            Identifier: '
                        lastDelta'
                            EqualsToken
                            PropertyAccessExpression
                              Identifier: ' indentNode'
                              Identifier: 'IndentationDelta'
                    ExpressionStatement
                      BinaryExpression
                        Identifier: '

                    indentNode'
                        EqualsToken
                        PropertyAccessExpression
                          Identifier: ' indentNode'
                          Identifier: 'Parent'
                  BinaryExpression
                    Identifier: 'indentNode'
                    ExclamationEqualsToken
                    NullKeyword
        MethodDeclaration
          PublicKeyword
          Identifier: ' GetLineIndentationForOffset'
          Parameter
            Identifier: 'offset'
            NumberKeyword
          StringKeyword
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentationEdit'
                  TypeReference
                    Identifier: ' IndentationEditInfo'
            ExpressionStatement
              BinaryExpression
                Identifier: '

            // First check if we already have indentation info in our indentation bag
            indentationEdit'
                EqualsToken
                CallExpression
                  PropertyAccessExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'indentationBag'
                    Identifier: 'FindIndent'
                  Identifier: 'offset'
            IfStatement
              BinaryExpression
                Identifier: 'indentationEdit'
                ExclamationEqualsToken
                NullKeyword
              Block
                ReturnStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: ' indentationEdit'
                      Identifier: 'Indentation'
              Block
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' line'
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            ThisKeyword
                            Identifier: 'snapshot'
                          Identifier: 'GetLineFromPosition'
                        Identifier: 'offset'
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' lineText'
                      CallExpression
                        PropertyAccessExpression
                          Identifier: ' line'
                          Identifier: 'getText'
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' index'
                      NumericLiteral
                WhileStatement
                  BinaryExpression
                    BinaryExpression
                      Identifier: 'index'
                      LessThanToken
                      PropertyAccessExpression
                        Identifier: ' lineText'
                        Identifier: 'length'
                    AmpersandAmpersandToken
                    ParenthesizedExpression
                      BinaryExpression
                        BinaryExpression
                          CallExpression
                            PropertyAccessExpression
                              Identifier: 'lineText'
                              Identifier: 'charAt'
                            Identifier: 'index'
                          EqualsEqualsToken
                          StringLiteral
                        BarBarToken
                        BinaryExpression
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' lineText'
                              Identifier: 'charAt'
                            Identifier: 'index'
                          EqualsEqualsToken
                          StringLiteral
                  Block
                    ExpressionStatement
                      PrefixUnaryExpression
                        Identifier: 'index'
                ReturnStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: ' lineText'
                      Identifier: 'substr'
                    NumericLiteral
                    Identifier: ' index'
        MethodDeclaration
          PrivateKeyword
          Identifier: ' RegisterIndentation'
          Parameter
            Identifier: 'indent'
            TypeReference
              Identifier: ' TextEditInfo'
          Parameter
            Identifier: ' sameLineIndent'
            BooleanKeyword
          VoidKeyword
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' indentationInfo'
                  TypeReference
                    Identifier: ' IndentationEditInfo'
                  NullKeyword
            IfStatement
              Identifier: 'sameLineIndent'
              Block
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' lineStartPosition'
                      CallExpression
                        PropertyAccessExpression
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                ThisKeyword
                                Identifier: 'snapshot'
                              Identifier: 'GetLineFromPosition'
                            PropertyAccessExpression
                              Identifier: 'indent'
                              Identifier: 'Position'
                          Identifier: 'startPosition'
                VariableStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' lineIndentLength'
                      BinaryExpression
                        PropertyAccessExpression
                          Identifier: ' indent'
                          Identifier: 'Position'
                        MinusToken
                        Identifier: ' lineStartPosition'
                ExpressionStatement
                  BinaryExpression
                    Identifier: '

                indentationInfo'
                    EqualsToken
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' IndentationEditInfo'
                        Identifier: 'create2'
                      PropertyAccessExpression
                        Identifier: 'indent'
                        Identifier: 'Position'
                      PropertyAccessExpression
                        Identifier: ' indent'
                        Identifier: 'ReplaceWith'
                      Identifier: ' lineStartPosition'
                      Identifier: ' lineIndentLength'
              Block
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
                indentationInfo'
                    EqualsToken
                    NewExpression
                      Identifier: ' IndentationEditInfo'
                      Identifier: 'indent'
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'indentationBag'
                  Identifier: 'AddIndent'
                Identifier: 'indentationInfo'
        MethodDeclaration
          PublicKeyword
          Identifier: ' RegisterIndentation2'
          Parameter
            Identifier: 'position'
            NumberKeyword
          Parameter
            Identifier: ' indent'
            StringKeyword
          VoidKeyword
          Block
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'RegisterIndentation'
                NewExpression
                  Identifier: ' TextEditInfo'
                  Identifier: 'position'
                  NumericLiteral
                  Identifier: ' indent'
                FalseKeyword
        MethodDeclaration
          PrivateKeyword
          Identifier: ' AdjustStartOffsetIfNeeded'
          Parameter
            Identifier: 'token'
            TypeReference
              Identifier: ' TokenSpan'
          Parameter
            Identifier: ' node'
            TypeReference
              Identifier: ' ParseNode'
          VoidKeyword
          Block
            IfStatement
              BinaryExpression
                Identifier: 'token'
                EqualsEqualsToken
                NullKeyword
              ReturnStatement
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' updateStartOffset'
                  FalseKeyword
            SwitchStatement
              PropertyAccessExpression
                Identifier: 'token'
                Identifier: 'Token'
              CaseBlock
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorTokenKind'
                    Identifier: 'atkFunction'
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
                    updateStartOffset'
                      EqualsToken
                      BinaryExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: ' node'
                              Identifier: 'AuthorNode'
                            Identifier: 'Details'
                          Identifier: 'Kind'
                        EqualsEqualsToken
                        PropertyAccessExpression
                          Identifier: ' AuthorParseNodeKind'
                          Identifier: 'apnkFncDecl'
                  BreakStatement
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorTokenKind'
                    Identifier: 'atkLCurly'
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
                    updateStartOffset'
                      EqualsToken
                      BinaryExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: ' node'
                              Identifier: 'AuthorNode'
                            Identifier: 'Details'
                          Identifier: 'Kind'
                        EqualsEqualsToken
                        PropertyAccessExpression
                          Identifier: ' AuthorParseNodeKind'
                          Identifier: 'apnkObject'
                  BreakStatement
                CaseClause
                  PropertyAccessExpression
                    Identifier: ' AuthorTokenKind'
                    Identifier: 'atkLBrack'
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
                    updateStartOffset'
                      EqualsToken
                      BinaryExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: ' node'
                              Identifier: 'AuthorNode'
                            Identifier: 'Details'
                          Identifier: 'Kind'
                        EqualsEqualsToken
                        PropertyAccessExpression
                          Identifier: ' AuthorParseNodeKind'
                          Identifier: 'apnkArray'
                  BreakStatement
            IfStatement
              Identifier: 'updateStartOffset'
              Block
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
                ParseNodeExtensions'
                      Identifier: 'SetNodeSpan'
                    Identifier: 'node'
                    CallExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: ' token'
                          Identifier: 'Span'
                        Identifier: 'startPosition'
                    PropertyAccessExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: ' node'
                          Identifier: 'AuthorNode'
                        Identifier: 'Details'
                      Identifier: 'EndOffset'
        MethodDeclaration
          PrivateKeyword
          Identifier: ' IsMultiLineString'
          Parameter
            Identifier: 'token'
            TypeReference
              Identifier: ' TokenSpan'
          BooleanKeyword
          Block
            ReturnStatement
              BinaryExpression
                BinaryExpression
                  PropertyAccessExpression
                    Identifier: ' token'
                    Identifier: 'tokenID'
                  EqualsEqualsEqualsToken
                  PropertyAccessExpression
                    PropertyAccessExpression
                      Identifier: ' TypeScript'
                      Identifier: 'TokenID'
                    Identifier: 'StringLiteral'
                AmpersandAmpersandToken
                BinaryExpression
                  CallExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'snapshot'
                      Identifier: 'GetLineNumberFromPosition'
                    CallExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: 'token'
                          Identifier: 'Span'
                        Identifier: 'endPosition'
                  GreaterThanToken
                  CallExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        ThisKeyword
                        Identifier: 'snapshot'
                      Identifier: 'GetLineNumberFromPosition'
                    CallExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: 'token'
                          Identifier: 'Span'
                        Identifier: 'startPosition'
