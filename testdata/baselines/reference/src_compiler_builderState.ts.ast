SourceFile
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: '
    arrayFrom'
        ImportSpecifier
          Identifier: '
    CancellationToken'
        ImportSpecifier
          Identifier: '
    CompilerOptions'
        ImportSpecifier
          Identifier: '
    computeSignatureWithDiagnostics'
        ImportSpecifier
          Identifier: '
    CustomTransformers'
        ImportSpecifier
          Identifier: '
    Debug'
        ImportSpecifier
          Identifier: '
    EmitOnly'
        ImportSpecifier
          Identifier: '
    EmitOutput'
        ImportSpecifier
          Identifier: '
    emptyArray'
        ImportSpecifier
          Identifier: '
    GetCanonicalFileName'
        ImportSpecifier
          Identifier: '
    getDirectoryPath'
        ImportSpecifier
          Identifier: '
    getIsolatedModules'
        ImportSpecifier
          Identifier: '
    getSourceFileOfNode'
        ImportSpecifier
          Identifier: '
    HostForComputeHash'
        ImportSpecifier
          Identifier: '
    isDeclarationFileName'
        ImportSpecifier
          Identifier: '
    isExternalOrCommonJsModule'
        ImportSpecifier
          Identifier: '
    isGlobalScopeAugmentation'
        ImportSpecifier
          Identifier: '
    isJsonSourceFile'
        ImportSpecifier
          Identifier: '
    isModuleWithStringLiteralName'
        ImportSpecifier
          Identifier: '
    isStringLiteral'
        ImportSpecifier
          Identifier: '
    mapDefined'
        ImportSpecifier
          Identifier: '
    mapDefinedIterator'
        ImportSpecifier
          Identifier: '
    ModuleDeclaration'
        ImportSpecifier
          Identifier: '
    ModuleKind'
        ImportSpecifier
          Identifier: '
    OutputFile'
        ImportSpecifier
          Identifier: '
    Path'
        ImportSpecifier
          Identifier: '
    Program'
        ImportSpecifier
          Identifier: '
    ResolutionMode'
        ImportSpecifier
          Identifier: '
    some'
        ImportSpecifier
          Identifier: '
    SourceFile'
        ImportSpecifier
          Identifier: '
    StringLiteralLike'
        ImportSpecifier
          Identifier: '
    Symbol'
        ImportSpecifier
          Identifier: '
    toPath'
        ImportSpecifier
          Identifier: '
    TypeChecker'
    StringLiteral
  FunctionDeclaration
    ExportKeyword
    Identifier: ' getFileEmitOutput'
    Parameter
      Identifier: '
    program'
      TypeReference
        Identifier: ' Program'
    Parameter
      Identifier: '
    sourceFile'
      TypeReference
        Identifier: ' SourceFile'
    Parameter
      Identifier: '
    emitOnlyDtsFiles'
      BooleanKeyword
    Parameter
      Identifier: '
    cancellationToken'
      QuestionToken
      TypeReference
        Identifier: ' CancellationToken'
    Parameter
      Identifier: '
    customTransformers'
      QuestionToken
      TypeReference
        Identifier: ' CustomTransformers'
    Parameter
      Identifier: '
    forceDtsEmit'
      QuestionToken
      BooleanKeyword
    TypeReference
      Identifier: ' EmitOutput'
    Block
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' outputFiles'
            ArrayType
              TypeReference
                Identifier: ' OutputFile'
            ArrayLiteralExpression
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            ObjectBindingPattern
              BindingElement
                Identifier: ' emitSkipped'
              BindingElement
                Identifier: ' diagnostics'
            CallExpression
              PropertyAccessExpression
                Identifier: ' program'
                Identifier: 'emit'
              Identifier: 'sourceFile'
              Identifier: ' writeFile'
              Identifier: ' cancellationToken'
              Identifier: ' emitOnlyDtsFiles'
              Identifier: ' customTransformers'
              Identifier: ' forceDtsEmit'
      ReturnStatement
        ObjectLiteralExpression
          ShorthandPropertyAssignment
            Identifier: ' outputFiles'
          ShorthandPropertyAssignment
            Identifier: ' emitSkipped'
          ShorthandPropertyAssignment
            Identifier: ' diagnostics'
      FunctionDeclaration
        Identifier: ' writeFile'
        Parameter
          Identifier: 'fileName'
          StringKeyword
        Parameter
          Identifier: ' text'
          StringKeyword
        Parameter
          Identifier: ' writeByteOrderMark'
          BooleanKeyword
        Block
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '
        outputFiles'
                Identifier: 'push'
              ObjectLiteralExpression
                PropertyAssignment
                  Identifier: ' name'
                  Identifier: ' fileName'
                ShorthandPropertyAssignment
                  Identifier: ' writeByteOrderMark'
                ShorthandPropertyAssignment
                  Identifier: ' text'
  EnumDeclaration
    ExportKeyword
    Identifier: ' SignatureInfo'
    EnumMember
      Identifier: '
    ComputedDts'
    EnumMember
      Identifier: '
    StoredSignatureAtEmit'
    EnumMember
      Identifier: '
    UsedVersion'
  InterfaceDeclaration
    ExportKeyword
    Identifier: ' BuilderState'
    PropertySignature
      Identifier: '
    /**
     * Information of the file eg. its version, signature etc
     */
    fileInfos'
      TypeReference
        Identifier: ' Map'
        TypeReference
          Identifier: 'Path'
        TypeReference
          QualifiedName
            Identifier: ' BuilderState'
            Identifier: 'FileInfo'
    PropertySignature
      ReadonlyKeyword
      Identifier: ' referencedMap'
      QuestionToken
      UnionType
        TypeReference
          QualifiedName
            Identifier: ' BuilderState'
            Identifier: 'ReadonlyManyToManyPathMap'
        UndefinedKeyword
    PropertySignature
      Identifier: '
    /**
     * true if file version is used as signature
     * This helps in delaying the calculation of the d.ts hash as version for the file till reasonable time
     */
    useFileVersionAsSignature'
      QuestionToken
      BooleanKeyword
    PropertySignature
      Identifier: '
    /**
     * Map of files that have already called update signature.
     * That means hence forth these files are assumed to have
     * no change in their signature for this version of the program
     */
    hasCalledUpdateShapeSignature'
      QuestionToken
      TypeReference
        Identifier: ' Set'
        TypeReference
          Identifier: 'Path'
    PropertySignature
      Identifier: '
    /**
     * Stores signatures before before the update till affected file is committed
     */
    oldSignatures'
      QuestionToken
      TypeReference
        Identifier: ' Map'
        TypeReference
          Identifier: 'Path'
        UnionType
          StringKeyword
          LiteralType
            FalseKeyword
    PropertySignature
      Identifier: '
    /**
     * Cache of all files excluding default library file for the current program
     */
    allFilesExcludingDefaultLibraryFile'
      QuestionToken
      TypeOperator
        ArrayType
          TypeReference
            Identifier: ' SourceFile'
    PropertySignature
      Identifier: '
    /**
     * Cache of all the file names
     */
    allFileNames'
      QuestionToken
      TypeOperator
        ArrayType
          StringKeyword
    PropertySignature
      Identifier: '
    /** Information about the signature computation - test only */
    signatureInfo'
      QuestionToken
      TypeReference
        Identifier: ' Map'
        TypeReference
          Identifier: 'Path'
        TypeReference
          Identifier: ' SignatureInfo'
  ModuleDeclaration
    ExportKeyword
    Identifier: ' BuilderState'
    ModuleBlock
      InterfaceDeclaration
        ExportKeyword
        Identifier: ' FileInfo'
        PropertySignature
          ReadonlyKeyword
          Identifier: ' version'
          StringKeyword
        PropertySignature
          Identifier: '
        signature'
          UnionType
            StringKeyword
            UndefinedKeyword
        PropertySignature
          Identifier: '
        affectsGlobalScope'
          UnionType
            LiteralType
              TrueKeyword
            UndefinedKeyword
        PropertySignature
          Identifier: '
        impliedFormat'
          TypeReference
            Identifier: ' ResolutionMode'
      InterfaceDeclaration
        ExportKeyword
        Identifier: ' ReadonlyManyToManyPathMap'
        MethodSignature
          Identifier: '
        getKeys'
          Parameter
            Identifier: 'v'
            TypeReference
              Identifier: ' Path'
          UnionType
            TypeReference
              Identifier: ' ReadonlySet'
              TypeReference
                Identifier: 'Path'
            UndefinedKeyword
        MethodSignature
          Identifier: '
        getValues'
          Parameter
            Identifier: 'k'
            TypeReference
              Identifier: ' Path'
          UnionType
            TypeReference
              Identifier: ' ReadonlySet'
              TypeReference
                Identifier: 'Path'
            UndefinedKeyword
        MethodSignature
          Identifier: '
        keys'
          TypeReference
            Identifier: ' IterableIterator'
            TypeReference
              Identifier: 'Path'
        MethodSignature
          Identifier: '
        size'
          NumberKeyword
      InterfaceDeclaration
        ExportKeyword
        Identifier: ' ManyToManyPathMap'
        HeritageClause
          ExpressionWithTypeArguments
            Identifier: ' ReadonlyManyToManyPathMap'
        MethodSignature
          Identifier: '
        deleteKey'
          Parameter
            Identifier: 'k'
            TypeReference
              Identifier: ' Path'
          BooleanKeyword
        MethodSignature
          Identifier: '
        set'
          Parameter
            Identifier: 'k'
            TypeReference
              Identifier: ' Path'
          Parameter
            Identifier: ' v'
            TypeReference
              Identifier: ' ReadonlySet'
              TypeReference
                Identifier: 'Path'
          VoidKeyword
      FunctionDeclaration
        ExportKeyword
        Identifier: ' createManyToManyPathMap'
        TypeReference
          Identifier: ' ManyToManyPathMap'
        Block
          FunctionDeclaration
            Identifier: ' create'
            Parameter
              Identifier: 'forward'
              TypeReference
                Identifier: ' Map'
                TypeReference
                  Identifier: 'Path'
                TypeReference
                  Identifier: ' ReadonlySet'
                  TypeReference
                    Identifier: 'Path'
            Parameter
              Identifier: ' reverse'
              TypeReference
                Identifier: ' Map'
                TypeReference
                  Identifier: 'Path'
                TypeReference
                  Identifier: ' Set'
                  TypeReference
                    Identifier: 'Path'
            Parameter
              Identifier: ' deleted'
              UnionType
                TypeReference
                  Identifier: ' Set'
                  TypeReference
                    Identifier: 'Path'
                UndefinedKeyword
            TypeReference
              Identifier: ' ManyToManyPathMap'
            Block
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' map'
                    TypeReference
                      Identifier: ' ManyToManyPathMap'
                    ObjectLiteralExpression
                      PropertyAssignment
                        Identifier: '
                getKeys'
                        ArrowFunction
                          Parameter
                            Identifier: ' v'
                          EqualsGreaterThanToken
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' reverse'
                              Identifier: 'get'
                            Identifier: 'v'
                      PropertyAssignment
                        Identifier: '
                getValues'
                        ArrowFunction
                          Parameter
                            Identifier: ' k'
                          EqualsGreaterThanToken
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' forward'
                              Identifier: 'get'
                            Identifier: 'k'
                      PropertyAssignment
                        Identifier: '
                keys'
                        ArrowFunction
                          EqualsGreaterThanToken
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' forward'
                              Identifier: 'keys'
                      PropertyAssignment
                        Identifier: '
                size'
                        ArrowFunction
                          EqualsGreaterThanToken
                          PropertyAccessExpression
                            Identifier: ' forward'
                            Identifier: 'size'
                      PropertyAssignment
                        Identifier: '

                deleteKey'
                        ArrowFunction
                          Parameter
                            Identifier: ' k'
                          EqualsGreaterThanToken
                          Block
                            ExpressionStatement
                              CallExpression
                                PropertyAccessExpression
                                  ParenthesizedExpression
                                    BinaryExpression
                                      Identifier: 'deleted'
                                      BarBarEqualsToken
                                      NewExpression
                                        Identifier: ' Set'
                                        TypeReference
                                          Identifier: 'Path'
                                  Identifier: 'add'
                                Identifier: 'k'
                            VariableStatement
                              VariableDeclarationList
                                VariableDeclaration
                                  Identifier: ' set'
                                  CallExpression
                                    PropertyAccessExpression
                                      Identifier: ' forward'
                                      Identifier: 'get'
                                    Identifier: 'k'
                            IfStatement
                              PrefixUnaryExpression
                                Identifier: 'set'
                              Block
                                ReturnStatement
                                  FalseKeyword
                            ExpressionStatement
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: '

                    set'
                                  Identifier: 'forEach'
                                ArrowFunction
                                  Parameter
                                    Identifier: 'v'
                                  EqualsGreaterThanToken
                                  CallExpression
                                    Identifier: ' deleteFromMultimap'
                                    Identifier: 'reverse'
                                    Identifier: ' v'
                                    Identifier: ' k'
                            ExpressionStatement
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: '
                    forward'
                                  Identifier: 'delete'
                                Identifier: 'k'
                            ReturnStatement
                              TrueKeyword
                      PropertyAssignment
                        Identifier: '
                set'
                        ArrowFunction
                          Parameter
                            Identifier: 'k'
                          Parameter
                            Identifier: ' vSet'
                          EqualsGreaterThanToken
                          Block
                            ExpressionStatement
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: '
                    deleted'
                                  QuestionDotToken
                                  Identifier: 'delete'
                                Identifier: 'k'
                            VariableStatement
                              VariableDeclarationList
                                VariableDeclaration
                                  Identifier: ' existingVSet'
                                  CallExpression
                                    PropertyAccessExpression
                                      Identifier: ' forward'
                                      Identifier: 'get'
                                    Identifier: 'k'
                            ExpressionStatement
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: '
                    forward'
                                  Identifier: 'set'
                                Identifier: 'k'
                                Identifier: ' vSet'
                            ExpressionStatement
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: '

                    existingVSet'
                                  QuestionDotToken
                                  Identifier: 'forEach'
                                ArrowFunction
                                  Parameter
                                    Identifier: 'v'
                                  EqualsGreaterThanToken
                                  Block
                                    IfStatement
                                      PrefixUnaryExpression
                                        CallExpression
                                          PropertyAccessExpression
                                            Identifier: 'vSet'
                                            Identifier: 'has'
                                          Identifier: 'v'
                                      Block
                                        ExpressionStatement
                                          CallExpression
                                            Identifier: '
                            deleteFromMultimap'
                                            Identifier: 'reverse'
                                            Identifier: ' v'
                                            Identifier: ' k'
                            ExpressionStatement
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: '

                    vSet'
                                  Identifier: 'forEach'
                                ArrowFunction
                                  Parameter
                                    Identifier: 'v'
                                  EqualsGreaterThanToken
                                  Block
                                    IfStatement
                                      PrefixUnaryExpression
                                        CallExpression
                                          PropertyAccessExpression
                                            Identifier: 'existingVSet'
                                            QuestionDotToken
                                            Identifier: 'has'
                                          Identifier: 'v'
                                      Block
                                        ExpressionStatement
                                          CallExpression
                                            Identifier: '
                            addToMultimap'
                                            Identifier: 'reverse'
                                            Identifier: ' v'
                                            Identifier: ' k'
                            ReturnStatement
                              Identifier: ' map'
              ReturnStatement
                Identifier: ' map'
          ReturnStatement
            CallExpression
              Identifier: ' create'
              NewExpression
                Identifier: ' Map'
                TypeReference
                  Identifier: 'Path'
                TypeReference
                  Identifier: ' Set'
                  TypeReference
                    Identifier: 'Path'
              NewExpression
                Identifier: ' Map'
                TypeReference
                  Identifier: 'Path'
                TypeReference
                  Identifier: ' Set'
                  TypeReference
                    Identifier: 'Path'
              Identifier: ' /*deleted*/ undefined'
      FunctionDeclaration
        Identifier: ' addToMultimap'
        TypeParameter
          Identifier: 'K'
        TypeParameter
          Identifier: ' V'
        Parameter
          Identifier: 'map'
          TypeReference
            Identifier: ' Map'
            TypeReference
              Identifier: 'K'
            TypeReference
              Identifier: ' Set'
              TypeReference
                Identifier: 'V'
        Parameter
          Identifier: ' k'
          TypeReference
            Identifier: ' K'
        Parameter
          Identifier: ' v'
          TypeReference
            Identifier: ' V'
        VoidKeyword
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' set'
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' map'
                    Identifier: 'get'
                  Identifier: 'k'
          IfStatement
            PrefixUnaryExpression
              Identifier: 'set'
            Block
              ExpressionStatement
                BinaryExpression
                  Identifier: '
            set'
                  EqualsToken
                  NewExpression
                    Identifier: ' Set'
                    TypeReference
                      Identifier: 'V'
              ExpressionStatement
                CallExpression
                  PropertyAccessExpression
                    Identifier: '
            map'
                    Identifier: 'set'
                  Identifier: 'k'
                  Identifier: ' set'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '
        set'
                Identifier: 'add'
              Identifier: 'v'
      FunctionDeclaration
        Identifier: ' deleteFromMultimap'
        TypeParameter
          Identifier: 'K'
        TypeParameter
          Identifier: ' V'
        Parameter
          Identifier: 'map'
          TypeReference
            Identifier: ' Map'
            TypeReference
              Identifier: 'K'
            TypeReference
              Identifier: ' Set'
              TypeReference
                Identifier: 'V'
        Parameter
          Identifier: ' k'
          TypeReference
            Identifier: ' K'
        Parameter
          Identifier: ' v'
          TypeReference
            Identifier: ' V'
        BooleanKeyword
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' set'
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' map'
                    Identifier: 'get'
                  Identifier: 'k'
          IfStatement
            CallExpression
              PropertyAccessExpression
                Identifier: 'set'
                QuestionDotToken
                Identifier: 'delete'
              Identifier: 'v'
            Block
              IfStatement
                PrefixUnaryExpression
                  PropertyAccessExpression
                    Identifier: 'set'
                    Identifier: 'size'
                Block
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                map'
                        Identifier: 'delete'
                      Identifier: 'k'
              ReturnStatement
                TrueKeyword
          ReturnStatement
            FalseKeyword
      FunctionDeclaration
        Identifier: ' getReferencedFilesFromImportedModuleSymbol'
        Parameter
          Identifier: 'symbol'
          TypeReference
            Identifier: ' Symbol'
        ArrayType
          TypeReference
            Identifier: ' Path'
        Block
          ReturnStatement
            CallExpression
              Identifier: ' mapDefined'
              PropertyAccessExpression
                Identifier: 'symbol'
                Identifier: 'declarations'
              ArrowFunction
                Parameter
                  Identifier: ' declaration'
                EqualsGreaterThanToken
                PropertyAccessExpression
                  CallExpression
                    Identifier: ' getSourceFileOfNode'
                    Identifier: 'declaration'
                  QuestionDotToken
                  Identifier: 'resolvedPath'
      FunctionDeclaration
        Identifier: ' getReferencedFilesFromImportLiteral'
        Parameter
          Identifier: 'checker'
          TypeReference
            Identifier: ' TypeChecker'
        Parameter
          Identifier: ' importName'
          TypeReference
            Identifier: ' StringLiteralLike'
        UnionType
          ArrayType
            TypeReference
              Identifier: ' Path'
          UndefinedKeyword
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' symbol'
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' checker'
                    Identifier: 'getSymbolAtLocation'
                  Identifier: 'importName'
          ReturnStatement
            BinaryExpression
              Identifier: ' symbol'
              AmpersandAmpersandToken
              CallExpression
                Identifier: ' getReferencedFilesFromImportedModuleSymbol'
                Identifier: 'symbol'
      FunctionDeclaration
        Identifier: ' getReferencedFileFromFileName'
        Parameter
          Identifier: 'program'
          TypeReference
            Identifier: ' Program'
        Parameter
          Identifier: ' fileName'
          StringKeyword
        Parameter
          Identifier: ' sourceFileDirectory'
          TypeReference
            Identifier: ' Path'
        Parameter
          Identifier: ' getCanonicalFileName'
          TypeReference
            Identifier: ' GetCanonicalFileName'
        TypeReference
          Identifier: ' Path'
        Block
          ReturnStatement
            CallExpression
              Identifier: ' toPath'
              BinaryExpression
                CallExpression
                  PropertyAccessExpression
                    Identifier: 'program'
                    Identifier: 'getProjectReferenceRedirect'
                  Identifier: 'fileName'
                BarBarToken
                Identifier: ' fileName'
              Identifier: ' sourceFileDirectory'
              Identifier: ' getCanonicalFileName'
      FunctionDeclaration
        Identifier: ' getReferencedFiles'
        Parameter
          Identifier: 'program'
          TypeReference
            Identifier: ' Program'
        Parameter
          Identifier: ' sourceFile'
          TypeReference
            Identifier: ' SourceFile'
        Parameter
          Identifier: ' getCanonicalFileName'
          TypeReference
            Identifier: ' GetCanonicalFileName'
        UnionType
          TypeReference
            Identifier: ' Set'
            TypeReference
              Identifier: 'Path'
          UndefinedKeyword
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' referencedFiles'
                UnionType
                  TypeReference
                    Identifier: ' Set'
                    TypeReference
                      Identifier: 'Path'
                  UndefinedKeyword
          IfStatement
            BinaryExpression
              PropertyAccessExpression
                Identifier: 'sourceFile'
                Identifier: 'imports'
              AmpersandAmpersandToken
              BinaryExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    Identifier: ' sourceFile'
                    Identifier: 'imports'
                  Identifier: 'length'
                GreaterThanToken
                NumericLiteral
            Block
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' checker'
                    TypeReference
                      Identifier: ' TypeChecker'
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' program'
                        Identifier: 'getTypeChecker'
              ForOfStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' importName'
                PropertyAccessExpression
                  Identifier: ' sourceFile'
                  Identifier: 'imports'
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' declarationSourceFilePaths'
                        CallExpression
                          Identifier: ' getReferencedFilesFromImportLiteral'
                          Identifier: 'checker'
                          Identifier: ' importName'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                declarationSourceFilePaths'
                        QuestionDotToken
                        Identifier: 'forEach'
                      Identifier: 'addReferencedFile'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' sourceFileDirectory'
                CallExpression
                  Identifier: ' getDirectoryPath'
                  PropertyAccessExpression
                    Identifier: 'sourceFile'
                    Identifier: 'resolvedPath'
          IfStatement
            BinaryExpression
              PropertyAccessExpression
                Identifier: 'sourceFile'
                Identifier: 'referencedFiles'
              AmpersandAmpersandToken
              BinaryExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    Identifier: ' sourceFile'
                    Identifier: 'referencedFiles'
                  Identifier: 'length'
                GreaterThanToken
                NumericLiteral
            Block
              ForOfStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' referencedFile'
                PropertyAccessExpression
                  Identifier: ' sourceFile'
                  Identifier: 'referencedFiles'
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' referencedPath'
                        CallExpression
                          Identifier: ' getReferencedFileFromFileName'
                          Identifier: 'program'
                          PropertyAccessExpression
                            Identifier: ' referencedFile'
                            Identifier: 'fileName'
                          Identifier: ' sourceFileDirectory'
                          Identifier: ' getCanonicalFileName'
                  ExpressionStatement
                    CallExpression
                      Identifier: '
                addReferencedFile'
                      Identifier: 'referencedPath'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '

        // Handle type reference directives
        program'
                Identifier: 'forEachResolvedTypeReferenceDirective'
              ArrowFunction
                Parameter
                  ObjectBindingPattern
                    BindingElement
                      Identifier: ' resolvedTypeReferenceDirective'
                EqualsGreaterThanToken
                Block
                  IfStatement
                    PrefixUnaryExpression
                      Identifier: 'resolvedTypeReferenceDirective'
                    Block
                      ReturnStatement
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' fileName'
                        NonNullExpression
                          PropertyAccessExpression
                            Identifier: ' resolvedTypeReferenceDirective'
                            Identifier: 'resolvedFileName'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' typeFilePath'
                        CallExpression
                          Identifier: ' getReferencedFileFromFileName'
                          Identifier: 'program'
                          Identifier: ' fileName'
                          Identifier: ' sourceFileDirectory'
                          Identifier: ' getCanonicalFileName'
                  ExpressionStatement
                    CallExpression
                      Identifier: '
            addReferencedFile'
                      Identifier: 'typeFilePath'
              Identifier: ' sourceFile'
          IfStatement
            PropertyAccessExpression
              PropertyAccessExpression
                Identifier: 'sourceFile'
                Identifier: 'moduleAugmentations'
              Identifier: 'length'
            Block
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' checker'
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' program'
                        Identifier: 'getTypeChecker'
              ForOfStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' moduleName'
                PropertyAccessExpression
                  Identifier: ' sourceFile'
                  Identifier: 'moduleAugmentations'
                Block
                  IfStatement
                    PrefixUnaryExpression
                      CallExpression
                        Identifier: 'isStringLiteral'
                        Identifier: 'moduleName'
                    ContinueStatement
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' symbol'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' checker'
                            Identifier: 'getSymbolAtLocation'
                          Identifier: 'moduleName'
                  IfStatement
                    PrefixUnaryExpression
                      Identifier: 'symbol'
                    ContinueStatement
                  ExpressionStatement
                    CallExpression
                      Identifier: '

                // Add any file other than our own as reference
                addReferenceFromAmbientModule'
                      Identifier: 'symbol'
          ForOfStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' ambientModule'
            CallExpression
              PropertyAccessExpression
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' program'
                    Identifier: 'getTypeChecker'
                Identifier: 'getAmbientModules'
            Block
              IfStatement
                BinaryExpression
                  PropertyAccessExpression
                    Identifier: 'ambientModule'
                    Identifier: 'declarations'
                  AmpersandAmpersandToken
                  BinaryExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        Identifier: ' ambientModule'
                        Identifier: 'declarations'
                      Identifier: 'length'
                    GreaterThanToken
                    NumericLiteral
                Block
                  ExpressionStatement
                    CallExpression
                      Identifier: '
                addReferenceFromAmbientModule'
                      Identifier: 'ambientModule'
          ReturnStatement
            Identifier: ' referencedFiles'
          FunctionDeclaration
            Identifier: ' addReferenceFromAmbientModule'
            Parameter
              Identifier: 'symbol'
              TypeReference
                Identifier: ' Symbol'
            Block
              IfStatement
                PrefixUnaryExpression
                  PropertyAccessExpression
                    Identifier: 'symbol'
                    Identifier: 'declarations'
                Block
                  ReturnStatement
              ForOfStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' declaration'
                PropertyAccessExpression
                  Identifier: ' symbol'
                  Identifier: 'declarations'
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' declarationSourceFile'
                        CallExpression
                          Identifier: ' getSourceFileOfNode'
                          Identifier: 'declaration'
                  IfStatement
                    BinaryExpression
                      Identifier: '
                    declarationSourceFile'
                      AmpersandAmpersandToken
                      BinaryExpression
                        Identifier: '
                    declarationSourceFile'
                        ExclamationEqualsEqualsToken
                        Identifier: ' sourceFile'
                    Block
                      ExpressionStatement
                        CallExpression
                          Identifier: '
                    addReferencedFile'
                          PropertyAccessExpression
                            Identifier: 'declarationSourceFile'
                            Identifier: 'resolvedPath'
          FunctionDeclaration
            Identifier: ' addReferencedFile'
            Parameter
              Identifier: 'referencedPath'
              TypeReference
                Identifier: ' Path'
            Block
              ExpressionStatement
                CallExpression
                  PropertyAccessExpression
                    ParenthesizedExpression
                      BinaryExpression
                        Identifier: 'referencedFiles'
                        BarBarToken
                        ParenthesizedExpression
                          BinaryExpression
                            Identifier: 'referencedFiles'
                            EqualsToken
                            NewExpression
                              Identifier: ' Set'
                    Identifier: 'add'
                  Identifier: 'referencedPath'
      FunctionDeclaration
        ExportKeyword
        Identifier: ' canReuseOldState'
        Parameter
          Identifier: 'newReferencedMap'
          UnionType
            TypeReference
              Identifier: ' ReadonlyManyToManyPathMap'
            UndefinedKeyword
        Parameter
          Identifier: ' oldState'
          UnionType
            TypeReference
              Identifier: ' BuilderState'
            UndefinedKeyword
        UnionType
          BooleanKeyword
          UndefinedKeyword
        Block
          ReturnStatement
            BinaryExpression
              Identifier: ' oldState'
              AmpersandAmpersandToken
              BinaryExpression
                PrefixUnaryExpression
                  PropertyAccessExpression
                    Identifier: 'oldState'
                    Identifier: 'referencedMap'
                EqualsEqualsEqualsToken
                PrefixUnaryExpression
                  Identifier: 'newReferencedMap'
      FunctionDeclaration
        ExportKeyword
        Identifier: ' createReferencedMap'
        Parameter
          Identifier: 'options'
          TypeReference
            Identifier: ' CompilerOptions'
        UnionType
          TypeReference
            Identifier: ' ManyToManyPathMap'
          UndefinedKeyword
        Block
          ReturnStatement
            ConditionalExpression
              BinaryExpression
                BinaryExpression
                  PropertyAccessExpression
                    Identifier: ' options'
                    Identifier: 'module'
                  ExclamationEqualsEqualsToken
                  PropertyAccessExpression
                    Identifier: ' ModuleKind'
                    Identifier: 'None'
                AmpersandAmpersandToken
                PrefixUnaryExpression
                  PropertyAccessExpression
                    Identifier: 'options'
                    Identifier: 'outFile'
              QuestionToken
              CallExpression
                Identifier: '
            createManyToManyPathMap'
              ColonToken
              Identifier: '
            undefined'
      FunctionDeclaration
        ExportKeyword
        Identifier: ' create'
        Parameter
          Identifier: 'newProgram'
          TypeReference
            Identifier: ' Program'
        Parameter
          Identifier: ' oldState'
          UnionType
            TypeReference
              Identifier: ' Readonly'
              TypeReference
                Identifier: 'BuilderState'
            UndefinedKeyword
        Parameter
          Identifier: ' disableUseFileVersionAsSignature'
          BooleanKeyword
        TypeReference
          Identifier: ' BuilderState'
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' fileInfos'
                NewExpression
                  Identifier: ' Map'
                  TypeReference
                    Identifier: 'Path'
                  TypeReference
                    Identifier: ' FileInfo'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' options'
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' newProgram'
                    Identifier: 'getCompilerOptions'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' referencedMap'
                CallExpression
                  Identifier: ' createReferencedMap'
                  Identifier: 'options'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' useOldState'
                CallExpression
                  Identifier: ' canReuseOldState'
                  Identifier: 'referencedMap'
                  Identifier: ' oldState'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '

        // Ensure source files have parent pointers set
        newProgram'
                Identifier: 'getTypeChecker'
          ForOfStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' sourceFile'
            CallExpression
              PropertyAccessExpression
                Identifier: ' newProgram'
                Identifier: 'getSourceFiles'
            Block
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' version'
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' Debug'
                        Identifier: 'checkDefined'
                      PropertyAccessExpression
                        Identifier: 'sourceFile'
                        Identifier: 'version'
                      StringLiteral
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' oldUncommittedSignature'
                    ConditionalExpression
                      Identifier: ' useOldState'
                      QuestionToken
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            NonNullExpression
                              Identifier: ' oldState'
                            Identifier: 'oldSignatures'
                          QuestionDotToken
                          Identifier: 'get'
                        PropertyAccessExpression
                          Identifier: 'sourceFile'
                          Identifier: 'resolvedPath'
                      ColonToken
                      Identifier: ' undefined'
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' signature'
                    ConditionalExpression
                      BinaryExpression
                        Identifier: ' oldUncommittedSignature'
                        EqualsEqualsEqualsToken
                        Identifier: ' undefined'
                      QuestionToken
                      ConditionalExpression
                        Identifier: '
                useOldState'
                        QuestionToken
                        PropertyAccessExpression
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                NonNullExpression
                                  Identifier: ' oldState'
                                Identifier: 'fileInfos'
                              Identifier: 'get'
                            PropertyAccessExpression
                              Identifier: 'sourceFile'
                              Identifier: 'resolvedPath'
                          QuestionDotToken
                          Identifier: 'signature'
                        ColonToken
                        Identifier: ' undefined'
                      ColonToken
                      BinaryExpression
                        Identifier: '
                oldUncommittedSignature'
                        BarBarToken
                        Identifier: ' undefined'
              IfStatement
                Identifier: 'referencedMap'
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' newReferences'
                        CallExpression
                          Identifier: ' getReferencedFiles'
                          Identifier: 'newProgram'
                          Identifier: ' sourceFile'
                          PropertyAccessExpression
                            Identifier: ' newProgram'
                            Identifier: 'getCanonicalFileName'
                  IfStatement
                    Identifier: 'newReferences'
                    Block
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
                    referencedMap'
                            Identifier: 'set'
                          PropertyAccessExpression
                            Identifier: 'sourceFile'
                            Identifier: 'resolvedPath'
                          Identifier: ' newReferences'
              ExpressionStatement
                CallExpression
                  PropertyAccessExpression
                    Identifier: '
            fileInfos'
                    Identifier: 'set'
                  PropertyAccessExpression
                    Identifier: 'sourceFile'
                    Identifier: 'resolvedPath'
                  ObjectLiteralExpression
                    ShorthandPropertyAssignment
                      Identifier: '
                version'
                    ShorthandPropertyAssignment
                      Identifier: '
                signature'
                    PropertyAssignment
                      Identifier: '
                // No need to calculate affectsGlobalScope with --out since its not used at all
                affectsGlobalScope'
                      ConditionalExpression
                        PrefixUnaryExpression
                          PropertyAccessExpression
                            Identifier: 'options'
                            Identifier: 'outFile'
                        QuestionToken
                        BinaryExpression
                          CallExpression
                            Identifier: ' isFileAffectingGlobalScope'
                            Identifier: 'sourceFile'
                          BarBarToken
                          Identifier: ' undefined'
                        ColonToken
                        Identifier: ' undefined'
                    PropertyAssignment
                      Identifier: '
                impliedFormat'
                      PropertyAccessExpression
                        Identifier: ' sourceFile'
                        Identifier: 'impliedNodeFormat'
          ReturnStatement
            ObjectLiteralExpression
              ShorthandPropertyAssignment
                Identifier: '
            fileInfos'
              ShorthandPropertyAssignment
                Identifier: '
            referencedMap'
              PropertyAssignment
                Identifier: '
            useFileVersionAsSignature'
                BinaryExpression
                  PrefixUnaryExpression
                    Identifier: 'disableUseFileVersionAsSignature'
                  AmpersandAmpersandToken
                  PrefixUnaryExpression
                    Identifier: 'useOldState'
      FunctionDeclaration
        ExportKeyword
        Identifier: ' releaseCache'
        Parameter
          Identifier: 'state'
          TypeReference
            Identifier: ' BuilderState'
        VoidKeyword
        Block
          ExpressionStatement
            BinaryExpression
              PropertyAccessExpression
                Identifier: '
        state'
                Identifier: 'allFilesExcludingDefaultLibraryFile'
              EqualsToken
              Identifier: ' undefined'
          ExpressionStatement
            BinaryExpression
              PropertyAccessExpression
                Identifier: '
        state'
                Identifier: 'allFileNames'
              EqualsToken
              Identifier: ' undefined'
      FunctionDeclaration
        ExportKeyword
        Identifier: ' getFilesAffectedBy'
        Parameter
          Identifier: '
        state'
          TypeReference
            Identifier: ' BuilderState'
        Parameter
          Identifier: '
        programOfThisState'
          TypeReference
            Identifier: ' Program'
        Parameter
          Identifier: '
        path'
          TypeReference
            Identifier: ' Path'
        Parameter
          Identifier: '
        cancellationToken'
          UnionType
            TypeReference
              Identifier: ' CancellationToken'
            UndefinedKeyword
        Parameter
          Identifier: '
        host'
          TypeReference
            Identifier: ' HostForComputeHash'
        TypeOperator
          ArrayType
            TypeReference
              Identifier: ' SourceFile'
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' result'
                CallExpression
                  Identifier: ' getFilesAffectedByWithOldState'
                  Identifier: '
            state'
                  Identifier: '
            programOfThisState'
                  Identifier: '
            path'
                  Identifier: '
            cancellationToken'
                  Identifier: '
            host'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                PropertyAccessExpression
                  Identifier: '
        state'
                  Identifier: 'oldSignatures'
                QuestionDotToken
                Identifier: 'clear'
          ReturnStatement
            Identifier: ' result'
      FunctionDeclaration
        ExportKeyword
        Identifier: ' getFilesAffectedByWithOldState'
        Parameter
          Identifier: '
        state'
          TypeReference
            Identifier: ' BuilderState'
        Parameter
          Identifier: '
        programOfThisState'
          TypeReference
            Identifier: ' Program'
        Parameter
          Identifier: '
        path'
          TypeReference
            Identifier: ' Path'
        Parameter
          Identifier: '
        cancellationToken'
          UnionType
            TypeReference
              Identifier: ' CancellationToken'
            UndefinedKeyword
        Parameter
          Identifier: '
        host'
          TypeReference
            Identifier: ' HostForComputeHash'
        TypeOperator
          ArrayType
            TypeReference
              Identifier: ' SourceFile'
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' sourceFile'
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' programOfThisState'
                    Identifier: 'getSourceFileByPath'
                  Identifier: 'path'
          IfStatement
            PrefixUnaryExpression
              Identifier: 'sourceFile'
            Block
              ReturnStatement
                Identifier: ' emptyArray'
          IfStatement
            PrefixUnaryExpression
              CallExpression
                Identifier: 'updateShapeSignature'
                Identifier: 'state'
                Identifier: ' programOfThisState'
                Identifier: ' sourceFile'
                Identifier: ' cancellationToken'
                Identifier: ' host'
            Block
              ReturnStatement
                ArrayLiteralExpression
                  Identifier: 'sourceFile'
          ReturnStatement
            CallExpression
              ParenthesizedExpression
                ConditionalExpression
                  PropertyAccessExpression
                    Identifier: 'state'
                    Identifier: 'referencedMap'
                  QuestionToken
                  Identifier: ' getFilesAffectedByUpdatedShapeWhenModuleEmit'
                  ColonToken
                  Identifier: ' getFilesAffectedByUpdatedShapeWhenNonModuleEmit'
              Identifier: 'state'
              Identifier: ' programOfThisState'
              Identifier: ' sourceFile'
              Identifier: ' cancellationToken'
              Identifier: ' host'
      FunctionDeclaration
        ExportKeyword
        Identifier: ' updateSignatureOfFile'
        Parameter
          Identifier: 'state'
          TypeReference
            Identifier: ' BuilderState'
        Parameter
          Identifier: ' signature'
          UnionType
            StringKeyword
            UndefinedKeyword
        Parameter
          Identifier: ' path'
          TypeReference
            Identifier: ' Path'
        VoidKeyword
        Block
          ExpressionStatement
            BinaryExpression
              PropertyAccessExpression
                NonNullExpression
                  CallExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        Identifier: '
        state'
                        Identifier: 'fileInfos'
                      Identifier: 'get'
                    Identifier: 'path'
                Identifier: 'signature'
              EqualsToken
              Identifier: ' signature'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                ParenthesizedExpression
                  BinaryExpression
                    PropertyAccessExpression
                      Identifier: 'state'
                      Identifier: 'hasCalledUpdateShapeSignature'
                    BarBarEqualsToken
                    NewExpression
                      Identifier: ' Set'
                Identifier: 'add'
              Identifier: 'path'
      FunctionDeclaration
        ExportKeyword
        Identifier: ' computeDtsSignature'
        Parameter
          Identifier: '
        programOfThisState'
          TypeReference
            Identifier: ' Program'
        Parameter
          Identifier: '
        sourceFile'
          TypeReference
            Identifier: ' SourceFile'
        Parameter
          Identifier: '
        cancellationToken'
          UnionType
            TypeReference
              Identifier: ' CancellationToken'
            UndefinedKeyword
        Parameter
          Identifier: '
        host'
          TypeReference
            Identifier: ' HostForComputeHash'
        Parameter
          Identifier: '
        onNewSignature'
          FunctionType
            Parameter
              Identifier: 'signature'
              StringKeyword
            Parameter
              Identifier: ' sourceFiles'
              TypeOperator
                ArrayType
                  TypeReference
                    Identifier: ' SourceFile'
            VoidKeyword
        VoidKeyword
        Block
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '
        programOfThisState'
                Identifier: 'emit'
              Identifier: '
            sourceFile'
              ArrowFunction
                Parameter
                  Identifier: 'fileName'
                Parameter
                  Identifier: ' text'
                Parameter
                  Identifier: ' _writeByteOrderMark'
                Parameter
                  Identifier: ' _onError'
                Parameter
                  Identifier: ' sourceFiles'
                Parameter
                  Identifier: ' data'
                EqualsGreaterThanToken
                Block
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                Debug'
                        Identifier: 'assert'
                      CallExpression
                        Identifier: 'isDeclarationFileName'
                        Identifier: 'fileName'
                      TemplateExpression
                        TemplateHead
                        TemplateSpan
                          Identifier: 'fileName'
                          TemplateTail
                  ExpressionStatement
                    CallExpression
                      Identifier: '
                onNewSignature'
                      CallExpression
                        Identifier: '
                    computeSignatureWithDiagnostics'
                        Identifier: '
                        programOfThisState'
                        Identifier: '
                        sourceFile'
                        Identifier: '
                        text'
                        Identifier: '
                        host'
                        Identifier: '
                        data'
                      NonNullExpression
                        Identifier: '
                    sourceFiles'
              Identifier: '
            cancellationToken'
              PropertyAccessExpression
                Identifier: '
            EmitOnly'
                Identifier: 'BuilderSignature'
              Identifier: '
            /*customTransformers*/ undefined'
              TrueKeyword
      FunctionDeclaration
        ExportKeyword
        Identifier: ' updateShapeSignature'
        Parameter
          Identifier: '
        state'
          TypeReference
            Identifier: ' BuilderState'
        Parameter
          Identifier: '
        programOfThisState'
          TypeReference
            Identifier: ' Program'
        Parameter
          Identifier: '
        sourceFile'
          TypeReference
            Identifier: ' SourceFile'
        Parameter
          Identifier: '
        cancellationToken'
          UnionType
            TypeReference
              Identifier: ' CancellationToken'
            UndefinedKeyword
        Parameter
          Identifier: '
        host'
          TypeReference
            Identifier: ' HostForComputeHash'
        Parameter
          Identifier: '
        useFileVersionAsSignature'
          UnionType
            BooleanKeyword
            UndefinedKeyword
          PropertyAccessExpression
            Identifier: ' state'
            Identifier: 'useFileVersionAsSignature'
        BooleanKeyword
        Block
          IfStatement
            CallExpression
              PropertyAccessExpression
                PropertyAccessExpression
                  Identifier: 'state'
                  Identifier: 'hasCalledUpdateShapeSignature'
                QuestionDotToken
                Identifier: 'has'
              PropertyAccessExpression
                Identifier: 'sourceFile'
                Identifier: 'resolvedPath'
            ReturnStatement
              FalseKeyword
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' info'
                NonNullExpression
                  CallExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        Identifier: ' state'
                        Identifier: 'fileInfos'
                      Identifier: 'get'
                    PropertyAccessExpression
                      Identifier: 'sourceFile'
                      Identifier: 'resolvedPath'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' prevSignature'
                PropertyAccessExpression
                  Identifier: ' info'
                  Identifier: 'signature'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' latestSignature'
                UnionType
                  StringKeyword
                  UndefinedKeyword
          IfStatement
            BinaryExpression
              PrefixUnaryExpression
                PropertyAccessExpression
                  Identifier: 'sourceFile'
                  Identifier: 'isDeclarationFile'
              AmpersandAmpersandToken
              PrefixUnaryExpression
                Identifier: 'useFileVersionAsSignature'
            Block
              ExpressionStatement
                CallExpression
                  Identifier: '
            computeDtsSignature'
                  Identifier: 'programOfThisState'
                  Identifier: ' sourceFile'
                  Identifier: ' cancellationToken'
                  Identifier: ' host'
                  ArrowFunction
                    Parameter
                      Identifier: ' signature'
                    EqualsGreaterThanToken
                    Block
                      ExpressionStatement
                        BinaryExpression
                          Identifier: '
                latestSignature'
                          EqualsToken
                          Identifier: ' signature'
                      IfStatement
                        PropertyAccessExpression
                          Identifier: 'host'
                          Identifier: 'storeSignatureInfo'
                        ExpressionStatement
                          CallExpression
                            PropertyAccessExpression
                              ParenthesizedExpression
                                BinaryExpression
                                  PropertyAccessExpression
                                    Identifier: 'state'
                                    Identifier: 'signatureInfo'
                                  QuestionQuestionEqualsToken
                                  NewExpression
                                    Identifier: ' Map'
                              Identifier: 'set'
                            PropertyAccessExpression
                              Identifier: 'sourceFile'
                              Identifier: 'resolvedPath'
                            PropertyAccessExpression
                              Identifier: ' SignatureInfo'
                              Identifier: 'ComputedDts'
          IfStatement
            BinaryExpression
              Identifier: 'latestSignature'
              EqualsEqualsEqualsToken
              Identifier: ' undefined'
            Block
              ExpressionStatement
                BinaryExpression
                  Identifier: '
            latestSignature'
                  EqualsToken
                  PropertyAccessExpression
                    Identifier: ' sourceFile'
                    Identifier: 'version'
              IfStatement
                PropertyAccessExpression
                  Identifier: 'host'
                  Identifier: 'storeSignatureInfo'
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      ParenthesizedExpression
                        BinaryExpression
                          PropertyAccessExpression
                            Identifier: 'state'
                            Identifier: 'signatureInfo'
                          QuestionQuestionEqualsToken
                          NewExpression
                            Identifier: ' Map'
                      Identifier: 'set'
                    PropertyAccessExpression
                      Identifier: 'sourceFile'
                      Identifier: 'resolvedPath'
                    PropertyAccessExpression
                      Identifier: ' SignatureInfo'
                      Identifier: 'UsedVersion'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                ParenthesizedExpression
                  BinaryExpression
                    PropertyAccessExpression
                      Identifier: 'state'
                      Identifier: 'oldSignatures'
                    BarBarEqualsToken
                    NewExpression
                      Identifier: ' Map'
                Identifier: 'set'
              PropertyAccessExpression
                Identifier: 'sourceFile'
                Identifier: 'resolvedPath'
              BinaryExpression
                Identifier: ' prevSignature'
                BarBarToken
                FalseKeyword
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                ParenthesizedExpression
                  BinaryExpression
                    PropertyAccessExpression
                      Identifier: 'state'
                      Identifier: 'hasCalledUpdateShapeSignature'
                    BarBarEqualsToken
                    NewExpression
                      Identifier: ' Set'
                Identifier: 'add'
              PropertyAccessExpression
                Identifier: 'sourceFile'
                Identifier: 'resolvedPath'
          ExpressionStatement
            BinaryExpression
              PropertyAccessExpression
                Identifier: '
        info'
                Identifier: 'signature'
              EqualsToken
              Identifier: ' latestSignature'
          ReturnStatement
            BinaryExpression
              Identifier: ' latestSignature'
              ExclamationEqualsEqualsToken
              Identifier: ' prevSignature'
      FunctionDeclaration
        ExportKeyword
        Identifier: ' getAllDependencies'
        Parameter
          Identifier: 'state'
          TypeReference
            Identifier: ' BuilderState'
        Parameter
          Identifier: ' programOfThisState'
          TypeReference
            Identifier: ' Program'
        Parameter
          Identifier: ' sourceFile'
          TypeReference
            Identifier: ' SourceFile'
        TypeOperator
          ArrayType
            StringKeyword
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' compilerOptions'
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' programOfThisState'
                    Identifier: 'getCompilerOptions'
          IfStatement
            PropertyAccessExpression
              Identifier: 'compilerOptions'
              Identifier: 'outFile'
            Block
              ReturnStatement
                CallExpression
                  Identifier: ' getAllFileNames'
                  Identifier: 'state'
                  Identifier: ' programOfThisState'
          IfStatement
            BinaryExpression
              PrefixUnaryExpression
                PropertyAccessExpression
                  Identifier: 'state'
                  Identifier: 'referencedMap'
              BarBarToken
              CallExpression
                Identifier: ' isFileAffectingGlobalScope'
                Identifier: 'sourceFile'
            Block
              ReturnStatement
                CallExpression
                  Identifier: ' getAllFileNames'
                  Identifier: 'state'
                  Identifier: ' programOfThisState'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' seenMap'
                NewExpression
                  Identifier: ' Set'
                  TypeReference
                    Identifier: 'Path'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' queue'
                ArrayLiteralExpression
                  PropertyAccessExpression
                    Identifier: 'sourceFile'
                    Identifier: 'resolvedPath'
          WhileStatement
            PropertyAccessExpression
              Identifier: 'queue'
              Identifier: 'length'
            Block
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' path'
                    NonNullExpression
                      CallExpression
                        PropertyAccessExpression
                          Identifier: ' queue'
                          Identifier: 'pop'
              IfStatement
                PrefixUnaryExpression
                  CallExpression
                    PropertyAccessExpression
                      Identifier: 'seenMap'
                      Identifier: 'has'
                    Identifier: 'path'
                Block
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                seenMap'
                        Identifier: 'add'
                      Identifier: 'path'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' references'
                        CallExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: ' state'
                              Identifier: 'referencedMap'
                            Identifier: 'getValues'
                          Identifier: 'path'
                  IfStatement
                    Identifier: 'references'
                    Block
                      ForOfStatement
                        VariableDeclarationList
                          VariableDeclaration
                            Identifier: ' key'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' references'
                            Identifier: 'keys'
                        Block
                          ExpressionStatement
                            CallExpression
                              PropertyAccessExpression
                                Identifier: '
                        queue'
                                Identifier: 'push'
                              Identifier: 'key'
          ReturnStatement
            CallExpression
              Identifier: ' arrayFrom'
              CallExpression
                Identifier: 'mapDefinedIterator'
                CallExpression
                  PropertyAccessExpression
                    Identifier: 'seenMap'
                    Identifier: 'keys'
                ArrowFunction
                  Parameter
                    Identifier: ' path'
                  EqualsGreaterThanToken
                  BinaryExpression
                    PropertyAccessExpression
                      CallExpression
                        PropertyAccessExpression
                          Identifier: ' programOfThisState'
                          Identifier: 'getSourceFileByPath'
                        Identifier: 'path'
                      QuestionDotToken
                      Identifier: 'fileName'
                    QuestionQuestionToken
                    Identifier: ' path'
      FunctionDeclaration
        Identifier: ' getAllFileNames'
        Parameter
          Identifier: 'state'
          TypeReference
            Identifier: ' BuilderState'
        Parameter
          Identifier: ' programOfThisState'
          TypeReference
            Identifier: ' Program'
        TypeOperator
          ArrayType
            StringKeyword
        Block
          IfStatement
            PrefixUnaryExpression
              PropertyAccessExpression
                Identifier: 'state'
                Identifier: 'allFileNames'
            Block
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' sourceFiles'
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' programOfThisState'
                        Identifier: 'getSourceFiles'
              ExpressionStatement
                BinaryExpression
                  PropertyAccessExpression
                    Identifier: '
            state'
                    Identifier: 'allFileNames'
                  EqualsToken
                  ConditionalExpression
                    BinaryExpression
                      Identifier: ' sourceFiles'
                      EqualsEqualsEqualsToken
                      Identifier: ' emptyArray'
                    QuestionToken
                    Identifier: ' emptyArray'
                    ColonToken
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' sourceFiles'
                        Identifier: 'map'
                      ArrowFunction
                        Parameter
                          Identifier: 'file'
                        EqualsGreaterThanToken
                        PropertyAccessExpression
                          Identifier: ' file'
                          Identifier: 'fileName'
          ReturnStatement
            PropertyAccessExpression
              Identifier: ' state'
              Identifier: 'allFileNames'
      FunctionDeclaration
        ExportKeyword
        Identifier: ' getReferencedByPaths'
        Parameter
          Identifier: 'state'
          TypeReference
            Identifier: ' Readonly'
            TypeReference
              Identifier: 'BuilderState'
        Parameter
          Identifier: ' referencedFilePath'
          TypeReference
            Identifier: ' Path'
        ArrayType
          TypeReference
            Identifier: ' Path'
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' keys'
                CallExpression
                  PropertyAccessExpression
                    NonNullExpression
                      PropertyAccessExpression
                        Identifier: ' state'
                        Identifier: 'referencedMap'
                    Identifier: 'getKeys'
                  Identifier: 'referencedFilePath'
          ReturnStatement
            ConditionalExpression
              Identifier: ' keys'
              QuestionToken
              CallExpression
                Identifier: ' arrayFrom'
                CallExpression
                  PropertyAccessExpression
                    Identifier: 'keys'
                    Identifier: 'keys'
              ColonToken
              ArrayLiteralExpression
      FunctionDeclaration
        Identifier: ' containsOnlyAmbientModules'
        Parameter
          Identifier: 'sourceFile'
          TypeReference
            Identifier: ' SourceFile'
        Block
          ForOfStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' statement'
            PropertyAccessExpression
              Identifier: ' sourceFile'
              Identifier: 'statements'
            Block
              IfStatement
                PrefixUnaryExpression
                  CallExpression
                    Identifier: 'isModuleWithStringLiteralName'
                    Identifier: 'statement'
                Block
                  ReturnStatement
                    FalseKeyword
          ReturnStatement
            TrueKeyword
      FunctionDeclaration
        Identifier: ' containsGlobalScopeAugmentation'
        Parameter
          Identifier: 'sourceFile'
          TypeReference
            Identifier: ' SourceFile'
        Block
          ReturnStatement
            CallExpression
              Identifier: ' some'
              PropertyAccessExpression
                Identifier: 'sourceFile'
                Identifier: 'moduleAugmentations'
              ArrowFunction
                Parameter
                  Identifier: ' augmentation'
                EqualsGreaterThanToken
                CallExpression
                  Identifier: ' isGlobalScopeAugmentation'
                  AsExpression
                    PropertyAccessExpression
                      Identifier: 'augmentation'
                      Identifier: 'parent'
                    TypeReference
                      Identifier: ' ModuleDeclaration'
      FunctionDeclaration
        Identifier: ' isFileAffectingGlobalScope'
        Parameter
          Identifier: 'sourceFile'
          TypeReference
            Identifier: ' SourceFile'
        Block
          ReturnStatement
            BinaryExpression
              CallExpression
                Identifier: ' containsGlobalScopeAugmentation'
                Identifier: 'sourceFile'
              BarBarToken
              BinaryExpression
                BinaryExpression
                  PrefixUnaryExpression
                    CallExpression
                      Identifier: 'isExternalOrCommonJsModule'
                      Identifier: 'sourceFile'
                  AmpersandAmpersandToken
                  PrefixUnaryExpression
                    CallExpression
                      Identifier: 'isJsonSourceFile'
                      Identifier: 'sourceFile'
                AmpersandAmpersandToken
                PrefixUnaryExpression
                  CallExpression
                    Identifier: 'containsOnlyAmbientModules'
                    Identifier: 'sourceFile'
      FunctionDeclaration
        ExportKeyword
        Identifier: ' getAllFilesExcludingDefaultLibraryFile'
        Parameter
          Identifier: 'state'
          TypeReference
            Identifier: ' BuilderState'
        Parameter
          Identifier: ' programOfThisState'
          TypeReference
            Identifier: ' Program'
        Parameter
          Identifier: ' firstSourceFile'
          UnionType
            TypeReference
              Identifier: ' SourceFile'
            UndefinedKeyword
        TypeOperator
          ArrayType
            TypeReference
              Identifier: ' SourceFile'
        Block
          IfStatement
            PropertyAccessExpression
              Identifier: 'state'
              Identifier: 'allFilesExcludingDefaultLibraryFile'
            Block
              ReturnStatement
                PropertyAccessExpression
                  Identifier: ' state'
                  Identifier: 'allFilesExcludingDefaultLibraryFile'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' result'
                UnionType
                  ArrayType
                    TypeReference
                      Identifier: ' SourceFile'
                  UndefinedKeyword
          IfStatement
            Identifier: 'firstSourceFile'
            ExpressionStatement
              CallExpression
                Identifier: ' addSourceFile'
                Identifier: 'firstSourceFile'
          ForOfStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' sourceFile'
            CallExpression
              PropertyAccessExpression
                Identifier: ' programOfThisState'
                Identifier: 'getSourceFiles'
            Block
              IfStatement
                BinaryExpression
                  Identifier: 'sourceFile'
                  ExclamationEqualsEqualsToken
                  Identifier: ' firstSourceFile'
                Block
                  ExpressionStatement
                    CallExpression
                      Identifier: '
                addSourceFile'
                      Identifier: 'sourceFile'
          ExpressionStatement
            BinaryExpression
              PropertyAccessExpression
                Identifier: '
        state'
                Identifier: 'allFilesExcludingDefaultLibraryFile'
              EqualsToken
              BinaryExpression
                Identifier: ' result'
                BarBarToken
                Identifier: ' emptyArray'
          ReturnStatement
            PropertyAccessExpression
              Identifier: ' state'
              Identifier: 'allFilesExcludingDefaultLibraryFile'
          FunctionDeclaration
            Identifier: ' addSourceFile'
            Parameter
              Identifier: 'sourceFile'
              TypeReference
                Identifier: ' SourceFile'
            Block
              IfStatement
                PrefixUnaryExpression
                  CallExpression
                    PropertyAccessExpression
                      Identifier: 'programOfThisState'
                      Identifier: 'isSourceFileDefaultLibrary'
                    Identifier: 'sourceFile'
                Block
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        ParenthesizedExpression
                          BinaryExpression
                            Identifier: 'result'
                            BarBarToken
                            ParenthesizedExpression
                              BinaryExpression
                                Identifier: 'result'
                                EqualsToken
                                ArrayLiteralExpression
                        Identifier: 'push'
                      Identifier: 'sourceFile'
      FunctionDeclaration
        Identifier: ' getFilesAffectedByUpdatedShapeWhenNonModuleEmit'
        Parameter
          Identifier: 'state'
          TypeReference
            Identifier: ' BuilderState'
        Parameter
          Identifier: ' programOfThisState'
          TypeReference
            Identifier: ' Program'
        Parameter
          Identifier: ' sourceFileWithUpdatedShape'
          TypeReference
            Identifier: ' SourceFile'
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' compilerOptions'
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' programOfThisState'
                    Identifier: 'getCompilerOptions'
          IfStatement
            BinaryExpression
              Identifier: 'compilerOptions'
              AmpersandAmpersandToken
              PropertyAccessExpression
                Identifier: ' compilerOptions'
                Identifier: 'outFile'
            Block
              ReturnStatement
                ArrayLiteralExpression
                  Identifier: 'sourceFileWithUpdatedShape'
          ReturnStatement
            CallExpression
              Identifier: ' getAllFilesExcludingDefaultLibraryFile'
              Identifier: 'state'
              Identifier: ' programOfThisState'
              Identifier: ' sourceFileWithUpdatedShape'
      FunctionDeclaration
        Identifier: ' getFilesAffectedByUpdatedShapeWhenModuleEmit'
        Parameter
          Identifier: '
        state'
          TypeReference
            Identifier: ' BuilderState'
        Parameter
          Identifier: '
        programOfThisState'
          TypeReference
            Identifier: ' Program'
        Parameter
          Identifier: '
        sourceFileWithUpdatedShape'
          TypeReference
            Identifier: ' SourceFile'
        Parameter
          Identifier: '
        cancellationToken'
          UnionType
            TypeReference
              Identifier: ' CancellationToken'
            UndefinedKeyword
        Parameter
          Identifier: '
        host'
          TypeReference
            Identifier: ' HostForComputeHash'
        Block
          IfStatement
            CallExpression
              Identifier: 'isFileAffectingGlobalScope'
              Identifier: 'sourceFileWithUpdatedShape'
            Block
              ReturnStatement
                CallExpression
                  Identifier: ' getAllFilesExcludingDefaultLibraryFile'
                  Identifier: 'state'
                  Identifier: ' programOfThisState'
                  Identifier: ' sourceFileWithUpdatedShape'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' compilerOptions'
                CallExpression
                  PropertyAccessExpression
                    Identifier: ' programOfThisState'
                    Identifier: 'getCompilerOptions'
          IfStatement
            BinaryExpression
              Identifier: 'compilerOptions'
              AmpersandAmpersandToken
              ParenthesizedExpression
                BinaryExpression
                  CallExpression
                    Identifier: 'getIsolatedModules'
                    Identifier: 'compilerOptions'
                  BarBarToken
                  PropertyAccessExpression
                    Identifier: ' compilerOptions'
                    Identifier: 'outFile'
            Block
              ReturnStatement
                ArrayLiteralExpression
                  Identifier: 'sourceFileWithUpdatedShape'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' seenFileNamesMap'
                NewExpression
                  Identifier: ' Map'
                  TypeReference
                    Identifier: 'Path'
                  TypeReference
                    Identifier: ' SourceFile'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                Identifier: '

        // Start with the paths this file was referenced by
        seenFileNamesMap'
                Identifier: 'set'
              PropertyAccessExpression
                Identifier: 'sourceFileWithUpdatedShape'
                Identifier: 'resolvedPath'
              Identifier: ' sourceFileWithUpdatedShape'
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' queue'
                CallExpression
                  Identifier: ' getReferencedByPaths'
                  Identifier: 'state'
                  PropertyAccessExpression
                    Identifier: ' sourceFileWithUpdatedShape'
                    Identifier: 'resolvedPath'
          WhileStatement
            BinaryExpression
              PropertyAccessExpression
                Identifier: 'queue'
                Identifier: 'length'
              GreaterThanToken
              NumericLiteral
            Block
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' currentPath'
                    NonNullExpression
                      CallExpression
                        PropertyAccessExpression
                          Identifier: ' queue'
                          Identifier: 'pop'
              IfStatement
                PrefixUnaryExpression
                  CallExpression
                    PropertyAccessExpression
                      Identifier: 'seenFileNamesMap'
                      Identifier: 'has'
                    Identifier: 'currentPath'
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' currentSourceFile'
                        NonNullExpression
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' programOfThisState'
                              Identifier: 'getSourceFileByPath'
                            Identifier: 'currentPath'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
                seenFileNamesMap'
                        Identifier: 'set'
                      Identifier: 'currentPath'
                      Identifier: ' currentSourceFile'
                  IfStatement
                    BinaryExpression
                      Identifier: 'currentSourceFile'
                      AmpersandAmpersandToken
                      CallExpression
                        Identifier: ' updateShapeSignature'
                        Identifier: 'state'
                        Identifier: ' programOfThisState'
                        Identifier: ' currentSourceFile'
                        Identifier: ' cancellationToken'
                        Identifier: ' host'
                    Block
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
                    queue'
                            Identifier: 'push'
                          SpreadElement
                            CallExpression
                              Identifier: 'getReferencedByPaths'
                              Identifier: 'state'
                              PropertyAccessExpression
                                Identifier: ' currentSourceFile'
                                Identifier: 'resolvedPath'
          ReturnStatement
            CallExpression
              Identifier: ' arrayFrom'
              CallExpression
                Identifier: 'mapDefinedIterator'
                CallExpression
                  PropertyAccessExpression
                    Identifier: 'seenFileNamesMap'
                    Identifier: 'values'
                ArrowFunction
                  Parameter
                    Identifier: ' value'
                  EqualsGreaterThanToken
                  Identifier: ' value'
