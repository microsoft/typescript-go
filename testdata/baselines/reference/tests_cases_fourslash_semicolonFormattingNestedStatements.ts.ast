SourceFile
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '/// <reference path='fourslash.ts' />

////if (true)
////if (true)/*parentOutsideBlock*/
////if (true) {
////if (true)/*directParent*/
////var x = 0/*innermost*/
////}


goTo'
        Identifier: 'marker'
      StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '
edit'
        Identifier: 'insert'
      StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

// Adding semicolon should format the innermost statement
verify'
        Identifier: 'currentLineContentIs'
      StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

// Also should format any parent statement that is terminated by the semicolon
goTo'
        Identifier: 'marker'
      StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '
verify'
        Identifier: 'currentLineContentIs'
      StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

// But not parents that are not terminated by it
goTo'
        Identifier: 'marker'
      StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '
verify'
        Identifier: 'currentLineContentIs'
      StringLiteral
