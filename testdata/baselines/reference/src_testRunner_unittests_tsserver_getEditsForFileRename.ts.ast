SourceFile
  ImportDeclaration
    ImportClause
      NamespaceImport
        Identifier: ' ts'
    StringLiteral
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: ' dedent'
    StringLiteral
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: ' jsonToReadableText'
    StringLiteral
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: '
    baselineTsserverLogs'
        ImportSpecifier
          Identifier: '
    closeFilesForSession'
        ImportSpecifier
          Identifier: '
    openFilesForSession'
        ImportSpecifier
          Identifier: '
    protocolTextSpanFromSubstring'
        ImportSpecifier
          Identifier: '
    TestSession'
        ImportSpecifier
          Identifier: '
    textSpanFromSubstring'
        ImportSpecifier
          Identifier: '
    verifyGetErrRequest'
    StringLiteral
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: '
    File'
        ImportSpecifier
          Identifier: '
    TestServerHost'
    StringLiteral
  ExpressionStatement
    CallExpression
      Identifier: '

describe'
      StringLiteral
      ArrowFunction
        EqualsGreaterThanToken
        Block
          ExpressionStatement
            CallExpression
              Identifier: '
    it'
              StringLiteral
              ArrowFunction
                EqualsGreaterThanToken
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' userTs'
                        TypeReference
                          Identifier: ' File'
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: '
            path'
                            StringLiteral
                          PropertyAssignment
                            Identifier: '
            content'
                            StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' newTs'
                        TypeReference
                          Identifier: ' File'
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: '
            path'
                            StringLiteral
                          PropertyAssignment
                            Identifier: '
            content'
                            StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' tsconfig'
                        TypeReference
                          Identifier: ' File'
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: '
            path'
                            StringLiteral
                          PropertyAssignment
                            Identifier: '
            content'
                            StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' host'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' TestServerHost'
                            Identifier: 'createServerHost'
                          ArrayLiteralExpression
                            Identifier: 'userTs'
                            Identifier: ' newTs'
                            Identifier: ' tsconfig'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' options'
                        TypeReference
                          QualifiedName
                            Identifier: ' ts'
                            Identifier: 'CompilerOptions'
                        ObjectLiteralExpression
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' moduleResolutionCache'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' ts'
                            Identifier: 'createModuleResolutionCache'
                          CallExpression
                            PropertyAccessExpression
                              Identifier: 'host'
                              Identifier: 'getCurrentDirectory'
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' ts'
                              Identifier: 'createGetCanonicalFileName'
                            PropertyAccessExpression
                              Identifier: 'host'
                              Identifier: 'useCaseSensitiveFileNames'
                          Identifier: ' options'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' lsHost'
                        TypeReference
                          QualifiedName
                            Identifier: ' ts'
                            Identifier: 'LanguageServiceHost'
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: '
            getCompilationSettings'
                            ArrowFunction
                              EqualsGreaterThanToken
                              Identifier: ' options'
                          PropertyAssignment
                            Identifier: '
            getScriptFileNames'
                            ArrowFunction
                              EqualsGreaterThanToken
                              ArrayLiteralExpression
                                PropertyAccessExpression
                                  Identifier: 'newTs'
                                  Identifier: 'path'
                                PropertyAccessExpression
                                  Identifier: ' userTs'
                                  Identifier: 'path'
                          PropertyAssignment
                            Identifier: '
            getScriptVersion'
                            ArrowFunction
                              Parameter
                                Identifier: ' fileName'
                              EqualsGreaterThanToken
                              NonNullExpression
                                CallExpression
                                  PropertyAccessExpression
                                    Identifier: ' host'
                                    Identifier: 'readFile'
                                  Identifier: 'fileName'
                          PropertyAssignment
                            Identifier: '
            getScriptSnapshot'
                            ArrowFunction
                              Parameter
                                Identifier: ' fileName'
                              EqualsGreaterThanToken
                              Block
                                VariableStatement
                                  VariableDeclarationList
                                    VariableDeclaration
                                      Identifier: ' text'
                                      CallExpression
                                        PropertyAccessExpression
                                          Identifier: ' host'
                                          Identifier: 'readFile'
                                        Identifier: 'fileName'
                                ReturnStatement
                                  ConditionalExpression
                                    Identifier: ' text'
                                    QuestionToken
                                    CallExpression
                                      PropertyAccessExpression
                                        PropertyAccessExpression
                                          Identifier: ' ts'
                                          Identifier: 'ScriptSnapshot'
                                        Identifier: 'fromString'
                                      Identifier: 'text'
                                    ColonToken
                                    Identifier: ' undefined'
                          PropertyAssignment
                            Identifier: '
            getCurrentDirectory'
                            ArrowFunction
                              EqualsGreaterThanToken
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: ' host'
                                  Identifier: 'getCurrentDirectory'
                          PropertyAssignment
                            Identifier: '
            getDefaultLibFileName'
                            ArrowFunction
                              Parameter
                                Identifier: ' options'
                              EqualsGreaterThanToken
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: ' ts'
                                  Identifier: 'getDefaultLibFileName'
                                Identifier: 'options'
                          PropertyAssignment
                            Identifier: '
            readFile'
                            ArrowFunction
                              Parameter
                                Identifier: ' path'
                              EqualsGreaterThanToken
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: ' host'
                                  Identifier: 'readFile'
                                Identifier: 'path'
                          PropertyAssignment
                            Identifier: '
            fileExists'
                            ArrowFunction
                              Parameter
                                Identifier: ' path'
                              EqualsGreaterThanToken
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: ' host'
                                  Identifier: 'fileExists'
                                Identifier: 'path'
                          PropertyAssignment
                            Identifier: '
            resolveModuleNames'
                            ArrowFunction
                              Parameter
                                Identifier: 'moduleNames'
                              Parameter
                                Identifier: ' containingFile'
                              EqualsGreaterThanToken
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: ' moduleNames'
                                  Identifier: 'map'
                                ArrowFunction
                                  Parameter
                                    Identifier: 'name'
                                  EqualsGreaterThanToken
                                  PropertyAccessExpression
                                    CallExpression
                                      PropertyAccessExpression
                                        Identifier: ' ts'
                                        Identifier: 'resolveModuleName'
                                      Identifier: 'name'
                                      Identifier: ' containingFile'
                                      Identifier: ' options'
                                      Identifier: ' lsHost'
                                      Identifier: ' moduleResolutionCache'
                                    Identifier: 'resolvedModule'
                          PropertyAssignment
                            Identifier: '
            getResolvedModuleWithFailedLookupLocationsFromCache'
                            ArrowFunction
                              Parameter
                                Identifier: 'moduleName'
                              Parameter
                                Identifier: ' containingFile'
                              Parameter
                                Identifier: ' mode'
                              EqualsGreaterThanToken
                              CallExpression
                                PropertyAccessExpression
                                  Identifier: ' moduleResolutionCache'
                                  Identifier: 'getFromDirectoryCache'
                                Identifier: 'moduleName'
                                Identifier: ' mode'
                                CallExpression
                                  PropertyAccessExpression
                                    Identifier: ' ts'
                                    Identifier: 'getDirectoryPath'
                                  Identifier: 'containingFile'
                                Identifier: ' /*redirectedReference*/ undefined'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' service'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' ts'
                            Identifier: 'createLanguageService'
                          Identifier: 'lsHost'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' edits'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' service'
                            Identifier: 'getEditsForFileRename'
                          StringLiteral
                          StringLiteral
                          PropertyAccessExpression
                            Identifier: ' ts'
                            Identifier: 'testFormatSettings'
                          PropertyAccessExpression
                            Identifier: ' ts'
                            Identifier: 'emptyOptions'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'deepEqual'
                      TypeOperator
                        ArrayType
                          TypeReference
                            QualifiedName
                              Identifier: ' ts'
                              Identifier: 'FileTextChanges'
                      Identifier: 'edits'
                      ArrayLiteralExpression
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: '
            fileName'
                            StringLiteral
                          PropertyAssignment
                            Identifier: '
            textChanges'
                            ArrayLiteralExpression
                              ObjectLiteralExpression
                                PropertyAssignment
                                  Identifier: '
                span'
                                  CallExpression
                                    Identifier: ' textSpanFromSubstring'
                                    PropertyAccessExpression
                                      Identifier: 'userTs'
                                      Identifier: 'content'
                                    StringLiteral
                                PropertyAssignment
                                  Identifier: '
                newText'
                                  StringLiteral
          ExpressionStatement
            CallExpression
              Identifier: '

    it'
              StringLiteral
              ArrowFunction
                EqualsGreaterThanToken
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' aUserTs'
                        TypeReference
                          Identifier: ' File'
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: '
            path'
                            StringLiteral
                          PropertyAssignment
                            Identifier: '
            content'
                            StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' aOldTs'
                        TypeReference
                          Identifier: ' File'
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: '
            path'
                            StringLiteral
                          PropertyAssignment
                            Identifier: '
            content'
                            StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' aTsconfig'
                        TypeReference
                          Identifier: ' File'
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: '
            path'
                            StringLiteral
                          PropertyAssignment
                            Identifier: '
            content'
                            CallExpression
                              Identifier: ' jsonToReadableText'
                              ObjectLiteralExpression
                                PropertyAssignment
                                  Identifier: ' files'
                                  ArrayLiteralExpression
                                    StringLiteral
                                    StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' bUserTs'
                        TypeReference
                          Identifier: ' File'
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: '
            path'
                            StringLiteral
                          PropertyAssignment
                            Identifier: '
            content'
                            StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' bTsconfig'
                        TypeReference
                          Identifier: ' File'
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: '
            path'
                            StringLiteral
                          PropertyAssignment
                            Identifier: '
            content'
                            StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' host'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' TestServerHost'
                            Identifier: 'createServerHost'
                          ArrayLiteralExpression
                            Identifier: 'aUserTs'
                            Identifier: ' aOldTs'
                            Identifier: ' aTsconfig'
                            Identifier: ' bUserTs'
                            Identifier: ' bTsconfig'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' session'
                        NewExpression
                          Identifier: ' TestSession'
                          Identifier: 'host'
                  ExpressionStatement
                    CallExpression
                      Identifier: '
        openFilesForSession'
                      ArrayLiteralExpression
                        Identifier: 'aUserTs'
                        Identifier: ' bUserTs'
                      Identifier: ' session'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '

        session'
                        Identifier: 'executeCommandSeq'
                      TypeReference
                        QualifiedName
                          QualifiedName
                            QualifiedName
                              Identifier: 'ts'
                              Identifier: 'server'
                            Identifier: 'protocol'
                          Identifier: 'GetEditsForFileRenameRequest'
                      ObjectLiteralExpression
                        PropertyAssignment
                          Identifier: '
            command'
                          PropertyAccessExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  Identifier: ' ts'
                                  Identifier: 'server'
                                Identifier: 'protocol'
                              Identifier: 'CommandTypes'
                            Identifier: 'GetEditsForFileRename'
                        PropertyAssignment
                          Identifier: '
            arguments'
                          ObjectLiteralExpression
                            PropertyAssignment
                              Identifier: '
                oldFilePath'
                              PropertyAccessExpression
                                Identifier: ' aOldTs'
                                Identifier: 'path'
                            PropertyAssignment
                              Identifier: '
                newFilePath'
                              StringLiteral
                  ExpressionStatement
                    CallExpression
                      Identifier: '
        baselineTsserverLogs'
                      StringLiteral
                      StringLiteral
                      Identifier: ' session'
          ExpressionStatement
            CallExpression
              Identifier: '

    it'
              StringLiteral
              ArrowFunction
                EqualsGreaterThanToken
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' aTs'
                        TypeReference
                          Identifier: ' File'
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: ' path'
                            StringLiteral
                          PropertyAssignment
                            Identifier: ' content'
                            StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' cTs'
                        TypeReference
                          Identifier: ' File'
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: ' path'
                            StringLiteral
                          PropertyAssignment
                            Identifier: ' content'
                            StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' tsconfig'
                        TypeReference
                          Identifier: ' File'
                        ObjectLiteralExpression
                          PropertyAssignment
                            Identifier: ' path'
                            StringLiteral
                          PropertyAssignment
                            Identifier: ' content'
                            CallExpression
                              Identifier: ' jsonToReadableText'
                              ObjectLiteralExpression
                                PropertyAssignment
                                  Identifier: ' files'
                                  ArrayLiteralExpression
                                    StringLiteral
                                    StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' host'
                        CallExpression
                          PropertyAccessExpression
                            Identifier: ' TestServerHost'
                            Identifier: 'createServerHost'
                          ArrayLiteralExpression
                            Identifier: 'aTs'
                            Identifier: ' cTs'
                            Identifier: ' tsconfig'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' session'
                        NewExpression
                          Identifier: ' TestSession'
                          Identifier: 'host'
                  ExpressionStatement
                    CallExpression
                      Identifier: '
        openFilesForSession'
                      ArrayLiteralExpression
                        Identifier: 'aTs'
                        Identifier: ' cTs'
                      Identifier: ' session'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '

        session'
                        Identifier: 'executeCommandSeq'
                      TypeReference
                        QualifiedName
                          QualifiedName
                            QualifiedName
                              Identifier: 'ts'
                              Identifier: 'server'
                            Identifier: 'protocol'
                          Identifier: 'GetEditsForFileRenameRequest'
                      ObjectLiteralExpression
                        PropertyAssignment
                          Identifier: '
            command'
                          PropertyAccessExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  Identifier: ' ts'
                                  Identifier: 'server'
                                Identifier: 'protocol'
                              Identifier: 'CommandTypes'
                            Identifier: 'GetEditsForFileRename'
                        PropertyAssignment
                          Identifier: '
            arguments'
                          ObjectLiteralExpression
                            PropertyAssignment
                              Identifier: '
                oldFilePath'
                              StringLiteral
                            PropertyAssignment
                              Identifier: '
                newFilePath'
                              PropertyAccessExpression
                                Identifier: ' cTs'
                                Identifier: 'path'
                  ExpressionStatement
                    CallExpression
                      Identifier: '
        baselineTsserverLogs'
                      StringLiteral
                      StringLiteral
                      Identifier: ' session'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                ArrayLiteralExpression
                  FalseKeyword
                  TrueKeyword
                Identifier: 'forEach'
              ArrowFunction
                Parameter
                  Identifier: 'withUpdateOpen'
                EqualsGreaterThanToken
                CallExpression
                  PropertyAccessExpression
                    ArrayLiteralExpression
                      TrueKeyword
                      FalseKeyword
                    Identifier: 'forEach'
                  ArrowFunction
                    Parameter
                      Identifier: 'openedBeforeChange'
                    EqualsGreaterThanToken
                    Block
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            ArrayLiteralExpression
                              TrueKeyword
                              FalseKeyword
                            Identifier: 'forEach'
                          ArrowFunction
                            Parameter
                              Identifier: 'closedBeforeChange'
                            EqualsGreaterThanToken
                            Block
                              IfStatement
                                BinaryExpression
                                  Identifier: 'closedBeforeChange'
                                  AmpersandAmpersandToken
                                  PrefixUnaryExpression
                                    Identifier: 'openedBeforeChange'
                                ReturnStatement
                              ExpressionStatement
                                CallExpression
                                  Identifier: '
                it'
                                  TemplateExpression
                                    TemplateHead
                                    TemplateSpan
                                      ConditionalExpression
                                        Identifier: 'openedBeforeChange'
                                        QuestionToken
                                        StringLiteral
                                        ColonToken
                                        StringLiteral
                                      TemplateMiddle
                                    TemplateSpan
                                      ConditionalExpression
                                        Identifier: 'closedBeforeChange'
                                        QuestionToken
                                        StringLiteral
                                        ColonToken
                                        StringLiteral
                                      TemplateMiddle
                                    TemplateSpan
                                      ConditionalExpression
                                        Identifier: 'withUpdateOpen'
                                        QuestionToken
                                        StringLiteral
                                        ColonToken
                                        StringLiteral
                                      TemplateTail
                                  ArrowFunction
                                    EqualsGreaterThanToken
                                    Block
                                      VariableStatement
                                        VariableDeclarationList
                                          VariableDeclaration
                                            Identifier: ' oldFilePath'
                                            StringLiteral
                                      VariableStatement
                                        VariableDeclarationList
                                          VariableDeclaration
                                            Identifier: ' host'
                                            CallExpression
                                              PropertyAccessExpression
                                                Identifier: ' TestServerHost'
                                                Identifier: 'createServerHost'
                                              ObjectLiteralExpression
                                                PropertyAssignment
                                                  StringLiteral
                                                  NoSubstitutionTemplateLiteral
                                                PropertyAssignment
                                                  ComputedPropertyName
                                                    Identifier: 'oldFilePath'
                                                  NoSubstitutionTemplateLiteral
                                                PropertyAssignment
                                                  StringLiteral
                                                  CallExpression
                                                    Identifier: ' jsonToReadableText'
                                                    ObjectLiteralExpression
                                                      PropertyAssignment
                                                        Identifier: '
                            compilerOptions'
                                                        ObjectLiteralExpression
                                                          PropertyAssignment
                                                            Identifier: '
                                paths'
                                                            ObjectLiteralExpression
                                                              PropertyAssignment
                                                                StringLiteral
                                                                ArrayLiteralExpression
                                                                  StringLiteral
                                      VariableStatement
                                        VariableDeclarationList
                                          VariableDeclaration
                                            Identifier: ' session'
                                            NewExpression
                                              Identifier: ' TestSession'
                                              ObjectLiteralExpression
                                                ShorthandPropertyAssignment
                                                  Identifier: ' host'
                                                PropertyAssignment
                                                  Identifier: ' canUseWatchEvents'
                                                  TrueKeyword
                                                PropertyAssignment
                                                  Identifier: ' canUseEvents'
                                                  TrueKeyword
                                      IfStatement
                                        Identifier: 'withUpdateOpen'
                                        Block
                                          ExpressionStatement
                                            CallExpression
                                              PropertyAccessExpression
                                                Identifier: '
                        session'
                                                Identifier: 'executeCommandSeq'
                                              TypeReference
                                                QualifiedName
                                                  QualifiedName
                                                    QualifiedName
                                                      Identifier: 'ts'
                                                      Identifier: 'server'
                                                    Identifier: 'protocol'
                                                  Identifier: 'UpdateOpenRequest'
                                              ObjectLiteralExpression
                                                PropertyAssignment
                                                  Identifier: '
                            command'
                                                  PropertyAccessExpression
                                                    PropertyAccessExpression
                                                      PropertyAccessExpression
                                                        PropertyAccessExpression
                                                          Identifier: ' ts'
                                                          Identifier: 'server'
                                                        Identifier: 'protocol'
                                                      Identifier: 'CommandTypes'
                                                    Identifier: 'UpdateOpen'
                                                PropertyAssignment
                                                  Identifier: '
                            arguments'
                                                  ObjectLiteralExpression
                                                    PropertyAssignment
                                                      Identifier: '
                                openFiles'
                                                      ArrayLiteralExpression
                                                        ObjectLiteralExpression
                                                          PropertyAssignment
                                                            Identifier: '
                                        file'
                                                            StringLiteral
                                                          PropertyAssignment
                                                            Identifier: '
                                        projectRootPath'
                                                            StringLiteral
                                                        ObjectLiteralExpression
                                                          PropertyAssignment
                                                            Identifier: '
                                        file'
                                                            Identifier: ' oldFilePath'
                                                          PropertyAssignment
                                                            Identifier: '
                                        projectRootPath'
                                                            StringLiteral
                                        Block
                                          ExpressionStatement
                                            CallExpression
                                              Identifier: '
                        openFilesForSession'
                                              ArrayLiteralExpression
                                                ObjectLiteralExpression
                                                  PropertyAssignment
                                                    Identifier: ' file'
                                                    StringLiteral
                                                  PropertyAssignment
                                                    Identifier: ' projectRootPath'
                                                    StringLiteral
                                                ObjectLiteralExpression
                                                  PropertyAssignment
                                                    Identifier: ' file'
                                                    Identifier: ' oldFilePath'
                                                  PropertyAssignment
                                                    Identifier: ' projectRootPath'
                                                    StringLiteral
                                              Identifier: ' session'
                                      VariableStatement
                                        VariableDeclarationList
                                          VariableDeclaration
                                            Identifier: ' newFilePath'
                                            StringLiteral
                                      ExpressionStatement
                                        CallExpression
                                          PropertyAccessExpression
                                            Identifier: '
                    host'
                                            Identifier: 'renameFile'
                                          Identifier: 'oldFilePath'
                                          Identifier: ' newFilePath'
                                      IfStatement
                                        PrefixUnaryExpression
                                          Identifier: 'openedBeforeChange'
                                        ExpressionStatement
                                          CallExpression
                                            PropertyAccessExpression
                                              Identifier: ' session'
                                              Identifier: 'invokeWatchChanges'
                                      IfStatement
                                        Identifier: 'withUpdateOpen'
                                        Block
                                          ExpressionStatement
                                            CallExpression
                                              PropertyAccessExpression
                                                Identifier: '
                        session'
                                                Identifier: 'executeCommandSeq'
                                              TypeReference
                                                QualifiedName
                                                  QualifiedName
                                                    QualifiedName
                                                      Identifier: 'ts'
                                                      Identifier: 'server'
                                                    Identifier: 'protocol'
                                                  Identifier: 'UpdateOpenRequest'
                                              ObjectLiteralExpression
                                                PropertyAssignment
                                                  Identifier: '
                            command'
                                                  PropertyAccessExpression
                                                    PropertyAccessExpression
                                                      PropertyAccessExpression
                                                        PropertyAccessExpression
                                                          Identifier: ' ts'
                                                          Identifier: 'server'
                                                        Identifier: 'protocol'
                                                      Identifier: 'CommandTypes'
                                                    Identifier: 'UpdateOpen'
                                                PropertyAssignment
                                                  Identifier: '
                            arguments'
                                                  ObjectLiteralExpression
                                                    PropertyAssignment
                                                      Identifier: '
                                openFiles'
                                                      ArrayLiteralExpression
                                                        ObjectLiteralExpression
                                                          PropertyAssignment
                                                            Identifier: '
                                    file'
                                                            Identifier: ' newFilePath'
                                                          PropertyAssignment
                                                            Identifier: '
                                    fileContent'
                                                            NoSubstitutionTemplateLiteral
                                                          PropertyAssignment
                                                            Identifier: '
                                    projectRootPath'
                                                            StringLiteral
                                                    PropertyAssignment
                                                      Identifier: '
                                closedFiles'
                                                      ArrayLiteralExpression
                                                        Identifier: 'oldFilePath'
                                        Block
                                          ExpressionStatement
                                            CallExpression
                                              Identifier: '
                        closeFilesForSession'
                                              ArrayLiteralExpression
                                                Identifier: 'oldFilePath'
                                              Identifier: ' session'
                                          ExpressionStatement
                                            CallExpression
                                              Identifier: '
                        openFilesForSession'
                                              ArrayLiteralExpression
                                                ObjectLiteralExpression
                                                  PropertyAssignment
                                                    Identifier: ' file'
                                                    Identifier: ' newFilePath'
                                                  PropertyAssignment
                                                    Identifier: ' projectRootPath'
                                                    StringLiteral
                                                  PropertyAssignment
                                                    Identifier: ' content'
                                                    NoSubstitutionTemplateLiteral
                                              Identifier: ' session'
                                      ExpressionStatement
                                        CallExpression
                                          PropertyAccessExpression
                                            Identifier: '
                    session'
                                            Identifier: 'executeCommandSeq'
                                          TypeReference
                                            QualifiedName
                                              QualifiedName
                                                QualifiedName
                                                  Identifier: 'ts'
                                                  Identifier: 'server'
                                                Identifier: 'protocol'
                                              Identifier: 'GetEditsForFileRenameRequest'
                                          ObjectLiteralExpression
                                            PropertyAssignment
                                              Identifier: '
                        command'
                                              PropertyAccessExpression
                                                PropertyAccessExpression
                                                  PropertyAccessExpression
                                                    PropertyAccessExpression
                                                      Identifier: ' ts'
                                                      Identifier: 'server'
                                                    Identifier: 'protocol'
                                                  Identifier: 'CommandTypes'
                                                Identifier: 'GetEditsForFileRename'
                                            PropertyAssignment
                                              Identifier: '
                        arguments'
                                              ObjectLiteralExpression
                                                ShorthandPropertyAssignment
                                                  Identifier: ' oldFilePath'
                                                ShorthandPropertyAssignment
                                                  Identifier: ' newFilePath'
                                      IfStatement
                                        Identifier: 'closedBeforeChange'
                                        Block
                                          IfStatement
                                            Identifier: 'withUpdateOpen'
                                            Block
                                              ExpressionStatement
                                                CallExpression
                                                  PropertyAccessExpression
                                                    Identifier: '
                            session'
                                                    Identifier: 'executeCommandSeq'
                                                  TypeReference
                                                    QualifiedName
                                                      QualifiedName
                                                        QualifiedName
                                                          Identifier: 'ts'
                                                          Identifier: 'server'
                                                        Identifier: 'protocol'
                                                      Identifier: 'UpdateOpenRequest'
                                                  ObjectLiteralExpression
                                                    PropertyAssignment
                                                      Identifier: '
                                command'
                                                      PropertyAccessExpression
                                                        PropertyAccessExpression
                                                          PropertyAccessExpression
                                                            PropertyAccessExpression
                                                              Identifier: ' ts'
                                                              Identifier: 'server'
                                                            Identifier: 'protocol'
                                                          Identifier: 'CommandTypes'
                                                        Identifier: 'UpdateOpen'
                                                    PropertyAssignment
                                                      Identifier: '
                                arguments'
                                                      ObjectLiteralExpression
                                                        PropertyAssignment
                                                          Identifier: ' closedFiles'
                                                          ArrayLiteralExpression
                                                            Identifier: 'newFilePath'
                                            ExpressionStatement
                                              CallExpression
                                                Identifier: ' closeFilesForSession'
                                                ArrayLiteralExpression
                                                  Identifier: 'newFilePath'
                                                Identifier: ' session'
                                      IfStatement
                                        Identifier: 'openedBeforeChange'
                                        ExpressionStatement
                                          CallExpression
                                            PropertyAccessExpression
                                              Identifier: ' session'
                                              Identifier: 'invokeWatchChanges'
                                      IfStatement
                                        PrefixUnaryExpression
                                          Identifier: 'closedBeforeChange'
                                        Block
                                          IfStatement
                                            Identifier: 'withUpdateOpen'
                                            Block
                                              ExpressionStatement
                                                CallExpression
                                                  PropertyAccessExpression
                                                    Identifier: '
                            session'
                                                    Identifier: 'executeCommandSeq'
                                                  TypeReference
                                                    QualifiedName
                                                      QualifiedName
                                                        QualifiedName
                                                          Identifier: 'ts'
                                                          Identifier: 'server'
                                                        Identifier: 'protocol'
                                                      Identifier: 'UpdateOpenRequest'
                                                  ObjectLiteralExpression
                                                    PropertyAssignment
                                                      Identifier: '
                                command'
                                                      PropertyAccessExpression
                                                        PropertyAccessExpression
                                                          PropertyAccessExpression
                                                            PropertyAccessExpression
                                                              Identifier: ' ts'
                                                              Identifier: 'server'
                                                            Identifier: 'protocol'
                                                          Identifier: 'CommandTypes'
                                                        Identifier: 'UpdateOpen'
                                                    PropertyAssignment
                                                      Identifier: '
                                arguments'
                                                      ObjectLiteralExpression
                                                        PropertyAssignment
                                                          Identifier: ' closedFiles'
                                                          ArrayLiteralExpression
                                                            Identifier: 'newFilePath'
                                            ExpressionStatement
                                              CallExpression
                                                Identifier: ' closeFilesForSession'
                                                ArrayLiteralExpression
                                                  Identifier: 'newFilePath'
                                                Identifier: ' session'
                                      ExpressionStatement
                                        CallExpression
                                          Identifier: '
                    verifyGetErrRequest'
                                          ObjectLiteralExpression
                                            ShorthandPropertyAssignment
                                              Identifier: '
                        session'
                                            PropertyAssignment
                                              Identifier: '
                        files'
                                              ArrayLiteralExpression
                                                StringLiteral
                                      ExpressionStatement
                                        CallExpression
                                          Identifier: '
                    baselineTsserverLogs'
                                          StringLiteral
                                          TemplateExpression
                                            TemplateHead
                                            TemplateSpan
                                              ConditionalExpression
                                                Identifier: 'openedBeforeChange'
                                                QuestionToken
                                                StringLiteral
                                                ColonToken
                                                StringLiteral
                                              TemplateMiddle
                                            TemplateSpan
                                              ConditionalExpression
                                                Identifier: 'closedBeforeChange'
                                                QuestionToken
                                                StringLiteral
                                                ColonToken
                                                StringLiteral
                                              TemplateMiddle
                                            TemplateSpan
                                              ConditionalExpression
                                                Identifier: 'withUpdateOpen'
                                                QuestionToken
                                                StringLiteral
                                                ColonToken
                                                StringLiteral
                                              TemplateTail
                                          Identifier: ' session'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                ArrayLiteralExpression
                  TrueKeyword
                  FalseKeyword
                Identifier: 'forEach'
              ArrowFunction
                Parameter
                  Identifier: 'canUseWatchEvents'
                EqualsGreaterThanToken
                CallExpression
                  Identifier: '
        it'
                  TemplateExpression
                    TemplateHead
                    TemplateSpan
                      ConditionalExpression
                        Identifier: 'canUseWatchEvents'
                        QuestionToken
                        StringLiteral
                        ColonToken
                        StringLiteral
                      TemplateTail
                  ArrowFunction
                    EqualsGreaterThanToken
                    Block
                      VariableStatement
                        VariableDeclarationList
                          VariableDeclaration
                            Identifier: ' alertText'
                            TaggedTemplateExpression
                              Identifier: ' dedent'
                              NoSubstitutionTemplateLiteral
                      VariableStatement
                        VariableDeclarationList
                          VariableDeclaration
                            Identifier: ' projectRootPath'
                            StringLiteral
                      VariableStatement
                        VariableDeclarationList
                          VariableDeclaration
                            Identifier: ' indexTs'
                            TemplateExpression
                              TemplateHead
                              TemplateSpan
                                Identifier: 'projectRootPath'
                                TemplateTail
                      VariableStatement
                        VariableDeclarationList
                          VariableDeclaration
                            Identifier: ' indexFileText'
                            TaggedTemplateExpression
                              Identifier: ' dedent'
                              NoSubstitutionTemplateLiteral
                      VariableStatement
                        VariableDeclarationList
                          VariableDeclaration
                            Identifier: ' componentsWhatever'
                            TemplateExpression
                              TemplateHead
                              TemplateSpan
                                Identifier: 'projectRootPath'
                                TemplateTail
                      VariableStatement
                        VariableDeclarationList
                          VariableDeclaration
                            Identifier: ' functionsWhatever'
                            TemplateExpression
                              TemplateHead
                              TemplateSpan
                                Identifier: 'projectRootPath'
                                TemplateTail
                      VariableStatement
                        VariableDeclarationList
                          VariableDeclaration
                            Identifier: ' host'
                            CallExpression
                              PropertyAccessExpression
                                Identifier: ' TestServerHost'
                                Identifier: 'createServerHost'
                              ObjectLiteralExpression
                                PropertyAssignment
                                  StringLiteral
                                  CallExpression
                                    Identifier: ' jsonToReadableText'
                                    ObjectLiteralExpression
                                      PropertyAssignment
                                        Identifier: '
                    compilerOptions'
                                        ObjectLiteralExpression
                                          PropertyAssignment
                                            Identifier: '
                        target'
                                            StringLiteral
                                          PropertyAssignment
                                            Identifier: '
                        module'
                                            StringLiteral
                                          PropertyAssignment
                                            Identifier: '
                        paths'
                                            ObjectLiteralExpression
                                              PropertyAssignment
                                                StringLiteral
                                                ArrayLiteralExpression
                                                  StringLiteral
                                          PropertyAssignment
                                            Identifier: '
                        esModuleInterop'
                                            TrueKeyword
                                          PropertyAssignment
                                            Identifier: '
                        forceConsistentCasingInFileNames'
                                            TrueKeyword
                                          PropertyAssignment
                                            Identifier: '
                        strict'
                                            TrueKeyword
                                          PropertyAssignment
                                            Identifier: '
                        skipLibCheck'
                                            TrueKeyword
                                PropertyAssignment
                                  ComputedPropertyName
                                    Identifier: 'indexTs'
                                  Identifier: ' indexFileText'
                                PropertyAssignment
                                  ComputedPropertyName
                                    TemplateExpression
                                      TemplateHead
                                      TemplateSpan
                                        Identifier: 'componentsWhatever'
                                        TemplateTail
                                  Identifier: ' alertText'
                                PropertyAssignment
                                  ComputedPropertyName
                                    TemplateExpression
                                      TemplateHead
                                      TemplateSpan
                                        Identifier: 'functionsWhatever'
                                        TemplateTail
                                  StringLiteral
                      VariableStatement
                        VariableDeclarationList
                          VariableDeclaration
                            Identifier: ' session'
                            NewExpression
                              Identifier: ' TestSession'
                              ObjectLiteralExpression
                                ShorthandPropertyAssignment
                                  Identifier: ' host'
                                ShorthandPropertyAssignment
                                  Identifier: ' canUseWatchEvents'
                                PropertyAssignment
                                  Identifier: ' canUseEvents'
                                  TrueKeyword
                      ExpressionStatement
                        CallExpression
                          Identifier: '
            openFilesForSession'
                          ArrayLiteralExpression
                            ObjectLiteralExpression
                              PropertyAssignment
                                Identifier: ' file'
                                Identifier: ' indexTs'
                              ShorthandPropertyAssignment
                                Identifier: ' projectRootPath'
                          Identifier: ' session'
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
            host'
                            Identifier: 'renameFolder'
                          Identifier: 'componentsWhatever'
                          Identifier: ' functionsWhatever'
                          TrueKeyword
                      IfStatement
                        Identifier: 'canUseWatchEvents'
                        ExpressionStatement
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' session'
                              Identifier: 'invokeWatchChanges'
                      ExpressionStatement
                        CallExpression
                          Identifier: '
            openFilesForSession'
                          ArrayLiteralExpression
                            ObjectLiteralExpression
                              PropertyAssignment
                                Identifier: '
                file'
                                TemplateExpression
                                  TemplateHead
                                  TemplateSpan
                                    Identifier: 'functionsWhatever'
                                    TemplateTail
                              PropertyAssignment
                                Identifier: '
                content'
                                Identifier: ' alertText'
                              ShorthandPropertyAssignment
                                Identifier: '
                projectRootPath'
                          Identifier: ' session'
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
            session'
                            Identifier: 'executeCommandSeq'
                          TypeReference
                            QualifiedName
                              QualifiedName
                                QualifiedName
                                  Identifier: 'ts'
                                  Identifier: 'server'
                                Identifier: 'protocol'
                              Identifier: 'GetEditsForFileRenameRequest'
                          ObjectLiteralExpression
                            PropertyAssignment
                              Identifier: '
                command'
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    PropertyAccessExpression
                                      Identifier: ' ts'
                                      Identifier: 'server'
                                    Identifier: 'protocol'
                                  Identifier: 'CommandTypes'
                                Identifier: 'GetEditsForFileRename'
                            PropertyAssignment
                              Identifier: '
                arguments'
                              ObjectLiteralExpression
                                PropertyAssignment
                                  Identifier: ' oldFilePath'
                                  Identifier: ' componentsWhatever'
                                PropertyAssignment
                                  Identifier: ' newFilePath'
                                  Identifier: ' functionsWhatever'
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
            // Apply edit to index.ts
            session'
                            Identifier: 'executeCommandSeq'
                          TypeReference
                            QualifiedName
                              QualifiedName
                                QualifiedName
                                  Identifier: 'ts'
                                  Identifier: 'server'
                                Identifier: 'protocol'
                              Identifier: 'UpdateOpenRequest'
                          ObjectLiteralExpression
                            PropertyAssignment
                              Identifier: '
                command'
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    PropertyAccessExpression
                                      Identifier: ' ts'
                                      Identifier: 'server'
                                    Identifier: 'protocol'
                                  Identifier: 'CommandTypes'
                                Identifier: 'UpdateOpen'
                            PropertyAssignment
                              Identifier: '
                arguments'
                              ObjectLiteralExpression
                                PropertyAssignment
                                  Identifier: '
                    changedFiles'
                                  ArrayLiteralExpression
                                    ObjectLiteralExpression
                                      PropertyAssignment
                                        Identifier: '
                        fileName'
                                        Identifier: ' indexTs'
                                      PropertyAssignment
                                        Identifier: '
                        textChanges'
                                        ArrayLiteralExpression
                                          ObjectLiteralExpression
                                            SpreadAssignment
                                              CallExpression
                                                Identifier: 'protocolTextSpanFromSubstring'
                                                Identifier: 'indexFileText'
                                                StringLiteral
                                            PropertyAssignment
                                              Identifier: '
                            newText'
                                              StringLiteral
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
            host'
                            Identifier: 'runQueuedTimeoutCallbacks'
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
            host'
                            Identifier: 'renameFolder'
                          Identifier: 'functionsWhatever'
                          Identifier: ' componentsWhatever'
                          TrueKeyword
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
            session'
                            Identifier: 'executeCommandSeq'
                          TypeReference
                            QualifiedName
                              QualifiedName
                                QualifiedName
                                  Identifier: 'ts'
                                  Identifier: 'server'
                                Identifier: 'protocol'
                              Identifier: 'UpdateOpenRequest'
                          ObjectLiteralExpression
                            PropertyAssignment
                              Identifier: '
                command'
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    PropertyAccessExpression
                                      Identifier: ' ts'
                                      Identifier: 'server'
                                    Identifier: 'protocol'
                                  Identifier: 'CommandTypes'
                                Identifier: 'UpdateOpen'
                            PropertyAssignment
                              Identifier: '
                arguments'
                              ObjectLiteralExpression
                                PropertyAssignment
                                  Identifier: '
                    openFiles'
                                  ArrayLiteralExpression
                                    ObjectLiteralExpression
                                      PropertyAssignment
                                        Identifier: '
                        file'
                                        TemplateExpression
                                          TemplateHead
                                          TemplateSpan
                                            Identifier: 'componentsWhatever'
                                            TemplateTail
                                      PropertyAssignment
                                        Identifier: '
                        fileContent'
                                        Identifier: ' alertText'
                                      ShorthandPropertyAssignment
                                        Identifier: '
                        projectRootPath'
                                PropertyAssignment
                                  Identifier: '
                    closedFiles'
                                  ArrayLiteralExpression
                                    TemplateExpression
                                      TemplateHead
                                      TemplateSpan
                                        Identifier: 'functionsWhatever'
                                        TemplateTail
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
            session'
                            Identifier: 'executeCommandSeq'
                          TypeReference
                            QualifiedName
                              QualifiedName
                                QualifiedName
                                  Identifier: 'ts'
                                  Identifier: 'server'
                                Identifier: 'protocol'
                              Identifier: 'GetEditsForFileRenameRequest'
                          ObjectLiteralExpression
                            PropertyAssignment
                              Identifier: '
                command'
                              PropertyAccessExpression
                                PropertyAccessExpression
                                  PropertyAccessExpression
                                    PropertyAccessExpression
                                      Identifier: ' ts'
                                      Identifier: 'server'
                                    Identifier: 'protocol'
                                  Identifier: 'CommandTypes'
                                Identifier: 'GetEditsForFileRename'
                            PropertyAssignment
                              Identifier: '
                arguments'
                              ObjectLiteralExpression
                                PropertyAssignment
                                  Identifier: ' oldFilePath'
                                  Identifier: ' functionsWhatever'
                                PropertyAssignment
                                  Identifier: ' newFilePath'
                                  Identifier: ' componentsWhatever'
                      IfStatement
                        Identifier: 'canUseWatchEvents'
                        ExpressionStatement
                          CallExpression
                            PropertyAccessExpression
                              Identifier: ' session'
                              Identifier: 'invokeWatchChanges'
                      ExpressionStatement
                        CallExpression
                          PropertyAccessExpression
                            Identifier: '
            host'
                            Identifier: 'runQueuedTimeoutCallbacks'
                      ExpressionStatement
                        CallExpression
                          Identifier: '
            baselineTsserverLogs'
                          StringLiteral
                          TemplateExpression
                            TemplateHead
                            TemplateSpan
                              ConditionalExpression
                                Identifier: 'canUseWatchEvents'
                                QuestionToken
                                StringLiteral
                                ColonToken
                                StringLiteral
                              TemplateTail
                          Identifier: ' session'
