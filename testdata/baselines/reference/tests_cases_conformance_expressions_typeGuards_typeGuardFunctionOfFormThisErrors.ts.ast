SourceFile
  ClassDeclaration
    Identifier: ' RoyalGuard'
    MethodDeclaration
      Identifier: '
    isLeader'
      TypePredicate
        ThisType
        TypeReference
          Identifier: ' LeadGuard'
      Block
        ReturnStatement
          BinaryExpression
            ThisKeyword
            InstanceOfKeyword
            Identifier: ' LeadGuard'
    MethodDeclaration
      Identifier: '
    isFollower'
      TypePredicate
        ThisType
        TypeReference
          Identifier: ' FollowerGuard'
      Block
        ReturnStatement
          BinaryExpression
            ThisKeyword
            InstanceOfKeyword
            Identifier: ' FollowerGuard'
  ClassDeclaration
    Identifier: ' LeadGuard'
    HeritageClause
      ExpressionWithTypeArguments
        Identifier: ' RoyalGuard'
    MethodDeclaration
      Identifier: '
    lead'
      VoidKeyword
      Block
    SemicolonClassElement
  ClassDeclaration
    Identifier: ' FollowerGuard'
    HeritageClause
      ExpressionWithTypeArguments
        Identifier: ' RoyalGuard'
    MethodDeclaration
      Identifier: '
    follow'
      VoidKeyword
      Block
    SemicolonClassElement
  InterfaceDeclaration
    Identifier: ' GuardInterface'
    HeritageClause
      ExpressionWithTypeArguments
        Identifier: ' RoyalGuard'
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' a'
        TypeReference
          Identifier: ' RoyalGuard'
        NewExpression
          Identifier: ' FollowerGuard'
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' b'
        TypeReference
          Identifier: ' GuardInterface'
        NewExpression
          Identifier: ' LeadGuard'
  ExpressionStatement
    BinaryExpression
      PropertyAccessExpression
        Identifier: '

// Mismatched guards shouldn't be assignable
b'
        Identifier: 'isFollower'
      EqualsToken
      PropertyAccessExpression
        Identifier: ' b'
        Identifier: 'isLeader'
  ExpressionStatement
    BinaryExpression
      PropertyAccessExpression
        Identifier: '
b'
        Identifier: 'isLeader'
      EqualsToken
      PropertyAccessExpression
        Identifier: ' b'
        Identifier: 'isFollower'
  ExpressionStatement
    BinaryExpression
      PropertyAccessExpression
        Identifier: '

a'
        Identifier: 'isFollower'
      EqualsToken
      PropertyAccessExpression
        Identifier: ' a'
        Identifier: 'isLeader'
  ExpressionStatement
    BinaryExpression
      PropertyAccessExpression
        Identifier: '
a'
        Identifier: 'isLeader'
      EqualsToken
      PropertyAccessExpression
        Identifier: ' a'
        Identifier: 'isFollower'
  FunctionDeclaration
    Identifier: ' invalidGuard'
    Parameter
      Identifier: 'c'
      AnyKeyword
    TypePredicate
      ThisType
      NumberKeyword
    Block
      ReturnStatement
        FalseKeyword
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' c'
        UnionType
          NumberKeyword
          ArrayType
            NumberKeyword
  IfStatement
    CallExpression
      Identifier: 'invalidGuard'
      Identifier: 'c'
    Block
      ExpressionStatement
        Identifier: '
    c'
    Block
      ExpressionStatement
        Identifier: '
    c'
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' holder'
        ObjectLiteralExpression
          ShorthandPropertyAssignment
            Identifier: 'invalidGuard'
  IfStatement
    CallExpression
      PropertyAccessExpression
        Identifier: 'holder'
        Identifier: 'invalidGuard'
      Identifier: 'c'
    Block
      ExpressionStatement
        Identifier: '
    c'
      ExpressionStatement
        Identifier: '
    holder'
    Block
      ExpressionStatement
        Identifier: '
    c'
      ExpressionStatement
        Identifier: '
    holder'
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' detached'
        PropertyAccessExpression
          Identifier: ' a'
          Identifier: 'isFollower'
  IfStatement
    CallExpression
      Identifier: 'detached'
    Block
      ExpressionStatement
        CallExpression
          PropertyAccessExpression
            Identifier: '
    a'
            Identifier: 'follow'
    Block
      ExpressionStatement
        CallExpression
          PropertyAccessExpression
            Identifier: '
    a'
            Identifier: 'lead'
