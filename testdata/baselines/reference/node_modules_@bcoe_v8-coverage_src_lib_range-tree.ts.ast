SourceFile
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: ' RangeCov'
    StringLiteral
  ClassDeclaration
    ExportKeyword
    Identifier: ' RangeTree'
    PropertyDeclaration
      Identifier: '
  start'
      NumberKeyword
    PropertyDeclaration
      Identifier: '
  end'
      NumberKeyword
    PropertyDeclaration
      Identifier: '
  delta'
      NumberKeyword
    PropertyDeclaration
      Identifier: '
  children'
      ArrayType
        TypeReference
          Identifier: ' RangeTree'
    Constructor
      Parameter
        Identifier: '
    start'
        NumberKeyword
      Parameter
        Identifier: '
    end'
        NumberKeyword
      Parameter
        Identifier: '
    delta'
        NumberKeyword
      Parameter
        Identifier: '
    children'
        ArrayType
          TypeReference
            Identifier: ' RangeTree'
      Block
        ExpressionStatement
          BinaryExpression
            PropertyAccessExpression
              ThisKeyword
              Identifier: 'start'
            EqualsToken
            Identifier: ' start'
        ExpressionStatement
          BinaryExpression
            PropertyAccessExpression
              ThisKeyword
              Identifier: 'end'
            EqualsToken
            Identifier: ' end'
        ExpressionStatement
          BinaryExpression
            PropertyAccessExpression
              ThisKeyword
              Identifier: 'delta'
            EqualsToken
            Identifier: ' delta'
        ExpressionStatement
          BinaryExpression
            PropertyAccessExpression
              ThisKeyword
              Identifier: 'children'
            EqualsToken
            Identifier: ' children'
    MethodDeclaration
      StaticKeyword
      Identifier: ' fromSortedRanges'
      Parameter
        Identifier: 'ranges'
        TypeReference
          Identifier: ' ReadonlyArray'
          TypeReference
            Identifier: 'RangeCov'
      UnionType
        TypeReference
          Identifier: ' RangeTree'
        UndefinedKeyword
      Block
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' root'
              UnionType
                TypeReference
                  Identifier: ' RangeTree'
                UndefinedKeyword
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' stack'
              ArrayType
                TupleType
                  TypeReference
                    Identifier: 'RangeTree'
                  NumberKeyword
              ArrayLiteralExpression
        ForOfStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' range'
          Identifier: ' ranges'
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' node'
                  TypeReference
                    Identifier: ' RangeTree'
                  NewExpression
                    Identifier: ' RangeTree'
                    PropertyAccessExpression
                      Identifier: 'range'
                      Identifier: 'startOffset'
                    PropertyAccessExpression
                      Identifier: ' range'
                      Identifier: 'endOffset'
                    PropertyAccessExpression
                      Identifier: ' range'
                      Identifier: 'count'
                    ArrayLiteralExpression
            IfStatement
              BinaryExpression
                Identifier: 'root'
                EqualsEqualsEqualsToken
                Identifier: ' undefined'
              Block
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
        root'
                    EqualsToken
                    Identifier: ' node'
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
        stack'
                      Identifier: 'push'
                    ArrayLiteralExpression
                      Identifier: 'node'
                      PropertyAccessExpression
                        Identifier: ' range'
                        Identifier: 'count'
                ContinueStatement
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' parent'
                  TypeReference
                    Identifier: ' RangeTree'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' parentCount'
                  NumberKeyword
            WhileStatement
              TrueKeyword
              Block
                ExpressionStatement
                  BinaryExpression
                    ArrayLiteralExpression
                      Identifier: 'parent'
                      Identifier: ' parentCount'
                    EqualsToken
                    ElementAccessExpression
                      Identifier: ' stack'
                      BinaryExpression
                        PropertyAccessExpression
                          Identifier: 'stack'
                          Identifier: 'length'
                        MinusToken
                        NumericLiteral
                IfStatement
                  BinaryExpression
                    PropertyAccessExpression
                      Identifier: 'range'
                      Identifier: 'startOffset'
                    LessThanToken
                    PropertyAccessExpression
                      Identifier: ' parent'
                      Identifier: 'end'
                  Block
                    BreakStatement
                  Block
                    ExpressionStatement
                      CallExpression
                        PropertyAccessExpression
                          Identifier: '
          stack'
                          Identifier: 'pop'
            ExpressionStatement
              BinaryExpression
                PropertyAccessExpression
                  Identifier: '
      node'
                  Identifier: 'delta'
                MinusEqualsToken
                Identifier: ' parentCount'
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    Identifier: '
      parent'
                    Identifier: 'children'
                  Identifier: 'push'
                Identifier: 'node'
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  Identifier: '
      stack'
                  Identifier: 'push'
                ArrayLiteralExpression
                  Identifier: 'node'
                  PropertyAccessExpression
                    Identifier: ' range'
                    Identifier: 'count'
        ReturnStatement
          Identifier: ' root'
    MethodDeclaration
      Identifier: '

  normalize'
      VoidKeyword
      Block
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' children'
              ArrayType
                TypeReference
                  Identifier: ' RangeTree'
              ArrayLiteralExpression
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' curEnd'
              NumberKeyword
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' head'
              UnionType
                TypeReference
                  Identifier: ' RangeTree'
                UndefinedKeyword
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' tail'
              ArrayType
                TypeReference
                  Identifier: ' RangeTree'
              ArrayLiteralExpression
        ForOfStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' child'
          PropertyAccessExpression
            ThisKeyword
            Identifier: 'children'
          Block
            IfStatement
              BinaryExpression
                Identifier: 'head'
                EqualsEqualsEqualsToken
                Identifier: ' undefined'
              Block
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
        head'
                    EqualsToken
                    Identifier: ' child'
              IfStatement
                BinaryExpression
                  BinaryExpression
                    PropertyAccessExpression
                      Identifier: 'child'
                      Identifier: 'delta'
                    EqualsEqualsEqualsToken
                    PropertyAccessExpression
                      Identifier: ' head'
                      Identifier: 'delta'
                  AmpersandAmpersandToken
                  BinaryExpression
                    PropertyAccessExpression
                      Identifier: ' child'
                      Identifier: 'start'
                    EqualsEqualsEqualsToken
                    NonNullExpression
                      Identifier: ' curEnd'
                Block
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        tail'
                        Identifier: 'push'
                      Identifier: 'child'
                Block
                  ExpressionStatement
                    CallExpression
                      Identifier: '
        endChain'
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
        head'
                      EqualsToken
                      Identifier: ' child'
            ExpressionStatement
              BinaryExpression
                Identifier: '
      curEnd'
                EqualsToken
                PropertyAccessExpression
                  Identifier: ' child'
                  Identifier: 'end'
        IfStatement
          BinaryExpression
            Identifier: 'head'
            ExclamationEqualsEqualsToken
            Identifier: ' undefined'
          Block
            ExpressionStatement
              CallExpression
                Identifier: '
      endChain'
        IfStatement
          BinaryExpression
            PropertyAccessExpression
              Identifier: 'children'
              Identifier: 'length'
            EqualsEqualsEqualsToken
            NumericLiteral
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' child'
                  TypeReference
                    Identifier: ' RangeTree'
                  ElementAccessExpression
                    Identifier: ' children'
                    NumericLiteral
            IfStatement
              BinaryExpression
                BinaryExpression
                  PropertyAccessExpression
                    Identifier: 'child'
                    Identifier: 'start'
                  EqualsEqualsEqualsToken
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'start'
                AmpersandAmpersandToken
                BinaryExpression
                  PropertyAccessExpression
                    Identifier: ' child'
                    Identifier: 'end'
                  EqualsEqualsEqualsToken
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'end'
              Block
                ExpressionStatement
                  BinaryExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'delta'
                    PlusEqualsToken
                    PropertyAccessExpression
                      Identifier: ' child'
                      Identifier: 'delta'
                ExpressionStatement
                  BinaryExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'children'
                    EqualsToken
                    PropertyAccessExpression
                      Identifier: ' child'
                      Identifier: 'children'
                ReturnStatement
        ExpressionStatement
          BinaryExpression
            PropertyAccessExpression
              ThisKeyword
              Identifier: 'children'
            EqualsToken
            Identifier: ' children'
        FunctionDeclaration
          Identifier: ' endChain'
          VoidKeyword
          Block
            IfStatement
              BinaryExpression
                PropertyAccessExpression
                  Identifier: 'tail'
                  Identifier: 'length'
                ExclamationEqualsEqualsToken
                NumericLiteral
              Block
                ExpressionStatement
                  BinaryExpression
                    PropertyAccessExpression
                      NonNullExpression
                        Identifier: '
        head'
                      Identifier: 'end'
                    EqualsToken
                    PropertyAccessExpression
                      ElementAccessExpression
                        Identifier: ' tail'
                        BinaryExpression
                          PropertyAccessExpression
                            Identifier: 'tail'
                            Identifier: 'length'
                          MinusToken
                          NumericLiteral
                      Identifier: 'end'
                ForOfStatement
                  VariableDeclarationList
                    VariableDeclaration
                      Identifier: ' tailTree'
                  Identifier: ' tail'
                  Block
                    ForOfStatement
                      VariableDeclarationList
                        VariableDeclaration
                          Identifier: ' subChild'
                      PropertyAccessExpression
                        Identifier: ' tailTree'
                        Identifier: 'children'
                      Block
                        ExpressionStatement
                          BinaryExpression
                            PropertyAccessExpression
                              Identifier: '
            subChild'
                              Identifier: 'delta'
                            PlusEqualsToken
                            BinaryExpression
                              PropertyAccessExpression
                                Identifier: ' tailTree'
                                Identifier: 'delta'
                              MinusToken
                              PropertyAccessExpression
                                NonNullExpression
                                  Identifier: ' head'
                                Identifier: 'delta'
                        ExpressionStatement
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                NonNullExpression
                                  Identifier: '
            head'
                                Identifier: 'children'
                              Identifier: 'push'
                            Identifier: 'subChild'
                ExpressionStatement
                  BinaryExpression
                    PropertyAccessExpression
                      Identifier: '
        tail'
                      Identifier: 'length'
                    EqualsToken
                    NumericLiteral
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  NonNullExpression
                    Identifier: '
      head'
                  Identifier: 'normalize'
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  Identifier: '
      children'
                  Identifier: 'push'
                NonNullExpression
                  Identifier: 'head'
    MethodDeclaration
      Identifier: '

  /**
   * @precondition `tree.start < value && value < tree.end`
   * @return RangeTree Right part
   */
  split'
      Parameter
        Identifier: 'value'
        NumberKeyword
      TypeReference
        Identifier: ' RangeTree'
      Block
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' leftChildLen'
              NumberKeyword
              PropertyAccessExpression
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'children'
                Identifier: 'length'
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' mid'
              UnionType
                TypeReference
                  Identifier: ' RangeTree'
                UndefinedKeyword
        ForStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' i'
              NumberKeyword
              NumericLiteral
          BinaryExpression
            Identifier: ' i'
            LessThanToken
            PropertyAccessExpression
              PropertyAccessExpression
                ThisKeyword
                Identifier: 'children'
              Identifier: 'length'
          PostfixUnaryExpression
            Identifier: ' i'
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' child'
                  TypeReference
                    Identifier: ' RangeTree'
                  ElementAccessExpression
                    PropertyAccessExpression
                      ThisKeyword
                      Identifier: 'children'
                    Identifier: 'i'
            IfStatement
              BinaryExpression
                BinaryExpression
                  PropertyAccessExpression
                    Identifier: 'child'
                    Identifier: 'start'
                  LessThanToken
                  Identifier: ' value'
                AmpersandAmpersandToken
                BinaryExpression
                  Identifier: ' value'
                  LessThanToken
                  PropertyAccessExpression
                    Identifier: ' child'
                    Identifier: 'end'
              Block
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
        mid'
                    EqualsToken
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' child'
                        Identifier: 'split'
                      Identifier: 'value'
                ExpressionStatement
                  BinaryExpression
                    Identifier: '
        leftChildLen'
                    EqualsToken
                    BinaryExpression
                      Identifier: ' i'
                      PlusToken
                      NumericLiteral
                BreakStatement
              IfStatement
                BinaryExpression
                  PropertyAccessExpression
                    Identifier: 'child'
                    Identifier: 'start'
                  GreaterThanEqualsToken
                  Identifier: ' value'
                Block
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
        leftChildLen'
                      EqualsToken
                      Identifier: ' i'
                  BreakStatement
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' rightLen'
              NumberKeyword
              BinaryExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'children'
                  Identifier: 'length'
                MinusToken
                Identifier: ' leftChildLen'
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' rightChildren'
              ArrayType
                TypeReference
                  Identifier: ' RangeTree'
              CallExpression
                PropertyAccessExpression
                  PropertyAccessExpression
                    ThisKeyword
                    Identifier: 'children'
                  Identifier: 'splice'
                Identifier: 'leftChildLen'
                Identifier: ' rightLen'
        IfStatement
          BinaryExpression
            Identifier: 'mid'
            ExclamationEqualsEqualsToken
            Identifier: ' undefined'
          Block
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  Identifier: '
      rightChildren'
                  Identifier: 'unshift'
                Identifier: 'mid'
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' result'
              TypeReference
                Identifier: ' RangeTree'
              NewExpression
                Identifier: ' RangeTree'
                Identifier: '
      value'
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'end'
                PropertyAccessExpression
                  ThisKeyword
                  Identifier: 'delta'
                Identifier: '
      rightChildren'
        ExpressionStatement
          BinaryExpression
            PropertyAccessExpression
              ThisKeyword
              Identifier: 'end'
            EqualsToken
            Identifier: ' value'
        ReturnStatement
          Identifier: ' result'
    MethodDeclaration
      Identifier: '

  /**
   * Get the range coverages corresponding to the tree.
   *
   * The ranges are pre-order sorted.
   */
  toRanges'
      ArrayType
        TypeReference
          Identifier: ' RangeCov'
      Block
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' ranges'
              ArrayType
                TypeReference
                  Identifier: ' RangeCov'
              ArrayLiteralExpression
        VariableStatement
          VariableDeclarationList
            VariableDeclaration
              Identifier: ' stack'
              ArrayType
                TupleType
                  TypeReference
                    Identifier: 'RangeTree'
                  NumberKeyword
              ArrayLiteralExpression
                ArrayLiteralExpression
                  ThisKeyword
                  NumericLiteral
        WhileStatement
          BinaryExpression
            PropertyAccessExpression
              Identifier: 'stack'
              Identifier: 'length'
            GreaterThanToken
            NumericLiteral
          Block
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  ArrayBindingPattern
                    BindingElement
                      Identifier: 'cur'
                    BindingElement
                      Identifier: ' parentCount'
                  TupleType
                    TypeReference
                      Identifier: 'RangeTree'
                    NumberKeyword
                  NonNullExpression
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' stack'
                        Identifier: 'pop'
            VariableStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' count'
                  NumberKeyword
                  BinaryExpression
                    Identifier: ' parentCount'
                    PlusToken
                    PropertyAccessExpression
                      Identifier: ' cur'
                      Identifier: 'delta'
            ExpressionStatement
              CallExpression
                PropertyAccessExpression
                  Identifier: '
      ranges'
                  Identifier: 'push'
                ObjectLiteralExpression
                  PropertyAssignment
                    Identifier: 'startOffset'
                    PropertyAccessExpression
                      Identifier: ' cur'
                      Identifier: 'start'
                  PropertyAssignment
                    Identifier: ' endOffset'
                    PropertyAccessExpression
                      Identifier: ' cur'
                      Identifier: 'end'
                  ShorthandPropertyAssignment
                    Identifier: ' count'
            ForStatement
              VariableDeclarationList
                VariableDeclaration
                  Identifier: ' i'
                  NumberKeyword
                  BinaryExpression
                    PropertyAccessExpression
                      PropertyAccessExpression
                        Identifier: ' cur'
                        Identifier: 'children'
                      Identifier: 'length'
                    MinusToken
                    NumericLiteral
              BinaryExpression
                Identifier: ' i'
                GreaterThanEqualsToken
                NumericLiteral
              PostfixUnaryExpression
                Identifier: ' i'
              Block
                ExpressionStatement
                  CallExpression
                    PropertyAccessExpression
                      Identifier: '
        stack'
                      Identifier: 'push'
                    ArrayLiteralExpression
                      ElementAccessExpression
                        PropertyAccessExpression
                          Identifier: 'cur'
                          Identifier: 'children'
                        Identifier: 'i'
                      Identifier: ' count'
        ReturnStatement
          Identifier: ' ranges'
