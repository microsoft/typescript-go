--- old.nodeAllowJsPackageSelfName2.errors.txt
+++ new.nodeAllowJsPackageSelfName2.errors.txt
@@= skipped -0, +0 lines =@@
-<no content>
+/test/foo.js(1,21): error TS6263: Module 'js-self-name-import/foo.js' was resolved to '/src/foo.js', but '--allowArbitraryExtensions' is not set.
+
+
+==== /tsconfig.json (0 errors) ====
+    {
+      "compilerOptions": {
+        "module": "nodenext",
+        "target": "esnext",
+        "emitDeclarationOnly": true,
+        "declaration": true,
+        "declarationDir": "./types",
+        "checkJs": true,
+        "rootDir": ".",
+        "strict": true,
+      },
+      "include": ["src", "test"]
+    }
+    
+==== /src/foo.js (0 errors) ====
+    export const foo = 1;
+    
+==== /test/foo.js (1 errors) ====
+    import { foo } from "js-self-name-import/foo.js";
+                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+!!! error TS6263: Module 'js-self-name-import/foo.js' was resolved to '/src/foo.js', but '--allowArbitraryExtensions' is not set.
+    
+==== /package.json (0 errors) ====
+    {
+      "name": "js-self-name-import",
+      "type": "module",
+      "exports": {
+        "./*": {
+          "types": "./types/src/*",
+          "default": "./src/*"
+        }
+      }
+    }
+    
+==== /types/src/foo.d.ts (0 errors) ====
+    export const foo: 1;
+    
+==== /types/test/foo.d.ts (0 errors) ====
+    export {};
+    