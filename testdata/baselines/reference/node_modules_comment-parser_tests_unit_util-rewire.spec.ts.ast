SourceFile
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: ' seedTokens'
        ImportSpecifier
          Identifier: ' rewireSource'
        ImportSpecifier
          Identifier: ' rewireSpecs'
    StringLiteral
  ExpressionStatement
    CallExpression
      Identifier: '

test'
      StringLiteral
      ArrowFunction
        EqualsGreaterThanToken
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' block'
                ObjectLiteralExpression
                  PropertyAssignment
                    Identifier: '
    description'
                    StringLiteral
                  PropertyAssignment
                    Identifier: '
    tags'
                    ArrayLiteralExpression
                      ObjectLiteralExpression
                        PropertyAssignment
                          Identifier: '
        tag'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
        name'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
        type'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
        optional'
                          FalseKeyword
                        PropertyAssignment
                          Identifier: '
        description'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
        problems'
                          ArrayLiteralExpression
                        PropertyAssignment
                          Identifier: '
        source'
                          ArrayLiteralExpression
                            ObjectLiteralExpression
                              PropertyAssignment
                                Identifier: '
            number'
                                NumericLiteral
                              PropertyAssignment
                                Identifier: '
            source'
                                StringLiteral
                              PropertyAssignment
                                Identifier: '
            tokens'
                                CallExpression
                                  Identifier: ' seedTokens'
                                  ObjectLiteralExpression
                                    PropertyAssignment
                                      Identifier: ' name'
                                      StringLiteral
                  PropertyAssignment
                    Identifier: '
    source'
                    ArrayLiteralExpression
                      ObjectLiteralExpression
                        PropertyAssignment
                          Identifier: '
        number'
                          NumericLiteral
                        PropertyAssignment
                          Identifier: '
        source'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
        tokens'
                          CallExpression
                            Identifier: ' seedTokens'
                      ObjectLiteralExpression
                        PropertyAssignment
                          Identifier: '
        number'
                          NumericLiteral
                        PropertyAssignment
                          Identifier: '
        source'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
        tokens'
                          CallExpression
                            Identifier: ' seedTokens'
                            ObjectLiteralExpression
                              PropertyAssignment
                                Identifier: ' name'
                                StringLiteral
                  PropertyAssignment
                    Identifier: '
    problems'
                    ArrayLiteralExpression
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '

  // source is unsynced
  expect'
                  BinaryExpression
                    ElementAccessExpression
                      PropertyAccessExpression
                        Identifier: 'block'
                        Identifier: 'source'
                      NumericLiteral
                    EqualsEqualsEqualsToken
                    ElementAccessExpression
                      PropertyAccessExpression
                        ElementAccessExpression
                          PropertyAccessExpression
                            Identifier: ' block'
                            Identifier: 'tags'
                          NumericLiteral
                        Identifier: 'source'
                      NumericLiteral
                Identifier: 'toBe'
              FalseKeyword
          ExpressionStatement
            CallExpression
              Identifier: '

  rewireSource'
              Identifier: 'block'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '

  // source is referenced
  expect'
                  BinaryExpression
                    ElementAccessExpression
                      PropertyAccessExpression
                        Identifier: 'block'
                        Identifier: 'source'
                      NumericLiteral
                    EqualsEqualsEqualsToken
                    ElementAccessExpression
                      PropertyAccessExpression
                        ElementAccessExpression
                          PropertyAccessExpression
                            Identifier: ' block'
                            Identifier: 'tags'
                          NumericLiteral
                        Identifier: 'source'
                      NumericLiteral
                Identifier: 'toBe'
              TrueKeyword
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '

  // non-tag line stays unchanged
  expect'
                  PropertyAccessExpression
                    ElementAccessExpression
                      PropertyAccessExpression
                        Identifier: 'block'
                        Identifier: 'source'
                      NumericLiteral
                    Identifier: 'source'
                Identifier: 'toEqual'
              StringLiteral
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '
  // tag-holding source line stays unchanged
  expect'
                  PropertyAccessExpression
                    ElementAccessExpression
                      PropertyAccessExpression
                        Identifier: 'block'
                        Identifier: 'source'
                      NumericLiteral
                    Identifier: 'source'
                Identifier: 'toEqual'
              StringLiteral
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '
  expect'
                  PropertyAccessExpression
                    PropertyAccessExpression
                      ElementAccessExpression
                        PropertyAccessExpression
                          Identifier: 'block'
                          Identifier: 'source'
                        NumericLiteral
                      Identifier: 'tokens'
                    Identifier: 'name'
                Identifier: 'toEqual'
              StringLiteral
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '
  // tag source inherits block source
  expect'
                  PropertyAccessExpression
                    ElementAccessExpression
                      PropertyAccessExpression
                        ElementAccessExpression
                          PropertyAccessExpression
                            Identifier: 'block'
                            Identifier: 'tags'
                          NumericLiteral
                        Identifier: 'source'
                      NumericLiteral
                    Identifier: 'source'
                Identifier: 'toEqual'
              StringLiteral
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '
  expect'
                  PropertyAccessExpression
                    PropertyAccessExpression
                      ElementAccessExpression
                        PropertyAccessExpression
                          ElementAccessExpression
                            PropertyAccessExpression
                              Identifier: 'block'
                              Identifier: 'tags'
                            NumericLiteral
                          Identifier: 'source'
                        NumericLiteral
                      Identifier: 'tokens'
                    Identifier: 'name'
                Identifier: 'toEqual'
              StringLiteral
  ExpressionStatement
    CallExpression
      Identifier: '

test'
      StringLiteral
      ArrowFunction
        EqualsGreaterThanToken
        Block
          VariableStatement
            VariableDeclarationList
              VariableDeclaration
                Identifier: ' block'
                ObjectLiteralExpression
                  PropertyAssignment
                    Identifier: '
    description'
                    StringLiteral
                  PropertyAssignment
                    Identifier: '
    tags'
                    ArrayLiteralExpression
                      ObjectLiteralExpression
                        PropertyAssignment
                          Identifier: '
        tag'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
        name'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
        type'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
        optional'
                          FalseKeyword
                        PropertyAssignment
                          Identifier: '
        description'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
        problems'
                          ArrayLiteralExpression
                        PropertyAssignment
                          Identifier: '
        source'
                          ArrayLiteralExpression
                            ObjectLiteralExpression
                              PropertyAssignment
                                Identifier: '
            number'
                                NumericLiteral
                              PropertyAssignment
                                Identifier: '
            source'
                                StringLiteral
                              PropertyAssignment
                                Identifier: '
            tokens'
                                CallExpression
                                  Identifier: ' seedTokens'
                                  ObjectLiteralExpression
                                    PropertyAssignment
                                      Identifier: ' name'
                                      StringLiteral
                  PropertyAssignment
                    Identifier: '
    source'
                    ArrayLiteralExpression
                      ObjectLiteralExpression
                        PropertyAssignment
                          Identifier: '
        number'
                          NumericLiteral
                        PropertyAssignment
                          Identifier: '
        source'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
        tokens'
                          CallExpression
                            Identifier: ' seedTokens'
                      ObjectLiteralExpression
                        PropertyAssignment
                          Identifier: '
        number'
                          NumericLiteral
                        PropertyAssignment
                          Identifier: '
        source'
                          StringLiteral
                        PropertyAssignment
                          Identifier: '
        tokens'
                          CallExpression
                            Identifier: ' seedTokens'
                            ObjectLiteralExpression
                              PropertyAssignment
                                Identifier: ' name'
                                StringLiteral
                  PropertyAssignment
                    Identifier: '
    problems'
                    ArrayLiteralExpression
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '

  // source is unsynced
  expect'
                  BinaryExpression
                    ElementAccessExpression
                      PropertyAccessExpression
                        Identifier: 'block'
                        Identifier: 'source'
                      NumericLiteral
                    EqualsEqualsEqualsToken
                    ElementAccessExpression
                      PropertyAccessExpression
                        ElementAccessExpression
                          PropertyAccessExpression
                            Identifier: ' block'
                            Identifier: 'tags'
                          NumericLiteral
                        Identifier: 'source'
                      NumericLiteral
                Identifier: 'toBe'
              FalseKeyword
          ExpressionStatement
            CallExpression
              Identifier: '

  rewireSpecs'
              Identifier: 'block'
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '

  // source is referenced
  expect'
                  BinaryExpression
                    ElementAccessExpression
                      PropertyAccessExpression
                        Identifier: 'block'
                        Identifier: 'source'
                      NumericLiteral
                    EqualsEqualsEqualsToken
                    ElementAccessExpression
                      PropertyAccessExpression
                        ElementAccessExpression
                          PropertyAccessExpression
                            Identifier: ' block'
                            Identifier: 'tags'
                          NumericLiteral
                        Identifier: 'source'
                      NumericLiteral
                Identifier: 'toBe'
              TrueKeyword
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '

  // non-tag line stays unchanged
  expect'
                  PropertyAccessExpression
                    ElementAccessExpression
                      PropertyAccessExpression
                        Identifier: 'block'
                        Identifier: 'source'
                      NumericLiteral
                    Identifier: 'source'
                Identifier: 'toEqual'
              StringLiteral
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '
  // tag-holding source line inherits spec source
  expect'
                  PropertyAccessExpression
                    ElementAccessExpression
                      PropertyAccessExpression
                        Identifier: 'block'
                        Identifier: 'source'
                      NumericLiteral
                    Identifier: 'source'
                Identifier: 'toEqual'
              StringLiteral
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '
  expect'
                  PropertyAccessExpression
                    PropertyAccessExpression
                      ElementAccessExpression
                        PropertyAccessExpression
                          Identifier: 'block'
                          Identifier: 'source'
                        NumericLiteral
                      Identifier: 'tokens'
                    Identifier: 'name'
                Identifier: 'toEqual'
              StringLiteral
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '
  // tag source inherits block source
  expect'
                  PropertyAccessExpression
                    ElementAccessExpression
                      PropertyAccessExpression
                        ElementAccessExpression
                          PropertyAccessExpression
                            Identifier: 'block'
                            Identifier: 'tags'
                          NumericLiteral
                        Identifier: 'source'
                      NumericLiteral
                    Identifier: 'source'
                Identifier: 'toEqual'
              StringLiteral
          ExpressionStatement
            CallExpression
              PropertyAccessExpression
                CallExpression
                  Identifier: '
  expect'
                  PropertyAccessExpression
                    PropertyAccessExpression
                      ElementAccessExpression
                        PropertyAccessExpression
                          ElementAccessExpression
                            PropertyAccessExpression
                              Identifier: 'block'
                              Identifier: 'tags'
                            NumericLiteral
                          Identifier: 'source'
                        NumericLiteral
                      Identifier: 'tokens'
                    Identifier: 'name'
                Identifier: 'toEqual'
              StringLiteral
