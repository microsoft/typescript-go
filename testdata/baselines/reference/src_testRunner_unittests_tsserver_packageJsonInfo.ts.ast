SourceFile
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: ' jsonToReadableText'
    StringLiteral
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: '
    baselineTsserverLogs'
        ImportSpecifier
          Identifier: '
    openFilesForSession'
        ImportSpecifier
          Identifier: '
    TestSession'
    StringLiteral
  ImportDeclaration
    ImportClause
      NamedImports
        ImportSpecifier
          Identifier: '
    File'
        ImportSpecifier
          Identifier: '
    TestServerHost'
    StringLiteral
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' tsConfig'
        TypeReference
          Identifier: ' File'
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: '
    path'
            StringLiteral
          PropertyAssignment
            Identifier: '
    content'
            StringLiteral
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' packageJsonContent'
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: '
    dependencies'
            ObjectLiteralExpression
              PropertyAssignment
                Identifier: '
        redux'
                StringLiteral
          PropertyAssignment
            Identifier: '
    peerDependencies'
            ObjectLiteralExpression
              PropertyAssignment
                Identifier: '
        react'
                StringLiteral
          PropertyAssignment
            Identifier: '
    optionalDependencies'
            ObjectLiteralExpression
              PropertyAssignment
                Identifier: '
        typescript'
                StringLiteral
          PropertyAssignment
            Identifier: '
    devDependencies'
            ObjectLiteralExpression
              PropertyAssignment
                Identifier: '
        webpack'
                StringLiteral
  VariableStatement
    VariableDeclarationList
      VariableDeclaration
        Identifier: ' packageJson'
        TypeReference
          Identifier: ' File'
        ObjectLiteralExpression
          PropertyAssignment
            Identifier: '
    path'
            StringLiteral
          PropertyAssignment
            Identifier: '
    content'
            CallExpression
              Identifier: ' jsonToReadableText'
              Identifier: 'packageJsonContent'
  ExpressionStatement
    CallExpression
      Identifier: '

describe'
      StringLiteral
      ArrowFunction
        EqualsGreaterThanToken
        Block
          ExpressionStatement
            CallExpression
              Identifier: '
    it'
              StringLiteral
              ArrowFunction
                EqualsGreaterThanToken
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        ObjectBindingPattern
                          BindingElement
                            Identifier: ' session'
                          BindingElement
                            Identifier: ' projectService'
                          BindingElement
                            Identifier: ' host'
                        CallExpression
                          Identifier: ' setup'
                          ArrayLiteralExpression
                            Identifier: 'tsConfig'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'isUndefined'
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            Identifier: 'projectService'
                            Identifier: 'packageJsonCache'
                          Identifier: 'getInDirectory'
                        StringLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '

        // Add package.json
        host'
                        Identifier: 'writeFile'
                      PropertyAccessExpression
                        Identifier: 'packageJson'
                        Identifier: 'path'
                      PropertyAccessExpression
                        Identifier: ' packageJson'
                        Identifier: 'content'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: '
        session'
                          Identifier: 'host'
                        Identifier: 'baselineHost'
                      StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' packageJsonInfo'
                        NonNullExpression
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                Identifier: ' projectService'
                                Identifier: 'packageJsonCache'
                              Identifier: 'getInDirectory'
                            StringLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      Identifier: 'packageJsonInfo'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo'
                        Identifier: 'dependencies'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo'
                        Identifier: 'devDependencies'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo'
                        Identifier: 'peerDependencies'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo'
                        Identifier: 'optionalDependencies'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '

        // Edit package.json
        host'
                        Identifier: 'writeFile'
                      PropertyAccessExpression
                        Identifier: '
            packageJson'
                        Identifier: 'path'
                      CallExpression
                        Identifier: '
            jsonToReadableText'
                        ObjectLiteralExpression
                          SpreadAssignment
                            Identifier: 'packageJsonContent'
                          PropertyAssignment
                            Identifier: '
                dependencies'
                            Identifier: ' undefined'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: '
        session'
                          Identifier: 'host'
                        Identifier: 'baselineHost'
                      StringLiteral
                  ExpressionStatement
                    BinaryExpression
                      Identifier: '
        packageJsonInfo'
                      EqualsToken
                      NonNullExpression
                        CallExpression
                          PropertyAccessExpression
                            PropertyAccessExpression
                              Identifier: ' projectService'
                              Identifier: 'packageJsonCache'
                            Identifier: 'getInDirectory'
                          StringLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'isUndefined'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo'
                        Identifier: 'dependencies'
                  ExpressionStatement
                    CallExpression
                      Identifier: '

        baselineTsserverLogs'
                      StringLiteral
                      StringLiteral
                      Identifier: ' session'
          ExpressionStatement
            CallExpression
              Identifier: '

    it'
              StringLiteral
              ArrowFunction
                EqualsGreaterThanToken
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        ObjectBindingPattern
                          BindingElement
                            Identifier: ' session'
                          BindingElement
                            Identifier: ' projectService'
                          BindingElement
                            Identifier: ' host'
                          BindingElement
                            Identifier: ' project'
                        CallExpression
                          Identifier: ' setup'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        projectService'
                        Identifier: 'getPackageJsonsVisibleToFile'
                      StringLiteral
                      Identifier: ' project'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            Identifier: 'projectService'
                            Identifier: 'packageJsonCache'
                          Identifier: 'getInDirectory'
                        StringLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '

        // Delete package.json
        host'
                        Identifier: 'deleteFile'
                      PropertyAccessExpression
                        Identifier: 'packageJson'
                        Identifier: 'path'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: '
        session'
                          Identifier: 'host'
                        Identifier: 'baselineHost'
                      StringLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'isUndefined'
                      CallExpression
                        PropertyAccessExpression
                          PropertyAccessExpression
                            Identifier: 'projectService'
                            Identifier: 'packageJsonCache'
                          Identifier: 'getInDirectory'
                        StringLiteral
                  ExpressionStatement
                    CallExpression
                      Identifier: '
        baselineTsserverLogs'
                      StringLiteral
                      StringLiteral
                      Identifier: ' session'
          ExpressionStatement
            CallExpression
              Identifier: '

    it'
              StringLiteral
              ArrowFunction
                EqualsGreaterThanToken
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        ObjectBindingPattern
                          BindingElement
                            Identifier: ' session'
                          BindingElement
                            Identifier: ' projectService'
                          BindingElement
                            Identifier: ' host'
                          BindingElement
                            Identifier: ' project'
                        CallExpression
                          Identifier: ' setup'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        // Add package.json in /src
        host'
                        Identifier: 'writeFile'
                      StringLiteral
                      PropertyAccessExpression
                        Identifier: ' packageJson'
                        Identifier: 'content'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: '
        session'
                          Identifier: 'host'
                        Identifier: 'baselineHost'
                      StringLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'lengthOf'
                      CallExpression
                        PropertyAccessExpression
                          Identifier: 'projectService'
                          Identifier: 'getPackageJsonsVisibleToFile'
                        StringLiteral
                        Identifier: ' project'
                      NumericLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'lengthOf'
                      CallExpression
                        PropertyAccessExpression
                          Identifier: 'projectService'
                          Identifier: 'getPackageJsonsVisibleToFile'
                        StringLiteral
                        Identifier: ' project'
                      NumericLiteral
                  ExpressionStatement
                    CallExpression
                      Identifier: '
        baselineTsserverLogs'
                      StringLiteral
                      StringLiteral
                      Identifier: ' session'
          ExpressionStatement
            CallExpression
              Identifier: '

    it'
              StringLiteral
              ArrowFunction
                EqualsGreaterThanToken
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' packageJsonContent'
                        NoSubstitutionTemplateLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        ObjectBindingPattern
                          BindingElement
                            Identifier: ' session'
                          BindingElement
                            Identifier: ' projectService'
                          BindingElement
                            Identifier: ' host'
                          BindingElement
                            Identifier: ' project'
                        CallExpression
                          Identifier: ' setup'
                          ArrayLiteralExpression
                            Identifier: 'tsConfig'
                            ObjectLiteralExpression
                              PropertyAssignment
                                Identifier: ' path'
                                PropertyAccessExpression
                                  Identifier: ' packageJson'
                                  Identifier: 'path'
                              PropertyAssignment
                                Identifier: ' content'
                                Identifier: ' packageJsonContent'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        projectService'
                        Identifier: 'getPackageJsonsVisibleToFile'
                      StringLiteral
                      Identifier: ' project'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' packageJsonInfo'
                        NonNullExpression
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                Identifier: ' projectService'
                                Identifier: 'packageJsonCache'
                              Identifier: 'getInDirectory'
                            StringLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'isFalse'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo'
                        Identifier: 'parseable'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '

        host'
                        Identifier: 'writeFile'
                      PropertyAccessExpression
                        Identifier: 'packageJson'
                        Identifier: 'path'
                      PropertyAccessExpression
                        Identifier: ' packageJson'
                        Identifier: 'content'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: '
        session'
                          Identifier: 'host'
                        Identifier: 'baselineHost'
                      StringLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        projectService'
                        Identifier: 'getPackageJsonsVisibleToFile'
                      StringLiteral
                      Identifier: ' project'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' packageJsonInfo2'
                        NonNullExpression
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                Identifier: ' projectService'
                                Identifier: 'packageJsonCache'
                              Identifier: 'getInDirectory'
                            StringLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      Identifier: 'packageJsonInfo2'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo2'
                        Identifier: 'dependencies'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo2'
                        Identifier: 'devDependencies'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo2'
                        Identifier: 'peerDependencies'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo2'
                        Identifier: 'optionalDependencies'
                  ExpressionStatement
                    CallExpression
                      Identifier: '
        baselineTsserverLogs'
                      StringLiteral
                      StringLiteral
                      Identifier: ' session'
          ExpressionStatement
            CallExpression
              Identifier: '

    it'
              StringLiteral
              ArrowFunction
                EqualsGreaterThanToken
                Block
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' packageJsonContent'
                        StringLiteral
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        ObjectBindingPattern
                          BindingElement
                            Identifier: ' session'
                          BindingElement
                            Identifier: ' projectService'
                          BindingElement
                            Identifier: ' host'
                          BindingElement
                            Identifier: ' project'
                        CallExpression
                          Identifier: ' setup'
                          ArrayLiteralExpression
                            Identifier: 'tsConfig'
                            ObjectLiteralExpression
                              PropertyAssignment
                                Identifier: ' path'
                                PropertyAccessExpression
                                  Identifier: ' packageJson'
                                  Identifier: 'path'
                              PropertyAssignment
                                Identifier: ' content'
                                Identifier: ' packageJsonContent'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        projectService'
                        Identifier: 'getPackageJsonsVisibleToFile'
                      StringLiteral
                      Identifier: ' project'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' packageJsonInfo'
                        NonNullExpression
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                Identifier: ' projectService'
                                Identifier: 'packageJsonCache'
                              Identifier: 'getInDirectory'
                            StringLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'isFalse'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo'
                        Identifier: 'parseable'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '

        host'
                        Identifier: 'writeFile'
                      PropertyAccessExpression
                        Identifier: 'packageJson'
                        Identifier: 'path'
                      PropertyAccessExpression
                        Identifier: ' packageJson'
                        Identifier: 'content'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        PropertyAccessExpression
                          Identifier: '
        session'
                          Identifier: 'host'
                        Identifier: 'baselineHost'
                      StringLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        projectService'
                        Identifier: 'getPackageJsonsVisibleToFile'
                      StringLiteral
                      Identifier: ' project'
                  VariableStatement
                    VariableDeclarationList
                      VariableDeclaration
                        Identifier: ' packageJsonInfo2'
                        NonNullExpression
                          CallExpression
                            PropertyAccessExpression
                              PropertyAccessExpression
                                Identifier: ' projectService'
                                Identifier: 'packageJsonCache'
                              Identifier: 'getInDirectory'
                            StringLiteral
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      Identifier: 'packageJsonInfo2'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo2'
                        Identifier: 'dependencies'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo2'
                        Identifier: 'devDependencies'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo2'
                        Identifier: 'peerDependencies'
                  ExpressionStatement
                    CallExpression
                      PropertyAccessExpression
                        Identifier: '
        assert'
                        Identifier: 'ok'
                      PropertyAccessExpression
                        Identifier: 'packageJsonInfo2'
                        Identifier: 'optionalDependencies'
                  ExpressionStatement
                    CallExpression
                      Identifier: '
        baselineTsserverLogs'
                      StringLiteral
                      StringLiteral
                      Identifier: ' session'
  FunctionDeclaration
    Identifier: ' setup'
    Parameter
      Identifier: 'files'
      TypeOperator
        ArrayType
          TypeReference
            Identifier: ' File'
      ArrayLiteralExpression
        Identifier: 'tsConfig'
        Identifier: ' packageJson'
    Block
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' host'
            CallExpression
              PropertyAccessExpression
                Identifier: ' TestServerHost'
                Identifier: 'createServerHost'
              Identifier: 'files'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' session'
            NewExpression
              Identifier: ' TestSession'
              Identifier: 'host'
      ExpressionStatement
        CallExpression
          Identifier: '
    openFilesForSession'
          ArrayLiteralExpression
            ElementAccessExpression
              Identifier: 'files'
              NumericLiteral
          Identifier: ' session'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' projectService'
            CallExpression
              PropertyAccessExpression
                Identifier: ' session'
                Identifier: 'getProjectService'
      VariableStatement
        VariableDeclarationList
          VariableDeclaration
            Identifier: ' getPackageJsonsVisibleToFile'
            PropertyAccessExpression
              Identifier: ' projectService'
              Identifier: 'getPackageJsonsVisibleToFile'
      ExpressionStatement
        BinaryExpression
          PropertyAccessExpression
            Identifier: '
    projectService'
            Identifier: 'getPackageJsonsVisibleToFile'
          EqualsToken
          ArrowFunction
            Parameter
              Identifier: 'fileName'
            Parameter
              Identifier: ' project'
            Parameter
              Identifier: ' rootDir'
            EqualsGreaterThanToken
            Block
              ExpressionStatement
                CallExpression
                  PropertyAccessExpression
                    PropertyAccessExpression
                      Identifier: '
        session'
                      Identifier: 'host'
                    Identifier: 'baselineHost'
                  TemplateExpression
                    TemplateHead
                    TemplateSpan
                      Identifier: 'fileName'
                      TemplateMiddle
                    TemplateSpan
                      Identifier: 'rootDir'
                      TemplateTail
              VariableStatement
                VariableDeclarationList
                  VariableDeclaration
                    Identifier: ' result'
                    CallExpression
                      PropertyAccessExpression
                        Identifier: ' getPackageJsonsVisibleToFile'
                        Identifier: 'call'
                      Identifier: 'projectService'
                      Identifier: ' fileName'
                      Identifier: ' project'
                      Identifier: ' rootDir'
              ExpressionStatement
                CallExpression
                  PropertyAccessExpression
                    PropertyAccessExpression
                      Identifier: '
        session'
                      Identifier: 'host'
                    Identifier: 'baselineHost'
                  TemplateExpression
                    TemplateHead
                    TemplateSpan
                      Identifier: 'fileName'
                      TemplateMiddle
                    TemplateSpan
                      Identifier: 'rootDir'
                      TemplateMiddle
                    TemplateSpan
                      CallExpression
                        Identifier: 'jsonToReadableText'
                        Identifier: 'result'
                      TemplateTail
              ReturnStatement
                Identifier: ' result'
      ReturnStatement
        ObjectLiteralExpression
          ShorthandPropertyAssignment
            Identifier: ' host'
          ShorthandPropertyAssignment
            Identifier: ' session'
          ShorthandPropertyAssignment
            Identifier: ' projectService'
          PropertyAssignment
            Identifier: ' project'
            ElementAccessExpression
              PropertyAccessExpression
                Identifier: ' projectService'
                Identifier: 'inferredProjects'
              NumericLiteral
