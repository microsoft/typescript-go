SourceFile
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '/// <reference path="fourslash.ts"/>

// @Filename: file1.ts
////module a {
////    function foo() {}
////}
////module b {
////    function foo() {}
////}
////module a {
////    function bar() {}
////}

verify'
        Identifier: 'navigationTree'
      ObjectLiteralExpression
        PropertyAssignment
          StringLiteral
          StringLiteral
        PropertyAssignment
          StringLiteral
          StringLiteral
        PropertyAssignment
          StringLiteral
          ArrayLiteralExpression
            ObjectLiteralExpression
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                ArrayLiteralExpression
                  ObjectLiteralExpression
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
                  ObjectLiteralExpression
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
            ObjectLiteralExpression
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                ArrayLiteralExpression
                  ObjectLiteralExpression
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

verify'
        Identifier: 'navigationBar'
      ArrayLiteralExpression
        ObjectLiteralExpression
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            ArrayLiteralExpression
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
        ObjectLiteralExpression
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            ArrayLiteralExpression
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
          PropertyAssignment
            StringLiteral
            NumericLiteral
        ObjectLiteralExpression
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            ArrayLiteralExpression
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
          PropertyAssignment
            StringLiteral
            NumericLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

// Does not merge unlike declarations.
// @Filename: file2.ts
////module a {}
////function a() {}

goTo'
        Identifier: 'file'
      StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

verify'
        Identifier: 'navigationTree'
      ObjectLiteralExpression
        PropertyAssignment
          StringLiteral
          StringLiteral
        PropertyAssignment
          StringLiteral
          StringLiteral
        PropertyAssignment
          StringLiteral
          ArrayLiteralExpression
            ObjectLiteralExpression
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
            ObjectLiteralExpression
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

verify'
        Identifier: 'navigationBar'
      ArrayLiteralExpression
        ObjectLiteralExpression
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            ArrayLiteralExpression
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
        ObjectLiteralExpression
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            NumericLiteral
        ObjectLiteralExpression
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            NumericLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

// Merges recursively
// @Filename: file3.ts
////module a {
////    interface A {
////        foo: number;
////    }
////}
////module a {
////    interface A {
////        bar: number;
////    }
////}

goTo'
        Identifier: 'file'
      StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

verify'
        Identifier: 'navigationTree'
      ObjectLiteralExpression
        PropertyAssignment
          StringLiteral
          StringLiteral
        PropertyAssignment
          StringLiteral
          StringLiteral
        PropertyAssignment
          StringLiteral
          ArrayLiteralExpression
            ObjectLiteralExpression
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                ArrayLiteralExpression
                  ObjectLiteralExpression
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
                    PropertyAssignment
                      StringLiteral
                      ArrayLiteralExpression
                        ObjectLiteralExpression
                          PropertyAssignment
                            StringLiteral
                            StringLiteral
                          PropertyAssignment
                            StringLiteral
                            StringLiteral
                        ObjectLiteralExpression
                          PropertyAssignment
                            StringLiteral
                            StringLiteral
                          PropertyAssignment
                            StringLiteral
                            StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

verify'
        Identifier: 'navigationBar'
      ArrayLiteralExpression
        ObjectLiteralExpression
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            ArrayLiteralExpression
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
        ObjectLiteralExpression
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            ArrayLiteralExpression
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
          PropertyAssignment
            StringLiteral
            NumericLiteral
        ObjectLiteralExpression
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            ArrayLiteralExpression
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
          PropertyAssignment
            StringLiteral
            NumericLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

// Does not merge 'module A' with 'module A.B'

// @Filename: file4.ts
////module A { export var x; }
////module A.B { export var y; }

goTo'
        Identifier: 'file'
      StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

verify'
        Identifier: 'navigationTree'
      ObjectLiteralExpression
        PropertyAssignment
          StringLiteral
          StringLiteral
        PropertyAssignment
          StringLiteral
          StringLiteral
        PropertyAssignment
          StringLiteral
          ArrayLiteralExpression
            ObjectLiteralExpression
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                ArrayLiteralExpression
                  ObjectLiteralExpression
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
            ObjectLiteralExpression
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                StringLiteral
              PropertyAssignment
                StringLiteral
                ArrayLiteralExpression
                  ObjectLiteralExpression
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
                    PropertyAssignment
                      StringLiteral
                      StringLiteral
  ExpressionStatement
    CallExpression
      PropertyAccessExpression
        Identifier: '

verify'
        Identifier: 'navigationBar'
      ArrayLiteralExpression
        ObjectLiteralExpression
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            ArrayLiteralExpression
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
        ObjectLiteralExpression
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            ArrayLiteralExpression
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
          PropertyAssignment
            StringLiteral
            NumericLiteral
        ObjectLiteralExpression
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            StringLiteral
          PropertyAssignment
            StringLiteral
            ArrayLiteralExpression
              ObjectLiteralExpression
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
                PropertyAssignment
                  StringLiteral
                  StringLiteral
          PropertyAssignment
            StringLiteral
            NumericLiteral
